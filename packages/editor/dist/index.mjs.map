{"version":3,"sources":["../src/store/use-editor-store.ts","../src/extensions/font-size.ts","../src/extensions/line-height.ts","../src/extensions/text-direction.ts","../src/components/icons.tsx","../src/lib/utils.ts","../src/components/ui/separator.tsx","../src/components/ui/dropdown-menu.tsx","../src/components/ui/dialog.tsx","../src/components/ui/input.tsx","../src/components/ui/button.tsx","../src/utils/docx/style-utils.ts","../src/utils/docx/image-utils.ts","../src/utils/docx/color-utils.ts","../src/utils/docx/text-processor.ts","../src/utils/docx/node-processor.ts","../src/utils/docx/document-config.ts","../src/utils/docx/index.ts","../src/Toolbar.tsx","../src/Ruler.tsx","../src/Editor.tsx","../src/utils/pdf/style-utils.ts","../src/utils/pdf/image-utils.ts","../src/utils/pdf/text-processor.ts","../src/utils/pdf/node-processor.ts","../src/utils/pdf/index.ts"],"names":["Extension","React","jsx","React3","jsxs","React4","React5","AlignmentType","TextRun","ShadingType","UnderlineType","convertInchesToTwip","Paragraph","imageUrl","useState","Fragment","editor","Table","TableCell","TableRow","normalizeColor","getAlignment","parseDimension","getImageAlignment","isImageNode","createProcessingContext","processNode"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQO,IAAM,cAAA,GAAiB,MAAA,CAAoB,CAAC,GAAA,MAAS;AAAA,EAC1D,MAAA,EAAQ,IAAA;AAAA,EACR,WAAW,CAAC,MAAA,KAAW,GAAA,CAAI,EAAE,QAAQ;AACvC,CAAA,CAAE;ACCK,IAAM,iBAAA,GAAoB,UAAU,MAAA,CAAO;AAAA,EAChD,IAAA,EAAM,UAAA;AAAA,EAEN,UAAA,GAAa;AACX,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,CAAC,WAAW;AAAA,KACrB;AAAA,EACF,CAAA;AAAA,EAEA,mBAAA,GAAsB;AACpB,IAAA,OAAO;AAAA,MACL;AAAA,QACE,KAAA,EAAO,KAAK,OAAA,CAAQ,KAAA;AAAA,QACpB,UAAA,EAAY;AAAA,UACV,QAAA,EAAU;AAAA,YACR,OAAA,EAAS,IAAA;AAAA,YACT,SAAA,EAAW,CAAC,OAAA,KAAY,OAAA,CAAQ,KAAA,CAAM,QAAA;AAAA,YACtC,UAAA,EAAY,CAAC,UAAA,KAAe;AAC1B,cAAA,IAAI,CAAC,WAAW,QAAA,EAAU;AACxB,gBAAA,OAAO,EAAC;AAAA,cACV;AAEA,cAAA,OAAO;AAAA,gBACL,KAAA,EAAO,CAAA,WAAA,EAAc,UAAA,CAAW,QAAQ,CAAA;AAAA,eAC1C;AAAA,YACF;AAAA;AACF;AACF;AACF,KACF;AAAA,EACF,CAAA;AAAA,EAEA,WAAA,GAAc;AACZ,IAAA,OAAO;AAAA,MACL,aACE,CAAC,QAAA,KACD,CAAC,EAAE,OAAM,KAAM;AACb,QAAA,OAAO,KAAA,GAAQ,OAAA,CAAQ,WAAA,EAAa,EAAE,QAAA,EAAU,EAAE,GAAA,EAAI;AAAA,MACxD,CAAA;AAAA,MAEF,aAAA,EACE,MACA,CAAC,EAAE,OAAM,KAAM;AACb,QAAA,OAAO,KAAA,EAAM,CACV,OAAA,CAAQ,WAAA,EAAa,EAAE,QAAA,EAAU,IAAA,EAAM,CAAA,CACvC,oBAAA,EAAqB,CACrB,GAAA,EAAI;AAAA,MACT;AAAA,KACJ;AAAA,EACF;AACF,CAAC;ACnDM,IAAM,mBAAA,GAAsBA,UAAU,MAAA,CAAO;AAAA,EAClD,IAAA,EAAM,YAAA;AAAA,EAEN,UAAA,GAAa;AACX,IAAA,OAAO;AAAA,MACL,KAAA,EAAO,CAAC,WAAA,EAAa,SAAS,CAAA;AAAA,MAC9B,iBAAA,EAAmB;AAAA,KACrB;AAAA,EACF,CAAA;AAAA,EAEA,mBAAA,GAAsB;AACpB,IAAA,OAAO;AAAA,MACL;AAAA,QACE,KAAA,EAAO,KAAK,OAAA,CAAQ,KAAA;AAAA,QACpB,UAAA,EAAY;AAAA,UACV,UAAA,EAAY;AAAA,YACV,OAAA,EAAS,KAAK,OAAA,CAAQ,iBAAA;AAAA,YACtB,UAAA,EAAY,CAAC,UAAA,KAAe;AAC1B,cAAA,IAAI,CAAC,UAAA,CAAW,UAAA,EAAY,OAAO,EAAC;AACpC,cAAA,OAAO;AAAA,gBACL,KAAA,EAAO,CAAA,aAAA,EAAgB,UAAA,CAAW,UAAU,CAAA;AAAA,eAC9C;AAAA,YACF,CAAA;AAAA,YACA,SAAA,EAAW,CAAC,OAAA,KAAY;AACtB,cAAA,OAAO,OAAA,CAAQ,KAAA,CAAM,UAAA,IAAc,IAAA,CAAK,OAAA,CAAQ,iBAAA;AAAA,YAClD;AAAA;AACF;AACF;AACF,KACF;AAAA,EACF,CAAA;AAAA,EAEA,WAAA,GAAc;AACZ,IAAA,OAAO;AAAA,MACL,aAAA,EACE,CAAC,UAAA,KACD,CAAC,EAAE,EAAA,EAAI,KAAA,EAAO,UAAS,KAAM;AAC3B,QAAA,MAAM,EAAE,WAAU,GAAI,KAAA;AACtB,QAAA,EAAA,GAAK,EAAA,CAAG,aAAa,SAAS,CAAA;AAE9B,QAAA,MAAM,EAAE,IAAA,EAAM,EAAA,EAAG,GAAI,SAAA;AACrB,QAAA,KAAA,CAAM,IAAI,YAAA,CAAa,IAAA,EAAM,EAAA,EAAI,CAAC,MAAM,GAAA,KAAQ;AAC9C,UAAA,IAAI,KAAK,OAAA,CAAQ,KAAA,CAAM,SAAS,IAAA,CAAK,IAAA,CAAK,IAAI,CAAA,EAAG;AAC/C,YAAA,EAAA,GAAK,EAAA,CAAG,aAAA,CAAc,GAAA,EAAK,MAAA,EAAW;AAAA,cACpC,GAAG,IAAA,CAAK,KAAA;AAAA,cACR;AAAA,aACD,CAAA;AAAA,UACH;AAAA,QACF,CAAC,CAAA;AAED,QAAA,IAAI,QAAA,WAAmB,EAAE,CAAA;AACzB,QAAA,OAAO,IAAA;AAAA,MACT,CAAA;AAAA,MAEF,iBACE,MACA,CAAC,EAAE,EAAA,EAAI,KAAA,EAAO,UAAS,KAAM;AAC3B,QAAA,MAAM,EAAE,WAAU,GAAI,KAAA;AACtB,QAAA,EAAA,GAAK,EAAA,CAAG,aAAa,SAAS,CAAA;AAE9B,QAAA,MAAM,EAAE,IAAA,EAAM,EAAA,EAAG,GAAI,SAAA;AACrB,QAAA,KAAA,CAAM,IAAI,YAAA,CAAa,IAAA,EAAM,EAAA,EAAI,CAAC,MAAM,GAAA,KAAQ;AAC9C,UAAA,IAAI,KAAK,OAAA,CAAQ,KAAA,CAAM,SAAS,IAAA,CAAK,IAAA,CAAK,IAAI,CAAA,EAAG;AAC/C,YAAA,EAAA,GAAK,EAAA,CAAG,aAAA,CAAc,GAAA,EAAK,MAAA,EAAW;AAAA,cACpC,GAAG,IAAA,CAAK,KAAA;AAAA,cACR,UAAA,EAAY,KAAK,OAAA,CAAQ;AAAA,aAC1B,CAAA;AAAA,UACH;AAAA,QACF,CAAC,CAAA;AAED,QAAA,IAAI,QAAA,WAAmB,EAAE,CAAA;AACzB,QAAA,OAAO,IAAA;AAAA,MACT;AAAA,KACJ;AAAA,EACF;AACF,CAAC;AC3EM,IAAM,sBAAA,GAAyBA,UAAU,MAAA,CAAO;AAAA,EACrD,IAAA,EAAM,eAAA;AAAA,EAEN,UAAA,GAAa;AACX,IAAA,OAAO;AAAA,MACL,KAAA,EAAO;AAAA,QACL,WAAA;AAAA,QACA,SAAA;AAAA,QACA,YAAA;AAAA,QACA,aAAA;AAAA,QACA,UAAA;AAAA,QACA,UAAA;AAAA,QACA,UAAA;AAAA,QACA,WAAA;AAAA,QACA;AAAA,OACF;AAAA,MACA,gBAAA,EAAkB;AAAA,KACpB;AAAA,EACF,CAAA;AAAA,EAEA,mBAAA,GAAsB;AACpB,IAAA,OAAO;AAAA,MACL;AAAA,QACE,KAAA,EAAO,KAAK,OAAA,CAAQ,KAAA;AAAA,QACpB,UAAA,EAAY;AAAA,UACV,GAAA,EAAK;AAAA,YACH,OAAA,EAAS,KAAK,OAAA,CAAQ,gBAAA;AAAA,YACtB,UAAA,EAAY,CAAC,UAAA,KAAe;AAC1B,cAAA,IAAI,CAAC,UAAA,CAAW,GAAA,EAAK,OAAO,EAAC;AAC7B,cAAA,OAAO;AAAA,gBACL,KAAK,UAAA,CAAW,GAAA;AAAA,gBAChB,KAAA,EAAO,cAAc,UAAA,CAAW,GAAG,iBAAiB,UAAA,CAAW,GAAA,KAAQ,KAAA,GAAQ,OAAA,GAAU,MAAM,CAAA;AAAA,eACjG;AAAA,YACF,CAAA;AAAA,YACA,SAAA,EAAW,CAAC,OAAA,KAAY;AACtB,cAAA,OACE,QAAQ,YAAA,CAAa,KAAK,CAAA,IAAK,OAAA,CAAQ,MAAM,SAAA,IAAa,IAAA;AAAA,YAE9D;AAAA;AACF;AACF;AACF,KACF;AAAA,EACF,CAAA;AAAA,EAEA,WAAA,GAAc;AACZ,IAAA,OAAO;AAAA,MACL,gBAAA,EACE,CAAC,SAAA,KACD,CAAC,EAAE,EAAA,EAAI,KAAA,EAAO,UAAS,KAAM;AAC3B,QAAA,MAAM,EAAE,WAAU,GAAI,KAAA;AACtB,QAAA,EAAA,GAAK,EAAA,CAAG,aAAa,SAAS,CAAA;AAE9B,QAAA,MAAM,EAAE,IAAA,EAAM,EAAA,EAAG,GAAI,SAAA;AACrB,QAAA,KAAA,CAAM,IAAI,YAAA,CAAa,IAAA,EAAM,EAAA,EAAI,CAAC,MAAM,GAAA,KAAQ;AAC9C,UAAA,IAAI,KAAK,OAAA,CAAQ,KAAA,CAAM,SAAS,IAAA,CAAK,IAAA,CAAK,IAAI,CAAA,EAAG;AAC/C,YAAA,EAAA,GAAK,EAAA,CAAG,aAAA,CAAc,GAAA,EAAK,MAAA,EAAW;AAAA,cACpC,GAAG,IAAA,CAAK,KAAA;AAAA,cACR,GAAA,EAAK;AAAA,aACN,CAAA;AAAA,UACH;AAAA,QACF,CAAC,CAAA;AAED,QAAA,IAAI,QAAA,WAAmB,EAAE,CAAA;AACzB,QAAA,OAAO,IAAA;AAAA,MACT,CAAA;AAAA,MAEF,oBACE,MACA,CAAC,EAAE,EAAA,EAAI,KAAA,EAAO,UAAS,KAAM;AAC3B,QAAA,MAAM,EAAE,WAAU,GAAI,KAAA;AACtB,QAAA,EAAA,GAAK,EAAA,CAAG,aAAa,SAAS,CAAA;AAE9B,QAAA,MAAM,EAAE,IAAA,EAAM,EAAA,EAAG,GAAI,SAAA;AACrB,QAAA,KAAA,CAAM,IAAI,YAAA,CAAa,IAAA,EAAM,EAAA,EAAI,CAAC,MAAM,GAAA,KAAQ;AAC9C,UAAA,IAAI,KAAK,OAAA,CAAQ,KAAA,CAAM,SAAS,IAAA,CAAK,IAAA,CAAK,IAAI,CAAA,EAAG;AAC/C,YAAA,EAAA,GAAK,EAAA,CAAG,aAAA,CAAc,GAAA,EAAK,MAAA,EAAW;AAAA,cACpC,GAAG,IAAA,CAAK,KAAA;AAAA,cACR,GAAA,EAAK;AAAA,aACN,CAAA;AAAA,UACH;AAAA,QACF,CAAC,CAAA;AAED,QAAA,IAAI,QAAA,WAAmB,EAAE,CAAA;AACzB,QAAA,OAAO,IAAA;AAAA,MACT;AAAA,KACJ;AAAA,EACF;AACF,CAAC;ACjGM,IAAM,uBAAuB,CAAC,EAAE,SAAA,EAAW,GAAG,OAAM,qBACzD,GAAA;AAAA,EAAC,KAAA;AAAA,EAAA;AAAA,IACC,KAAA,EAAM,4BAAA;AAAA,IACN,OAAA,EAAQ,WAAA;AAAA,IACR,IAAA,EAAK,cAAA;AAAA,IACL,SAAA;AAAA,IACC,GAAG,KAAA;AAAA,IAEJ,QAAA,kBAAA,GAAA,CAAC,MAAA,EAAA,EAAK,CAAA,EAAE,qFAAA,EAAsF;AAAA;AAChG,CAAA;AAGK,IAAM,uBAAuB,CAAC,EAAE,SAAA,EAAW,GAAG,OAAM,qBACzD,GAAA;AAAA,EAAC,KAAA;AAAA,EAAA;AAAA,IACC,KAAA,EAAM,4BAAA;AAAA,IACN,OAAA,EAAQ,WAAA;AAAA,IACR,IAAA,EAAK,cAAA;AAAA,IACL,SAAA;AAAA,IACC,GAAG,KAAA;AAAA,IAEJ,QAAA,kBAAA,GAAA,CAAC,MAAA,EAAA,EAAK,CAAA,EAAE,mFAAA,EAAoF;AAAA;AAC9F,CAAA;ACpBK,SAAS,MAAM,MAAA,EAAsB;AAC1C,EAAA,OAAO,OAAA,CAAQ,IAAA,CAAK,MAAM,CAAC,CAAA;AAC7B;ACAA,IAAM,SAAA,GAAkBC,MAAA,CAAA,UAAA;AAAA,EAItB,CACE,EAAE,SAAA,EAAW,WAAA,GAAc,YAAA,EAAc,UAAA,GAAa,IAAA,EAAM,GAAG,KAAA,EAAM,EACrE,GAAA,qBAEAC,GAAAA;AAAA,IAAoB,kBAAA,CAAA,IAAA;AAAA,IAAnB;AAAA,MACC,GAAA;AAAA,MACA,UAAA;AAAA,MACA,WAAA;AAAA,MACA,SAAA,EAAW,EAAA;AAAA,QACT,oBAAA;AAAA,QACA,WAAA,KAAgB,eAAe,gBAAA,GAAmB,gBAAA;AAAA,QAClD;AAAA,OACF;AAAA,MACC,GAAG;AAAA;AAAA;AAGV,CAAA;AACA,SAAA,CAAU,cAAiC,kBAAA,CAAA,IAAA,CAAK,WAAA;ACpBhD,IAAM,YAAA,GAAqC,qBAAA,CAAA,IAAA;AAE3C,IAAM,mBAAA,GAA4C,qBAAA,CAAA,OAAA;AAUlD,IAAM,sBAAA,GAA+B,MAAA,CAAA,UAAA,CAKnC,CAAC,EAAE,SAAA,EAAW,OAAO,QAAA,EAAU,GAAG,KAAA,EAAM,EAAG,GAAA,qBAC3C,IAAA;AAAA,EAAuB,qBAAA,CAAA,UAAA;AAAA,EAAtB;AAAA,IACC,GAAA;AAAA,IACA,SAAA,EAAW,EAAA;AAAA,MACT,wMAAA;AAAA,MACA,KAAA,IAAS,MAAA;AAAA,MACT;AAAA,KACF;AAAA,IACC,GAAG,KAAA;AAAA,IAEH,QAAA,EAAA;AAAA,MAAA,QAAA;AAAA,sBACDA,GAAAA,CAAC,YAAA,EAAA,EAAa,SAAA,EAAU,SAAA,EAAU;AAAA;AAAA;AACpC,CACD,CAAA;AACD,sBAAA,CAAuB,cACC,qBAAA,CAAA,UAAA,CAAW,WAAA;AAEnC,IAAM,sBAAA,GAA+B,kBAGnC,CAAC,EAAE,WAAW,GAAG,KAAA,EAAM,EAAG,GAAA,qBAC1BA,GAAAA;AAAA,EAAuB,qBAAA,CAAA,UAAA;AAAA,EAAtB;AAAA,IACC,GAAA;AAAA,IACA,SAAA,EAAW,EAAA;AAAA,MACT,ubAAA;AAAA,MACA;AAAA,KACF;AAAA,IACC,GAAG;AAAA;AACN,CACD,CAAA;AACD,sBAAA,CAAuB,cACC,qBAAA,CAAA,UAAA,CAAW,WAAA;AAEnC,IAAM,mBAAA,GAA4B,MAAA,CAAA,UAAA,CAGhC,CAAC,EAAE,WAAW,UAAA,GAAa,CAAA,EAAG,GAAG,KAAA,IAAS,GAAA,qBAC1CA,GAAAA,CAAuB,qBAAA,CAAA,MAAA,EAAtB,EACC,QAAA,kBAAAA,GAAAA;AAAA,EAAuB,qBAAA,CAAA,OAAA;AAAA,EAAtB;AAAA,IACC,GAAA;AAAA,IACA,UAAA;AAAA,IACA,SAAA,EAAW,EAAA;AAAA,MACT,sGAAA;AAAA,MACA,kVAAA;AAAA,MACA;AAAA,KACF;AAAA,IACC,GAAG;AAAA;AACN,CAAA,EACF,CACD,CAAA;AACD,mBAAA,CAAoB,cAAoC,qBAAA,CAAA,OAAA,CAAQ,WAAA;AAEhE,IAAM,gBAAA,GAAyB,MAAA,CAAA,UAAA,CAK7B,CAAC,EAAE,SAAA,EAAW,OAAO,GAAG,KAAA,EAAM,EAAG,GAAA,qBACjCA,GAAAA;AAAA,EAAuB,qBAAA,CAAA,IAAA;AAAA,EAAtB;AAAA,IACC,GAAA;AAAA,IACA,SAAA,EAAW,EAAA;AAAA,MACT,uQAAA;AAAA,MACA,KAAA,IAAS,MAAA;AAAA,MACT;AAAA,KACF;AAAA,IACC,GAAG;AAAA;AACN,CACD,CAAA;AACD,gBAAA,CAAiB,cAAoC,qBAAA,CAAA,IAAA,CAAK,WAAA;AAE1D,IAAM,wBAAA,GAAiC,MAAA,CAAA,UAAA,CAGrC,CAAC,EAAE,SAAA,EAAW,UAAU,OAAA,EAAS,GAAG,KAAA,EAAM,EAAG,GAAA,qBAC7C,IAAA;AAAA,EAAuB,qBAAA,CAAA,YAAA;AAAA,EAAtB;AAAA,IACC,GAAA;AAAA,IACA,SAAA,EAAW,EAAA;AAAA,MACT,sOAAA;AAAA,MACA;AAAA,KACF;AAAA,IACA,OAAA;AAAA,IACC,GAAG,KAAA;AAAA,IAEJ,QAAA,EAAA;AAAA,sBAAAA,GAAAA,CAAC,MAAA,EAAA,EAAK,SAAA,EAAU,8DAAA,EACd,0BAAAA,GAAAA,CAAuB,qBAAA,CAAA,aAAA,EAAtB,EACC,QAAA,kBAAAA,GAAAA,CAAC,KAAA,EAAA,EAAM,SAAA,EAAU,SAAA,EAAU,GAC7B,CAAA,EACF,CAAA;AAAA,MACC;AAAA;AAAA;AACH,CACD,CAAA;AACD,wBAAA,CAAyB,cACD,qBAAA,CAAA,YAAA,CAAa,WAAA;AAErC,IAAM,qBAAA,GAA8B,kBAGlC,CAAC,EAAE,WAAW,QAAA,EAAU,GAAG,KAAA,EAAM,EAAG,GAAA,qBACpC,IAAA;AAAA,EAAuB,qBAAA,CAAA,SAAA;AAAA,EAAtB;AAAA,IACC,GAAA;AAAA,IACA,SAAA,EAAW,EAAA;AAAA,MACT,sOAAA;AAAA,MACA;AAAA,KACF;AAAA,IACC,GAAG,KAAA;AAAA,IAEJ,QAAA,EAAA;AAAA,sBAAAA,GAAAA,CAAC,MAAA,EAAA,EAAK,SAAA,EAAU,8DAAA,EACd,0BAAAA,GAAAA,CAAuB,qBAAA,CAAA,aAAA,EAAtB,EACC,QAAA,kBAAAA,GAAAA,CAAC,MAAA,EAAA,EAAO,SAAA,EAAU,sBAAA,EAAuB,GAC3C,CAAA,EACF,CAAA;AAAA,MACC;AAAA;AAAA;AACH,CACD,CAAA;AACD,qBAAA,CAAsB,cAAoC,qBAAA,CAAA,SAAA,CAAU,WAAA;AAEpE,IAAM,iBAAA,GAA0B,MAAA,CAAA,UAAA,CAK9B,CAAC,EAAE,SAAA,EAAW,OAAO,GAAG,KAAA,EAAM,EAAG,GAAA,qBACjCA,GAAAA;AAAA,EAAuB,qBAAA,CAAA,KAAA;AAAA,EAAtB;AAAA,IACC,GAAA;AAAA,IACA,SAAA,EAAW,EAAA;AAAA,MACT,mCAAA;AAAA,MACA,KAAA,IAAS,MAAA;AAAA,MACT;AAAA,KACF;AAAA,IACC,GAAG;AAAA;AACN,CACD,CAAA;AACD,iBAAA,CAAkB,cAAoC,qBAAA,CAAA,KAAA,CAAM,WAAA;AAE5D,IAAM,qBAAA,GAA8B,kBAGlC,CAAC,EAAE,WAAW,GAAG,KAAA,EAAM,EAAG,GAAA,qBAC1BA,GAAAA;AAAA,EAAuB,qBAAA,CAAA,SAAA;AAAA,EAAtB;AAAA,IACC,GAAA;AAAA,IACA,SAAA,EAAW,EAAA,CAAG,0BAAA,EAA4B,SAAS,CAAA;AAAA,IAClD,GAAG;AAAA;AACN,CACD,CAAA;AACD,qBAAA,CAAsB,cAAoC,qBAAA,CAAA,SAAA,CAAU,WAAA;ACjKpE,IAAM,MAAA,GAAyB,eAAA,CAAA,IAAA;AAI/B,IAAM,YAAA,GAA+B,eAAA,CAAA,MAAA;AAIrC,IAAM,aAAA,GAAsBC,kBAG1B,CAAC,EAAE,WAAW,GAAG,KAAA,EAAM,EAAG,GAAA,qBAC1BD,GAAAA;AAAA,EAAiB,eAAA,CAAA,OAAA;AAAA,EAAhB;AAAA,IACC,GAAA;AAAA,IACA,SAAA,EAAW,EAAA;AAAA,MACT,wJAAA;AAAA,MACA;AAAA,KACF;AAAA,IACC,GAAG;AAAA;AACN,CACD,CAAA;AACD,aAAA,CAAc,cAA8B,eAAA,CAAA,OAAA,CAAQ,WAAA;AAEpD,IAAM,aAAA,GAAsBC,MAAA,CAAA,UAAA,CAG1B,CAAC,EAAE,SAAA,EAAW,QAAA,EAAU,GAAG,KAAA,EAAM,EAAG,GAAA,qBACpCC,IAAAA,CAAC,YAAA,EAAA,EACC,QAAA,EAAA;AAAA,kBAAAF,IAAC,aAAA,EAAA,EAAc,CAAA;AAAA,kBACfE,IAAAA;AAAA,IAAiB,eAAA,CAAA,OAAA;AAAA,IAAhB;AAAA,MACC,GAAA;AAAA,MACA,SAAA,EAAW,EAAA;AAAA,QACT,6fAAA;AAAA,QACA;AAAA,OACF;AAAA,MACC,GAAG,KAAA;AAAA,MAEH,QAAA,EAAA;AAAA,QAAA,QAAA;AAAA,wBACDA,IAAAA,CAAiB,eAAA,CAAA,KAAA,EAAhB,EAAsB,WAAU,+QAAA,EAC/B,QAAA,EAAA;AAAA,0BAAAF,GAAAA,CAAC,CAAA,EAAA,EAAE,SAAA,EAAU,SAAA,EAAU,CAAA;AAAA,0BACvBA,GAAAA,CAAC,MAAA,EAAA,EAAK,SAAA,EAAU,WAAU,QAAA,EAAA,OAAA,EAAK;AAAA,SAAA,EACjC;AAAA;AAAA;AAAA;AACF,CAAA,EACF,CACD,CAAA;AACD,aAAA,CAAc,cAA8B,eAAA,CAAA,OAAA,CAAQ,WAAA;AAEpD,IAAM,eAAe,CAAC;AAAA,EACpB,SAAA;AAAA,EACA,GAAG;AACL,CAAA,qBACEA,GAAAA;AAAA,EAAC,KAAA;AAAA,EAAA;AAAA,IACC,SAAA,EAAW,EAAA;AAAA,MACT,oDAAA;AAAA,MACA;AAAA,KACF;AAAA,IACC,GAAG;AAAA;AACN,CAAA;AAEF,YAAA,CAAa,WAAA,GAAc,cAAA;AAE3B,IAAM,eAAe,CAAC;AAAA,EACpB,SAAA;AAAA,EACA,GAAG;AACL,CAAA,qBACEA,GAAAA;AAAA,EAAC,KAAA;AAAA,EAAA;AAAA,IACC,SAAA,EAAW,EAAA;AAAA,MACT,+DAAA;AAAA,MACA;AAAA,KACF;AAAA,IACC,GAAG;AAAA;AACN,CAAA;AAEF,YAAA,CAAa,WAAA,GAAc,cAAA;AAE3B,IAAM,WAAA,GAAoBC,kBAGxB,CAAC,EAAE,WAAW,GAAG,KAAA,EAAM,EAAG,GAAA,qBAC1BD,GAAAA;AAAA,EAAiB,eAAA,CAAA,KAAA;AAAA,EAAhB;AAAA,IACC,GAAA;AAAA,IACA,SAAA,EAAW,EAAA;AAAA,MACT,mDAAA;AAAA,MACA;AAAA,KACF;AAAA,IACC,GAAG;AAAA;AACN,CACD,CAAA;AACD,WAAA,CAAY,cAA8B,eAAA,CAAA,KAAA,CAAM,WAAA;AAEhD,IAAM,iBAAA,GAA0BC,kBAG9B,CAAC,EAAE,WAAW,GAAG,KAAA,EAAM,EAAG,GAAA,qBAC1BD,GAAAA;AAAA,EAAiB,eAAA,CAAA,WAAA;AAAA,EAAhB;AAAA,IACC,GAAA;AAAA,IACA,SAAA,EAAW,EAAA,CAAG,+BAAA,EAAiC,SAAS,CAAA;AAAA,IACvD,GAAG;AAAA;AACN,CACD,CAAA;AACD,iBAAA,CAAkB,cAA8B,eAAA,CAAA,WAAA,CAAY,WAAA;ACtG5D,IAAM,KAAA,GAAcG,MAAA,CAAA,UAAA;AAAA,EAClB,CAAC,EAAE,SAAA,EAAW,MAAM,GAAG,KAAA,IAAS,GAAA,KAAQ;AACtC,IAAA,uBACEH,GAAAA;AAAA,MAAC,OAAA;AAAA,MAAA;AAAA,QACC,IAAA;AAAA,QACA,SAAA,EAAW,EAAA;AAAA,UACT,yWAAA;AAAA,UACA;AAAA,SACF;AAAA,QACA,GAAA;AAAA,QACC,GAAG;AAAA;AAAA,KACN;AAAA,EAEJ;AACF,CAAA;AACA,KAAA,CAAM,WAAA,GAAc,OAAA;ACbpB,IAAM,cAAA,GAAiB,GAAA;AAAA,EACrB,uSAAA;AAAA,EACA;AAAA,IACE,QAAA,EAAU;AAAA,MACR,OAAA,EAAS;AAAA,QACP,OAAA,EACE,+DAAA;AAAA,QACF,WAAA,EACE,8EAAA;AAAA,QACF,OAAA,EACE,0FAAA;AAAA,QACF,SAAA,EACE,wEAAA;AAAA,QACF,KAAA,EAAO,8CAAA;AAAA,QACP,IAAA,EAAM;AAAA,OACR;AAAA,MACA,IAAA,EAAM;AAAA,QACJ,OAAA,EAAS,eAAA;AAAA,QACT,EAAA,EAAI,6BAAA;AAAA,QACJ,EAAA,EAAI,sBAAA;AAAA,QACJ,IAAA,EAAM;AAAA;AACR,KACF;AAAA,IACA,eAAA,EAAiB;AAAA,MACf,OAAA,EAAS,SAAA;AAAA,MACT,IAAA,EAAM;AAAA;AACR;AAEJ,CAAA;AAQA,IAAM,MAAA,GAAeI,MAAA,CAAA,UAAA;AAAA,EACnB,CAAC,EAAE,SAAA,EAAW,OAAA,EAAS,IAAA,EAAM,UAAU,KAAA,EAAO,GAAG,KAAA,EAAM,EAAG,GAAA,KAAQ;AAChE,IAAA,MAAM,IAAA,GAAO,UAAU,IAAA,GAAO,QAAA;AAC9B,IAAA,uBACEJ,GAAAA;AAAA,MAAC,IAAA;AAAA,MAAA;AAAA,QACC,SAAA,EAAW,GAAG,cAAA,CAAe,EAAE,SAAS,IAAA,EAAM,SAAA,EAAW,CAAC,CAAA;AAAA,QAC1D,GAAA;AAAA,QACC,GAAG;AAAA;AAAA,KACN;AAAA,EAEJ;AACF,CAAA;AACA,MAAA,CAAO,WAAA,GAAc,QAAA;ACjDd,IAAM,cAAA,GAAiB,CAAC,KAAA,KAAkC;AAC/D,EAAA,IAAI,OAAO,KAAA,KAAU,QAAA,EAAU,OAAO,KAAA;AACtC,EAAA,IAAI,OAAO,UAAU,QAAA,EAAU;AAC7B,IAAA,MAAM,SAAS,UAAA,CAAW,KAAA,CAAM,OAAA,CAAQ,WAAA,EAAa,EAAE,CAAC,CAAA;AACxD,IAAA,OAAO,KAAA,CAAM,MAAM,CAAA,GAAI,IAAA,GAAO,MAAA;AAAA,EAChC;AACA,EAAA,OAAO,IAAA;AACT,CAAA;AAKO,IAAM,sBAAA,GAAyB,CACpC,KAAA,KACoD;AACpD,EAAA,IAAI,KAAA,GAAuB,IAAA;AAC3B,EAAA,IAAI,MAAA,GAAwB,IAAA;AAE5B,EAAA,MAAM,UAAA,GAAa,KAAA,CAAM,KAAA,CAAM,yCAAyC,CAAA;AACxE,EAAA,IAAI,UAAA,EAAY,KAAA,GAAQ,UAAA,CAAW,UAAA,CAAW,CAAC,CAAC,CAAA;AAEhD,EAAA,MAAM,WAAA,GAAc,KAAA,CAAM,KAAA,CAAM,0CAA0C,CAAA;AAC1E,EAAA,IAAI,WAAA,EAAa,MAAA,GAAS,UAAA,CAAW,WAAA,CAAY,CAAC,CAAC,CAAA;AAEnD,EAAA,OAAO,EAAE,OAAO,MAAA,EAAO;AACzB,CAAA;AAMO,IAAM,qBAAA,GAAwB,CAAC,KAAA,KAAiC;AACrE,EAAA,MAAM,UAAA,GAAa,KAAA,CAAM,KAAA,CAAM,wBAAwB,CAAA;AACvD,EAAA,IAAI,UAAA,EAAY,OAAO,UAAA,CAAW,CAAC,EAAE,WAAA,EAAY;AAKjD,EAAA,MAAM,kBAAA,GACJ,kDAAA;AACF,EAAA,IACE,kBAAA,CAAmB,IAAA,CAAK,KAAK,CAAA,IAC5B,KAAA,CAAM,QAAA,CAAS,mBAAmB,CAAA,IACjC,CAAC,KAAA,CAAM,QAAA,CAAS,oBAAoB,CAAA,EACtC;AACA,IAAA,OAAO,OAAA;AAAA,EACT;AAGA,EAAA,MAAM,iBAAA,GACJ,kDAAA;AACF,EAAA,IACE,iBAAA,CAAkB,IAAA,CAAK,KAAK,CAAA,IAC3B,KAAA,CAAM,QAAA,CAAS,oBAAoB,CAAA,IAClC,CAAC,KAAA,CAAM,QAAA,CAAS,mBAAmB,CAAA,EACrC;AACA,IAAA,OAAO,MAAA;AAAA,EACT;AAGA,EAAA,MAAM,mBAAA,GAAsB,yCAAA;AAC5B,EAAA,IACE,mBAAA,CAAoB,IAAA,CAAK,KAAK,CAAA,IAC7B,KAAA,CAAM,QAAA,CAAS,mBAAmB,CAAA,IACjC,KAAA,CAAM,QAAA,CAAS,oBAAoB,CAAA,EACrC;AACA,IAAA,OAAO,QAAA;AAAA,EACT;AAEA,EAAA,MAAM,cAAA,GAAiB,KAAA,CAAM,KAAA,CAAM,oCAAoC,CAAA;AACvE,EAAA,IAAI,cAAA,EAAgB,OAAO,cAAA,CAAe,CAAC,EAAE,WAAA,EAAY;AAGzD,EAAA,MAAM,eAAe,KAAA,CAAM,KAAA;AAAA,IACzB;AAAA,GACF;AACA,EAAA,IAAI,YAAA,EAAc;AAChB,IAAA,MAAM,OAAA,GAAU,YAAA,CAAa,CAAC,CAAA,CAAE,WAAA,EAAY;AAC5C,IAAA,IAAI,OAAA,KAAY,YAAA,IAAgB,OAAA,KAAY,OAAA,EAAS,OAAO,MAAA;AAC5D,IAAA,IAAI,OAAA,KAAY,UAAA,IAAc,OAAA,KAAY,KAAA,EAAO,OAAO,OAAA;AACxD,IAAA,IAAI,OAAA,KAAY,UAAU,OAAO,QAAA;AAAA,EACnC;AAEA,EAAA,OAAO,IAAA;AACT,CAAA;AAKO,IAAM,YAAA,GAAe,CAC1B,KAAA,KACmE;AACnE,EAAA,IAAI,CAAC,KAAA,EAAO,SAAA,EAAW,OAAO,MAAA;AAC9B,EAAA,MAAM,QAAA,GAGF;AAAA,IACF,MAAM,aAAA,CAAc,IAAA;AAAA,IACpB,QAAQ,aAAA,CAAc,MAAA;AAAA,IACtB,OAAO,aAAA,CAAc,KAAA;AAAA,IACrB,SAAS,aAAA,CAAc;AAAA,GACzB;AACA,EAAA,OAAO,QAAA,CAAS,MAAM,SAAmB,CAAA;AAC3C,CAAA;AAKO,IAAM,iBAAA,GAAoB,CAC/B,KAAA,KACmE;AACnE,EAAA,IAAI,OAAO,KAAA,EAAO;AAChB,IAAA,MAAM,KAAA,GAAS,KAAA,CAAM,KAAA,CAAiB,WAAA,EAAY;AAClD,IAAA,IAAI,KAAA,KAAU,QAAA,EAAU,OAAO,aAAA,CAAc,MAAA;AAC7C,IAAA,IAAI,KAAA,KAAU,OAAA,EAAS,OAAO,aAAA,CAAc,KAAA;AAC5C,IAAA,IAAI,KAAA,KAAU,MAAA,EAAQ,OAAO,aAAA,CAAc,IAAA;AAAA,EAC7C;AAGA,EAAA,IAAI,KAAA,EAAO,cAAA,IAAkB,OAAO,KAAA,CAAM,mBAAmB,QAAA,EAAU;AACrE,IAAA,MAAM,cAAA,GAAiB,qBAAA,CAAsB,KAAA,CAAM,cAAc,CAAA;AACjE,IAAA,IAAI,cAAA,KAAmB,QAAA,EAAU,OAAO,aAAA,CAAc,MAAA;AACtD,IAAA,IAAI,cAAA,KAAmB,OAAA,EAAS,OAAO,aAAA,CAAc,KAAA;AACrD,IAAA,IAAI,cAAA,KAAmB,MAAA,EAAQ,OAAO,aAAA,CAAc,IAAA;AAAA,EACtD;AAEA,EAAA,IAAI,KAAA,EAAO,KAAA,IAAS,OAAO,KAAA,CAAM,UAAU,QAAA,EAAU;AACnD,IAAA,MAAM,UAAA,GAAa,qBAAA,CAAsB,KAAA,CAAM,KAAK,CAAA;AACpD,IAAA,IAAI,UAAA,KAAe,QAAA,EAAU,OAAO,aAAA,CAAc,MAAA;AAClD,IAAA,IAAI,UAAA,KAAe,OAAA,EAAS,OAAO,aAAA,CAAc,KAAA;AACjD,IAAA,IAAI,UAAA,KAAe,MAAA,EAAQ,OAAO,aAAA,CAAc,IAAA;AAAA,EAClD;AAEA,EAAA,IAAI,OAAO,SAAA,EAAW;AACpB,IAAA,MAAM,KAAA,GAAS,KAAA,CAAM,SAAA,CAAqB,WAAA,EAAY;AACtD,IAAA,IAAI,KAAA,KAAU,QAAA,EAAU,OAAO,aAAA,CAAc,MAAA;AAC7C,IAAA,IAAI,KAAA,KAAU,OAAA,EAAS,OAAO,aAAA,CAAc,KAAA;AAC5C,IAAA,IAAI,KAAA,KAAU,MAAA,EAAQ,OAAO,aAAA,CAAc,IAAA;AAAA,EAC7C;AAEA,EAAA,OAAO,MAAA;AACT,CAAA;;;AC7IO,IAAM,YAAA,GAAe,CAAC,GAAA,KAA+C;AAC1E,EAAA,IAAI,GAAA,CAAI,UAAA,CAAW,OAAO,CAAA,EAAG;AAC3B,IAAA,MAAM,SAAA,GAAY,GAAA,CAAI,KAAA,CAAM,mBAAmB,CAAA;AAC/C,IAAA,IAAI,SAAA,EAAW;AACb,MAAA,MAAM,IAAA,GAAO,SAAA,CAAU,CAAC,CAAA,CAAE,WAAA,EAAY;AACtC,MAAA,IAAI,IAAA,KAAS,MAAA,IAAU,IAAA,KAAS,KAAA,EAAO,OAAO,KAAA;AAC9C,MAAA,IAAI,IAAA,KAAS,OAAO,OAAO,KAAA;AAC3B,MAAA,IAAI,IAAA,KAAS,OAAO,OAAO,KAAA;AAAA,IAC7B;AACA,IAAA,OAAO,KAAA;AAAA,EACT;AACA,EAAA,MAAM,GAAA,GAAM,GAAA,CAAI,KAAA,CAAM,GAAG,CAAA,CAAE,GAAA,EAAI,EAAG,WAAA,EAAY,CAAE,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA;AAC5D,EAAA,IAAI,GAAA,KAAQ,KAAA,IAAS,GAAA,KAAQ,MAAA,EAAQ,OAAO,KAAA;AAC5C,EAAA,IAAI,GAAA,KAAQ,OAAO,OAAO,KAAA;AAC1B,EAAA,IAAI,GAAA,KAAQ,OAAO,OAAO,KAAA;AAC1B,EAAA,OAAO,KAAA;AACT,CAAA;AAKO,IAAM,kBAAA,GAAqB,CAChC,GAAA,KACgC;AAChC,EAAA,OAAO,IAAI,OAAA,CAAQ,CAAC,OAAA,KAAY;AAC9B,IAAA,MAAM,GAAA,GAAM,QAAA,CAAS,aAAA,CAAc,KAAK,CAAA;AACxC,IAAA,GAAA,CAAI,WAAA,GAAc,WAAA;AAClB,IAAA,GAAA,CAAI,SAAS,MAAM;AACjB,MAAA,IAAI;AACF,QAAA,MAAM,MAAA,GAAS,QAAA,CAAS,aAAA,CAAc,QAAQ,CAAA;AAC9C,QAAA,MAAA,CAAO,QAAQ,GAAA,CAAI,YAAA;AACnB,QAAA,MAAA,CAAO,SAAS,GAAA,CAAI,aAAA;AACpB,QAAA,MAAM,GAAA,GAAM,MAAA,CAAO,UAAA,CAAW,IAAI,CAAA;AAClC,QAAA,IAAI,CAAC,GAAA,EAAK;AACR,UAAA,OAAA,CAAQ,IAAI,CAAA;AACZ,UAAA;AAAA,QACF;AACA,QAAA,GAAA,CAAI,SAAA,CAAU,GAAA,EAAK,CAAA,EAAG,CAAC,CAAA;AACvB,QAAA,MAAA,CAAO,MAAA,CAAO,CAAC,IAAA,KAAS;AACtB,UAAA,IAAI,IAAA,EAAM;AACR,YAAA,IAAA,CACG,WAAA,GACA,IAAA,CAAK,OAAO,EACZ,KAAA,CAAM,MAAM,OAAA,CAAQ,IAAI,CAAC,CAAA;AAAA,UAC9B,CAAA,MAAO;AACL,YAAA,OAAA,CAAQ,IAAI,CAAA;AAAA,UACd;AAAA,QACF,GAAG,WAAW,CAAA;AAAA,MAChB,CAAA,CAAA,MAAQ;AACN,QAAA,OAAA,CAAQ,IAAI,CAAA;AAAA,MACd;AAAA,IACF,CAAA;AACA,IAAA,GAAA,CAAI,OAAA,GAAU,MAAM,OAAA,CAAQ,IAAI,CAAA;AAChC,IAAA,GAAA,CAAI,GAAA,GAAM,GAAA;AAAA,EACZ,CAAC,CAAA;AACH,CAAA;AAMO,IAAM,uBAAA,GAA0B,OACrC,GAAA,KACgC;AAChC,EAAA,IAAI;AACF,IAAA,IAAI,GAAA,CAAI,UAAA,CAAW,OAAO,CAAA,EAAG;AAC3B,MAAA,MAAM,UAAA,GAAa,GAAA,CAAI,KAAA,CAAM,GAAG,EAAE,CAAC,CAAA;AACnC,MAAA,MAAM,YAAA,GAAe,KAAK,UAAU,CAAA;AACpC,MAAA,MAAM,KAAA,GAAQ,IAAI,UAAA,CAAW,YAAA,CAAa,MAAM,CAAA;AAChD,MAAA,KAAA,IAAS,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,YAAA,CAAa,QAAQ,CAAA,EAAA,EAAK;AAC5C,QAAA,KAAA,CAAM,CAAC,CAAA,GAAI,YAAA,CAAa,UAAA,CAAW,CAAC,CAAA;AAAA,MACtC;AACA,MAAA,OAAO,KAAA,CAAM,MAAA;AAAA,IACf;AAEA,IAAA,IAAI,GAAA,CAAI,UAAA,CAAW,OAAO,CAAA,EAAG;AAC3B,MAAA,MAAM,QAAA,GAAW,MAAM,KAAA,CAAM,GAAG,CAAA;AAChC,MAAA,IAAI,CAAC,QAAA,CAAS,EAAA,EAAI,MAAM,IAAI,MAAM,4BAA4B,CAAA;AAC9D,MAAA,OAAO,MAAM,SAAS,WAAA,EAAY;AAAA,IACpC;AAEA,IAAA,IAAI;AACF,MAAA,MAAM,QAAA,GAAW,MAAM,KAAA,CAAM,GAAG,CAAA;AAChC,MAAA,IAAI,CAAC,QAAA,CAAS,EAAA,EAAI,MAAM,IAAI,MAAM,uBAAuB,CAAA;AACzD,MAAA,OAAO,MAAM,SAAS,WAAA,EAAY;AAAA,IACpC,CAAA,CAAA,MAAQ;AACN,MAAA,OAAO,MAAM,mBAAmB,GAAG,CAAA;AAAA,IACrC;AAAA,EACF,SAAS,KAAA,EAAO;AACd,IAAA,OAAA,CAAQ,KAAA,CAAM,yBAAyB,KAAK,CAAA;AAC5C,IAAA,OAAO,IAAA;AAAA,EACT;AACF,CAAA;AAKO,IAAM,wBAAA,GAA2B,CACtC,GAAA,KACoE;AACpE,EAAA,OAAO,IAAI,OAAA,CAAQ,CAAC,OAAA,KAAY;AAC9B,IAAA,MAAM,GAAA,GAAM,QAAA,CAAS,aAAA,CAAc,KAAK,CAAA;AACxC,IAAA,GAAA,CAAI,WAAA,GAAc,WAAA;AAClB,IAAA,GAAA,CAAI,SAAS,MAAM;AACjB,MAAA,OAAA,CAAQ;AAAA,QACN,cAAc,GAAA,CAAI,YAAA;AAAA,QAClB,eAAe,GAAA,CAAI;AAAA,OACpB,CAAA;AAAA,IACH,CAAA;AACA,IAAA,GAAA,CAAI,OAAA,GAAU,MAAM,OAAA,CAAQ,IAAI,CAAA;AAChC,IAAA,GAAA,CAAI,GAAA,GAAM,GAAA;AAAA,EACZ,CAAC,CAAA;AACH,CAAA;AAMO,IAAM,6BAAA,GAAgC,OAC3C,KAAA,EACA,GAAA,KAC+C;AAC/C,EAAA,MAAM,QAAA,GAAW,GAAA;AAGjB,EAAA,IAAI,KAAA,GAAuB,IAAA;AAC3B,EAAA,IAAI,MAAA,GAAwB,IAAA;AAG5B,EAAA,IAAI,KAAA,EAAO,cAAA,IAAkB,OAAO,KAAA,CAAM,mBAAmB,QAAA,EAAU;AACrE,IAAA,MAAM,kBAAA,GAAqB,sBAAA,CAAuB,KAAA,CAAM,cAAc,CAAA;AACtE,IAAA,IAAI,kBAAA,CAAmB,KAAA,EAAO,KAAA,GAAQ,kBAAA,CAAmB,KAAA;AACzD,IAAA,IAAI,kBAAA,CAAmB,MAAA,EAAQ,MAAA,GAAS,kBAAA,CAAmB,MAAA;AAAA,EAC7D;AAGA,EAAA,IAAI,KAAA,EAAO,KAAA,IAAS,OAAO,KAAA,CAAM,UAAU,QAAA,EAAU;AACnD,IAAA,MAAM,SAAA,GAAY,sBAAA,CAAuB,KAAA,CAAM,KAAK,CAAA;AACpD,IAAA,IAAI,SAAA,CAAU,KAAA,EAAO,KAAA,GAAQ,SAAA,CAAU,KAAA;AACvC,IAAA,IAAI,SAAA,CAAU,MAAA,EAAQ,MAAA,GAAS,SAAA,CAAU,MAAA;AAAA,EAC3C;AAGA,EAAA,MAAM,SAAA,GAAY,cAAA,CAAe,KAAA,EAAO,KAAK,CAAA;AAC7C,EAAA,MAAM,UAAA,GAAa,cAAA,CAAe,KAAA,EAAO,MAAM,CAAA;AAC/C,EAAA,IAAI,WAAW,KAAA,GAAQ,SAAA;AACvB,EAAA,IAAI,YAAY,MAAA,GAAS,UAAA;AAGzB,EAAA,MAAM,SAAA,GAAY,cAAA,CAAe,KAAA,GAAQ,YAAY,CAAC,CAAA;AACtD,EAAA,MAAM,UAAA,GAAa,cAAA,CAAe,KAAA,GAAQ,aAAa,CAAC,CAAA;AACxD,EAAA,IAAI,WAAW,KAAA,GAAQ,SAAA;AACvB,EAAA,IAAI,YAAY,MAAA,GAAS,UAAA;AAGzB,EAAA,MAAM,YAAA,GAAe,cAAA,CAAe,KAAA,EAAO,YAAY,CAAA;AACvD,EAAA,MAAM,aAAA,GAAgB,cAAA,CAAe,KAAA,EAAO,aAAa,CAAA;AACzD,EAAA,IAAI,cAAc,KAAA,GAAQ,YAAA;AAC1B,EAAA,IAAI,eAAe,MAAA,GAAS,aAAA;AAG5B,EAAA,IAAI,SAAS,MAAA,EAAQ;AACnB,IAAA,IAAI,QAAQ,QAAA,EAAU;AACpB,MAAA,MAAM,QAAQ,QAAA,GAAW,KAAA;AACzB,MAAA,KAAA,GAAQ,QAAA;AACR,MAAA,MAAA,GAAS,IAAA,CAAK,KAAA,CAAM,MAAA,GAAS,KAAK,CAAA;AAAA,IACpC;AACA,IAAA,OAAO,EAAE,KAAA,EAAO,IAAA,CAAK,KAAA,CAAM,KAAK,GAAG,MAAA,EAAQ,IAAA,CAAK,KAAA,CAAM,MAAM,CAAA,EAAE;AAAA,EAChE;AAGA,EAAA,MAAM,UAAA,GAAa,MAAM,wBAAA,CAAyB,GAAG,CAAA;AAErD,EAAA,IAAI,UAAA,EAAY;AACd,IAAA,MAAM,EAAE,YAAA,EAAc,aAAA,EAAc,GAAI,UAAA;AACxC,IAAA,MAAM,cAAc,aAAA,GAAgB,YAAA;AAEpC,IAAA,IAAI,KAAA,IAAS,CAAC,MAAA,EAAQ;AAEpB,MAAA,MAAA,GAAS,IAAA,CAAK,KAAA,CAAM,KAAA,GAAQ,WAAW,CAAA;AAAA,IACzC,CAAA,MAAA,IAAW,MAAA,IAAU,CAAC,KAAA,EAAO;AAE3B,MAAA,KAAA,GAAQ,IAAA,CAAK,KAAA,CAAM,MAAA,GAAS,WAAW,CAAA;AAAA,IACzC,CAAA,MAAO;AAEL,MAAA,KAAA,GAAQ,YAAA;AACR,MAAA,MAAA,GAAS,aAAA;AAAA,IACX;AAGA,IAAA,IAAI,QAAQ,QAAA,EAAU;AACpB,MAAA,MAAM,QAAQ,QAAA,GAAW,KAAA;AACzB,MAAA,KAAA,GAAQ,QAAA;AACR,MAAA,MAAA,GAAS,IAAA,CAAK,KAAA,CAAM,MAAA,GAAS,KAAK,CAAA;AAAA,IACpC;AAEA,IAAA,OAAO,EAAE,KAAA,EAAO,IAAA,CAAK,KAAA,CAAM,KAAK,GAAG,MAAA,EAAQ,IAAA,CAAK,KAAA,CAAM,MAAM,CAAA,EAAE;AAAA,EAChE;AAGA,EAAA,IAAI,CAAC,OAAO,KAAA,GAAQ,GAAA;AACpB,EAAA,IAAI,CAAC,QAAQ,MAAA,GAAS,GAAA;AAEtB,EAAA,IAAI,QAAQ,QAAA,EAAU;AACpB,IAAA,MAAM,QAAQ,QAAA,GAAW,KAAA;AACzB,IAAA,KAAA,GAAQ,QAAA;AACR,IAAA,MAAA,GAAS,IAAA,CAAK,KAAA,CAAM,MAAA,GAAS,KAAK,CAAA;AAAA,EACpC;AAEA,EAAA,OAAO,EAAE,KAAA,EAAO,IAAA,CAAK,KAAA,CAAM,KAAK,GAAG,MAAA,EAAQ,IAAA,CAAK,KAAA,CAAM,MAAM,CAAA,EAAE;AAChE,CAAA;;;ACnNO,IAAM,cAAA,GAAiB,CAAC,KAAA,KAAkD;AAC/E,EAAA,IAAI,CAAC,OAAO,OAAO,MAAA;AAEnB,EAAA,IAAI,UAAA,GAAa,KAAA,CAAM,OAAA,CAAQ,IAAA,EAAM,EAAE,CAAA;AAEvC,EAAA,MAAM,QAAA,GAAW,KAAA,CAAM,KAAA,CAAM,gCAAgC,CAAA;AAC7D,EAAA,IAAI,QAAA,EAAU;AACZ,IAAA,MAAM,CAAA,GAAI,QAAA,CAAS,QAAA,CAAS,CAAC,CAAC,CAAA,CAAE,QAAA,CAAS,EAAE,CAAA,CAAE,QAAA,CAAS,CAAA,EAAG,GAAG,CAAA;AAC5D,IAAA,MAAM,CAAA,GAAI,QAAA,CAAS,QAAA,CAAS,CAAC,CAAC,CAAA,CAAE,QAAA,CAAS,EAAE,CAAA,CAAE,QAAA,CAAS,CAAA,EAAG,GAAG,CAAA;AAC5D,IAAA,MAAM,CAAA,GAAI,QAAA,CAAS,QAAA,CAAS,CAAC,CAAC,CAAA,CAAE,QAAA,CAAS,EAAE,CAAA,CAAE,QAAA,CAAS,CAAA,EAAG,GAAG,CAAA;AAC5D,IAAA,UAAA,GAAa,CAAA,EAAG,CAAC,CAAA,EAAG,CAAC,GAAG,CAAC,CAAA,CAAA;AAAA,EAC3B;AACA,EAAA,OAAO,WAAW,WAAA,EAAY;AAChC,CAAA;AAKO,IAAM,iBAAA,GAAoB,CAAC,KAAA,KAAsC;AACtE,EAAA,MAAM,QAAA,GAAmC;AAAA,IACvC,MAAA,EAAQ,QAAA;AAAA,IACR,KAAA,EAAO,OAAA;AAAA,IACP,IAAA,EAAM,MAAA;AAAA,IACN,OAAA,EAAS,SAAA;AAAA,IACT,IAAA,EAAM,MAAA;AAAA,IACN,GAAA,EAAK,KAAA;AAAA,IACL,QAAA,EAAU,UAAA;AAAA,IACV,QAAA,EAAU,UAAA;AAAA,IACV,SAAA,EAAW,WAAA;AAAA,IACX,WAAA,EAAa,aAAA;AAAA,IACb,OAAA,EAAS,SAAA;AAAA,IACT,UAAA,EAAY,YAAA;AAAA,IACZ,QAAA,EAAU,UAAA;AAAA,IACV,SAAA,EAAW,WAAA;AAAA,IACX,KAAA,EAAO,OAAA;AAAA,IACP,KAAA,EAAO;AAAA,GACT;AACA,EAAA,OAAO,QAAA,CAAS,KAAA,CAAM,WAAA,EAAa,CAAA,IAAK,MAAA;AAC1C,CAAA;;;AC1BO,IAAM,kBAAA,GAAqB,CAChC,OAAA,EACA,KAAA,GAAiB,KAAA,KACI;AACrB,EAAA,IAAI,CAAC,OAAA,IAAW,OAAA,CAAQ,MAAA,KAAW,CAAA,EAAG;AACpC,IAAA,OAAO,CAAC,IAAI,OAAA,CAAQ,EAAE,MAAM,EAAA,EAAI,WAAA,EAAa,KAAA,EAAO,CAAC,CAAA;AAAA,EACvD;AAEA,EAAA,MAAM,SAA2B,EAAC;AAElC,EAAA,KAAA,MAAW,QAAQ,OAAA,EAAS;AAC1B,IAAA,IAAI,IAAA,CAAK,SAAS,MAAA,EAAQ;AACxB,MAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,IAAS,EAAC;AAG7B,MAAA,MAAM,SAAS,KAAA,CAAM,IAAA,CAAK,CAAC,CAAA,KAAM,CAAA,CAAE,SAAS,MAAM,CAAA;AAClD,MAAA,MAAM,WAAW,KAAA,CAAM,IAAA,CAAK,CAAC,CAAA,KAAM,CAAA,CAAE,SAAS,QAAQ,CAAA;AACtD,MAAA,MAAM,cAAc,KAAA,CAAM,IAAA,CAAK,CAAC,CAAA,KAAM,CAAA,CAAE,SAAS,WAAW,CAAA;AAC5D,MAAA,MAAM,WAAW,KAAA,CAAM,IAAA,CAAK,CAAC,CAAA,KAAM,CAAA,CAAE,SAAS,QAAQ,CAAA;AACtD,MAAA,MAAM,cAAc,KAAA,CAAM,IAAA,CAAK,CAAC,CAAA,KAAM,CAAA,CAAE,SAAS,WAAW,CAAA;AAC5D,MAAA,MAAM,gBAAgB,KAAA,CAAM,IAAA,CAAK,CAAC,CAAA,KAAM,CAAA,CAAE,SAAS,aAAa,CAAA;AAChE,MAAA,MAAM,SAAS,KAAA,CAAM,IAAA,CAAK,CAAC,CAAA,KAAM,CAAA,CAAE,SAAS,MAAM,CAAA;AAGlD,MAAA,MAAM,gBAAgB,KAAA,CAAM,IAAA,CAAK,CAAC,CAAA,KAAM,CAAA,CAAE,SAAS,WAAW,CAAA;AAC9D,MAAA,MAAM,SAAA,GAAY,cAAA;AAAA,QAChB,eAAe,KAAA,EAAO;AAAA,OACxB;AAGA,MAAA,MAAM,gBAAgB,KAAA,CAAM,IAAA,CAAK,CAAC,CAAA,KAAM,CAAA,CAAE,SAAS,WAAW,CAAA;AAC9D,MAAA,MAAM,kBAAA,GAAqB,eAAe,KAAA,EAAO,KAAA;AAGjD,MAAA,MAAM,SAAA,GAAY,kBAAA,GACd,iBAAA,CAAkB,kBAAkB,CAAA,GACpC,MAAA;AAGJ,MAAA,MAAM,UAAA,GAAa,eAAe,KAAA,EAAO,UAAA;AAGzC,MAAA,MAAM,YAAA,GAAe,eAAe,KAAA,EAAO,QAAA;AAC3C,MAAA,IAAI,QAAA;AACJ,MAAA,IAAI,YAAA,EAAc;AAEhB,QAAA,MAAM,SAAA,GAAY,YAAA,CAAa,KAAA,CAAM,2BAA2B,CAAA;AAChE,QAAA,IAAI,SAAA,EAAW;AACb,UAAA,MAAM,KAAA,GAAQ,UAAA,CAAW,SAAA,CAAU,CAAC,CAAC,CAAA;AACrC,UAAA,MAAM,IAAA,GAAO,SAAA,CAAU,CAAC,CAAA,IAAK,IAAA;AAE7B,UAAA,QAAA,GACE,IAAA,KAAS,IAAA,GACJ,CAAA,EAAG,IAAA,CAAK,KAAA,CAAM,QAAQ,IAAI,CAAC,CAAA,EAAA,CAAA,GAC3B,CAAA,EAAG,KAAK,CAAA,EAAA,CAAA;AAAA,QACjB;AAAA,MACF;AAGA,MAAA,MAAM,WAAW,KAAA,CAAM,IAAA,CAAK,CAAC,CAAA,KAAM,CAAA,CAAE,SAAS,MAAM,CAAA;AACpD,MAAA,IAAI,QAAA,IAAY,QAAA,CAAS,KAAA,EAAO,IAAA,EAAM;AACpC,QAAA,MAAA,CAAO,IAAA;AAAA,UACL,IAAI,iBAAA,CAAkB;AAAA,YACpB,QAAA,EAAU;AAAA,cACR,IAAI,OAAA,CAAQ;AAAA,gBACV,IAAA,EAAM,KAAK,IAAA,IAAQ,EAAA;AAAA,gBACnB,KAAA,EAAO,WAAA;AAAA,gBACP,IAAA,EAAM,MAAA;AAAA,gBACN,OAAA,EAAS,QAAA;AAAA,gBACT,WAAW,WAAA,GACP,EAAE,IAAA,EAAM,aAAA,CAAc,QAAO,GAC7B,MAAA;AAAA,gBACJ,MAAA,EAAQ,QAAA;AAAA,gBACR,WAAA,EAAa,KAAA;AAAA,gBACb,KAAA,EAAO,SAAA;AAAA,gBACP,IAAA,EAAM,QAAA;AAAA,gBACN,IAAA,EAAM,UAAA,GAAa,EAAE,IAAA,EAAM,YAAW,GAAI;AAAA,eAC3C;AAAA,aACH;AAAA,YACA,IAAA,EAAM,SAAS,KAAA,CAAM;AAAA,WACtB;AAAA,SACH;AAAA,MACF,CAAA,MAAO;AACL,QAAA,MAAA,CAAO,IAAA;AAAA,UACL,IAAI,OAAA,CAAQ;AAAA,YACV,IAAA,EAAM,KAAK,IAAA,IAAQ,EAAA;AAAA,YACnB,IAAA,EAAM,MAAA;AAAA,YACN,OAAA,EAAS,QAAA;AAAA,YACT,WAAW,WAAA,GAAc,EAAE,IAAA,EAAM,aAAA,CAAc,QAAO,GAAI,MAAA;AAAA,YAC1D,MAAA,EAAQ,QAAA;AAAA,YACR,SAAA,EAAW,WAAA;AAAA,YACX,WAAA,EAAa,aAAA;AAAA,YACb,WAAA,EAAa,KAAA;AAAA,YACb,KAAA,EAAO,SAAA;AAAA,YACP,SAAA;AAAA,YACA,IAAA,EAAM,QAAA;AAAA,YACN,IAAA,EAAM,MAAA,GACF,EAAE,IAAA,EAAM,aAAA,KACR,UAAA,GACE,EAAE,IAAA,EAAM,UAAA,EAAW,GACnB,MAAA;AAAA;AAAA,YAEN,OAAA,EACE,kBAAA,IAAsB,CAAC,SAAA,GACnB;AAAA,cACE,MAAM,WAAA,CAAY,KAAA;AAAA,cAClB,KAAA,EAAO,eAAe,kBAAkB,CAAA;AAAA,cACxC,IAAA,EAAM,eAAe,kBAAkB;AAAA,aACzC,GACA;AAAA,WACP;AAAA,SACH;AAAA,MACF;AAAA,IACF,CAAA,MAAA,IAAW,IAAA,CAAK,IAAA,KAAS,WAAA,EAAa;AACpC,MAAA,MAAA,CAAO,KAAK,IAAI,OAAA,CAAQ,EAAE,KAAA,EAAO,CAAA,EAAG,CAAC,CAAA;AAAA,IACvC;AAAA,EACF;AAEA,EAAA,OAAO,MAAA,CAAO,MAAA,GAAS,CAAA,GACnB,MAAA,GACA,CAAC,IAAI,OAAA,CAAQ,EAAE,IAAA,EAAM,EAAA,EAAI,WAAA,EAAa,KAAA,EAAO,CAAC,CAAA;AACpD,CAAA;;;ACzGO,IAAM,WAAA,GAAc,CAAC,IAAA,KAA2B;AACrD,EAAA,OACE,KAAK,IAAA,KAAS,OAAA,IACd,KAAK,IAAA,KAAS,gBAAA,IACd,KAAK,IAAA,KAAS,aAAA;AAElB,CAAA;AAKO,IAAM,oBAAA,GAAuB,OAClC,IAAA,EACA,eAAA,EACA,QAAiB,KAAA,KACa;AAC9B,EAAA,MAAM,GAAA,GAAM,KAAK,KAAA,EAAO,GAAA;AACxB,EAAA,IAAI,CAAC,GAAA,EAAK;AACR,IAAA,OAAA,CAAQ,IAAA,CAAK,0BAA0B,IAAI,CAAA;AAC3C,IAAA,OAAO,IAAA;AAAA,EACT;AAEA,EAAA,MAAM,SAAA,GAAY,MAAM,uBAAA,CAAwB,GAAG,CAAA;AACnD,EAAA,IAAI,CAAC,SAAA,EAAW;AACd,IAAA,OAAA,CAAQ,KAAK,iCAAA,EAAmC,GAAA,CAAI,SAAA,CAAU,CAAA,EAAG,GAAG,CAAC,CAAA;AACrE,IAAA,OAAO,IAAA;AAAA,EACT;AAGA,EAAA,MAAM,EAAE,KAAA,EAAO,MAAA,EAAO,GAAI,MAAM,6BAAA;AAAA,IAC9B,IAAA,CAAK,SAAS,EAAC;AAAA,IACf;AAAA,GACF;AACA,EAAA,MAAM,SAAA,GAAY,aAAa,GAAG,CAAA;AAClC,EAAA,MAAM,cAAA,GAAiB,iBAAA,CAAkB,IAAA,CAAK,KAAA,IAAS,EAAE,CAAA;AAIzD,EAAA,IAAI,iBAAiB,cAAA,IAAkB,eAAA;AACvC,EAAA,IAAI,KAAA,IAAS,CAAC,cAAA,EAAgB;AAC5B,IAAA,cAAA,GAAiBK,aAAAA,CAAc,KAAA;AAAA,EACjC;AAIA,EAAA,IAAI,eAAA;AAGJ,EAAA,MAAM,QAAA,GAAW,OAAO,cAAc,CAAA;AACtC,EAAA,IAAI,aAAa,OAAA,EAAS;AACxB,IAAA,eAAA,GAAkB,uBAAA,CAAwB,KAAA;AAAA,EAC5C,CAAA,MAAA,IAAW,aAAa,QAAA,EAAU;AAChC,IAAA,eAAA,GAAkB,uBAAA,CAAwB,MAAA;AAAA,EAC5C,CAAA,MAAA,IAAW,aAAa,MAAA,EAAQ;AAC9B,IAAA,eAAA,GAAkB,uBAAA,CAAwB,IAAA;AAAA,EAC5C;AAGA,EAAA,IAAI,eAAA,EAAiB;AACnB,IAAA,OAAO,IAAI,SAAA,CAAU;AAAA,MACnB,QAAA,EAAU;AAAA,QACR,IAAI,QAAA,CAAS;AAAA,UACX,IAAA,EAAM,SAAA;AAAA,UACN,cAAA,EAAgB,EAAE,KAAA,EAAO,MAAA,EAAO;AAAA,UAChC,IAAA,EAAM,SAAA;AAAA,UACN,QAAA,EAAU;AAAA,YACR,kBAAA,EAAoB;AAAA,cAClB,UAAU,8BAAA,CAA+B,MAAA;AAAA,cACzC,KAAA,EAAO;AAAA,aACT;AAAA,YACA,gBAAA,EAAkB;AAAA,cAChB,UAAU,4BAAA,CAA6B,SAAA;AAAA,cACvC,OAAO,qBAAA,CAAsB;AAAA,aAC/B;AAAA,YACA,IAAA,EAAM;AAAA,cACJ,MAAM,gBAAA,CAAiB;AAAA;AACzB;AACF,SACD;AAAA,OACH;AAAA,MACA,aAAA,EAAe,QAAQ,IAAA,GAAO;AAAA,KAC/B,CAAA;AAAA,EACH;AAGA,EAAA,OAAO,IAAI,SAAA,CAAU;AAAA,IACnB,QAAA,EAAU;AAAA,MACR,IAAI,QAAA,CAAS;AAAA,QACX,IAAA,EAAM,SAAA;AAAA,QACN,cAAA,EAAgB,EAAE,KAAA,EAAO,MAAA,EAAO;AAAA,QAChC,IAAA,EAAM;AAAA,OACP;AAAA,KACH;AAAA,IACA,SAAA,EAAW,cAAA;AAAA,IACX,aAAA,EAAe,QAAQ,IAAA,GAAO;AAAA,GAC/B,CAAA;AACH,CAAA;AAeO,IAAM,0BAA0B,OAA0B;AAAA,EAC/D,kBAAkB,EAAC;AAAA,EACnB,yBAAA,EAA2B,CAAA;AAAA,EAC3B,0BAAA,EAA4B,CAAA;AAAA,EAC5B,kBAAA,EAAoB;AACtB,CAAA,CAAA;AAKO,IAAM,WAAA,GAAc,OACzB,IAAA,EACA,OAAA,EACA,YAAoB,CAAA,KACF;AAClB,EAAA,MAAM,OAAA,GAAU,KAAK,KAAA,EAAO,GAAA;AAC5B,EAAA,MAAM,YAAY,OAAA,KAAY,KAAA;AAG9B,EAAA,IAAI,OAAA,EAAS;AACX,IAAA,OAAA,CAAQ,kBAAA,GAAqB,OAAA;AAAA,EAC/B;AAEA,EAAA,QAAQ,KAAK,IAAA;AAAM,IACjB,KAAK,WAAA,EAAa;AAChB,MAAA,MAAM,QAAA,GAAW,KAAK,OAAA,EAAS,IAAA,CAAK,CAAC,IAAA,KAAS,WAAA,CAAY,IAAI,CAAC,CAAA;AAC/D,MAAA,MAAM,aAAA,GAAgB,YAAA,CAAa,IAAA,CAAK,KAAA,IAAS,EAAE,CAAA;AAGnD,MAAA,MAAM,UAAA,GAAa,YACf,EAAE,aAAA,EAAe,MAAM,SAAA,EAAWA,aAAAA,CAAc,KAAA,EAAM,GACtD,EAAC;AAEL,MAAA,IAAI,QAAA,EAAU;AACZ,QAAA,KAAA,MAAW,IAAA,IAAQ,IAAA,CAAK,OAAA,IAAW,EAAC,EAAG;AACrC,UAAA,IAAI,WAAA,CAAY,IAAI,CAAA,EAAG;AACrB,YAAA,MAAM,eAAe,MAAM,oBAAA;AAAA,cACzB,IAAA;AAAA,cACA,aAAA;AAAA,cACA;AAAA,aACF;AACA,YAAA,IAAI,YAAA,EAAc,OAAA,CAAQ,gBAAA,CAAiB,IAAA,CAAK,YAAY,CAAA;AAAA,UAC9D,CAAA,MAAA,IAAW,IAAA,CAAK,IAAA,KAAS,MAAA,EAAQ;AAC/B,YAAA,MAAM,YAAA,GAAe,kBAAA,CAAmB,CAAC,IAAI,GAAG,SAAS,CAAA;AACzD,YAAA,OAAA,CAAQ,gBAAA,CAAiB,IAAA;AAAA,cACvB,IAAI,SAAA,CAAU;AAAA,gBACZ,QAAA,EAAU,YAAA;AAAA,gBACV,SAAA,EAAW,SAAA,GAAYA,aAAAA,CAAc,KAAA,GAAQ,aAAA;AAAA,gBAC7C,GAAG;AAAA,eACJ;AAAA,aACH;AAAA,UACF;AAAA,QACF;AAAA,MACF,CAAA,MAAO;AACL,QAAA,MAAM,eAAe,kBAAA,CAAmB,IAAA,CAAK,OAAA,IAAW,IAAI,SAAS,CAAA;AACrE,QAAA,OAAA,CAAQ,gBAAA,CAAiB,IAAA;AAAA,UACvB,IAAI,SAAA,CAAU;AAAA,YACZ,QAAA,EAAU,YAAA;AAAA,YACV,SAAA,EAAW,SAAA,GAAYA,aAAAA,CAAc,KAAA,GAAQ,aAAA;AAAA,YAC7C,GAAG;AAAA,WACJ;AAAA,SACH;AAAA,MACF;AACA,MAAA;AAAA,IACF;AAAA,IAEA,KAAK,OAAA;AAAA,IACL,KAAK,gBAAA;AAAA,IACL,KAAK,aAAA,EAAe;AAElB,MAAA,MAAM,YAAA,GAAe,SAAA,IAAa,OAAA,CAAQ,kBAAA,KAAuB,KAAA;AACjE,MAAA,MAAM,eAAe,MAAM,oBAAA;AAAA,QACzB,IAAA;AAAA,QACA,MAAA;AAAA,QACA;AAAA,OACF;AACA,MAAA,IAAI,YAAA,EAAc,OAAA,CAAQ,gBAAA,CAAiB,IAAA,CAAK,YAAY,CAAA;AAC5D,MAAA;AAAA,IACF;AAAA,IAEA,KAAK,SAAA,EAAW;AACd,MAAA,MAAM,KAAA,GAAS,IAAA,CAAK,KAAA,EAAO,KAAA,IAAoB,CAAA;AAC/C,MAAA,MAAM,eAAA,GAGF;AAAA,QACF,GAAG,YAAA,CAAa,SAAA;AAAA,QAChB,GAAG,YAAA,CAAa,SAAA;AAAA,QAChB,GAAG,YAAA,CAAa,SAAA;AAAA,QAChB,GAAG,YAAA,CAAa,SAAA;AAAA,QAChB,GAAG,YAAA,CAAa,SAAA;AAAA,QAChB,GAAG,YAAA,CAAa;AAAA,OAClB;AAEA,MAAA,OAAA,CAAQ,gBAAA,CAAiB,IAAA;AAAA,QACvB,IAAI,SAAA,CAAU;AAAA,UACZ,UAAU,kBAAA,CAAmB,IAAA,CAAK,OAAA,IAAW,IAAI,SAAS,CAAA;AAAA,UAC1D,OAAA,EAAS,eAAA,CAAgB,KAAK,CAAA,IAAK,YAAA,CAAa,SAAA;AAAA,UAChD,aAAA,EAAe,YAAY,IAAA,GAAO,MAAA;AAAA,UAClC,SAAA,EAAW,YACPA,aAAAA,CAAc,KAAA,GACd,aAAa,IAAA,CAAK,KAAA,IAAS,EAAE;AAAA,SAClC;AAAA,OACH;AACA,MAAA;AAAA,IACF;AAAA,IAEA,KAAK,YAAA,EAAc;AACjB,MAAA,OAAA,CAAQ,yBAAA,EAAA;AAER,MAAA,MAAM,gBAAA,GAAmB,OACvB,KAAA,EACA,KAAA,EACA,SAAA,KACG;AACH,QAAA,KAAA,MAAW,YAAY,KAAA,EAAO;AAE5B,UAAA,MAAM,OAAA,GACH,QAAA,CAAS,KAAA,EAAO,GAAA,IAA8B,SAAA,IAAa,OAAA;AAE9D,UAAA,KAAA,MAAW,OAAA,IAAW,QAAA,CAAS,OAAA,IAAW,EAAC,EAAG;AAC5C,YAAA,IACE,OAAA,CAAQ,IAAA,KAAS,YAAA,IACjB,OAAA,CAAQ,SAAS,aAAA,EACjB;AAEA,cAAA,MAAM,iBAAiB,OAAA,CAAQ,OAAA,IAAW,EAAC,EAAG,KAAA,GAAQ,GAAG,OAAO,CAAA;AAAA,YAClE,CAAA,MAAA,IAAW,OAAA,CAAQ,IAAA,KAAS,WAAA,EAAa;AAEvC,cAAA,MAAM,OAAA,GACH,OAAA,CAAQ,KAAA,EAAO,GAAA,IAA8B,OAAA;AAChD,cAAA,MAAM,YAAY,OAAA,KAAY,KAAA;AAE9B,cAAA,OAAA,CAAQ,gBAAA,CAAiB,IAAA;AAAA,gBACvB,IAAI,SAAA,CAAU;AAAA,kBACZ,UAAU,kBAAA,CAAmB,OAAA,CAAQ,OAAA,IAAW,IAAI,SAAS,CAAA;AAAA,kBAC7D,MAAA,EAAQ,EAAE,KAAA,EAAM;AAAA,kBAChB,aAAA,EAAe,YAAY,IAAA,GAAO,MAAA;AAAA,kBAClC,SAAA,EAAW,YACPA,aAAAA,CAAc,KAAA,GACd,aAAa,OAAA,CAAQ,KAAA,IAAS,EAAE;AAAA,iBACrC;AAAA,eACH;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,CAAA;AAEA,MAAA,MAAM,iBAAiB,IAAA,CAAK,OAAA,IAAW,EAAC,EAAG,WAAW,OAAO,CAAA;AAC7D,MAAA;AAAA,IACF;AAAA,IAEA,KAAK,aAAA,EAAe;AAClB,MAAA,OAAA,CAAQ,0BAAA,EAAA;AACR,MAAA,MAAM,kBAAkB,OAAA,CAAQ,0BAAA;AAEhC,MAAA,MAAM,uBAAA,GAA0B,OAC9B,KAAA,EACA,KAAA,EACA,SAAA,KACG;AACH,QAAA,KAAA,MAAW,YAAY,KAAA,EAAO;AAE5B,UAAA,MAAM,OAAA,GACH,QAAA,CAAS,KAAA,EAAO,GAAA,IAA8B,SAAA,IAAa,OAAA;AAE9D,UAAA,KAAA,MAAW,OAAA,IAAW,QAAA,CAAS,OAAA,IAAW,EAAC,EAAG;AAC5C,YAAA,IACE,OAAA,CAAQ,IAAA,KAAS,YAAA,IACjB,OAAA,CAAQ,SAAS,aAAA,EACjB;AAEA,cAAA,MAAM,uBAAA;AAAA,gBACJ,OAAA,CAAQ,WAAW,EAAC;AAAA,gBACpB,KAAA,GAAQ,CAAA;AAAA,gBACR;AAAA,eACF;AAAA,YACF,CAAA,MAAA,IAAW,OAAA,CAAQ,IAAA,KAAS,WAAA,EAAa;AAEvC,cAAA,MAAM,OAAA,GACH,OAAA,CAAQ,KAAA,EAAO,GAAA,IAA8B,OAAA;AAChD,cAAA,MAAM,YAAY,OAAA,KAAY,KAAA;AAE9B,cAAA,OAAA,CAAQ,gBAAA,CAAiB,IAAA;AAAA,gBACvB,IAAI,SAAA,CAAU;AAAA,kBACZ,UAAU,kBAAA,CAAmB,OAAA,CAAQ,OAAA,IAAW,IAAI,SAAS,CAAA;AAAA,kBAC7D,SAAA,EAAW;AAAA,oBACT,SAAA,EAAW,wBAAA;AAAA,oBACX,KAAA;AAAA,oBACA,QAAA,EAAU;AAAA,mBACZ;AAAA,kBACA,aAAA,EAAe,YAAY,IAAA,GAAO,MAAA;AAAA,kBAClC,SAAA,EAAW,YACPA,aAAAA,CAAc,KAAA,GACd,aAAa,OAAA,CAAQ,KAAA,IAAS,EAAE;AAAA,iBACrC;AAAA,eACH;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,CAAA;AAEA,MAAA,MAAM,wBAAwB,IAAA,CAAK,OAAA,IAAW,EAAC,EAAG,WAAW,OAAO,CAAA;AACpE,MAAA;AAAA,IACF;AAAA,IAEA,KAAK,UAAA,EAAY;AACf,MAAA,KAAA,MAAW,QAAA,IAAY,IAAA,CAAK,OAAA,IAAW,EAAC,EAAG;AACzC,QAAA,MAAM,SAAA,GAAY,QAAA,CAAS,KAAA,EAAO,OAAA,KAAY,IAAA;AAC9C,QAAA,MAAM,OAAA,GACH,QAAA,CAAS,KAAA,EAAO,GAAA,IAA8B,OAAA;AAEjD,QAAA,KAAA,MAAW,IAAA,IAAQ,QAAA,CAAS,OAAA,IAAW,EAAC,EAAG;AACzC,UAAA,IAAI,IAAA,CAAK,SAAS,WAAA,EAAa;AAC7B,YAAA,MAAM,OAAA,GACH,IAAA,CAAK,KAAA,EAAO,GAAA,IAA8B,OAAA;AAC7C,YAAA,MAAM,YAAY,OAAA,KAAY,KAAA;AAE9B,YAAA,OAAA,CAAQ,gBAAA,CAAiB,IAAA;AAAA,cACvB,IAAI,SAAA,CAAU;AAAA,gBACZ,QAAA,EAAU;AAAA,kBACR,IAAI,QAAA,CAAS,EAAE,OAAA,EAAS,WAAW,CAAA;AAAA,kBACnC,IAAIC,OAAAA,CAAQ,EAAE,MAAM,GAAA,EAAK,WAAA,EAAa,WAAW,CAAA;AAAA,kBACjD,GAAG,kBAAA,CAAmB,IAAA,CAAK,OAAA,IAAW,IAAI,SAAS;AAAA,iBACrD;AAAA,gBACA,aAAA,EAAe,YAAY,IAAA,GAAO,MAAA;AAAA,gBAClC,SAAA,EAAW,YACPD,aAAAA,CAAc,KAAA,GACd,aAAa,IAAA,CAAK,KAAA,IAAS,EAAE;AAAA,eAClC;AAAA,aACH;AAAA,UACF;AAAA,QACF;AAAA,MACF;AACA,MAAA;AAAA,IACF;AAAA,IAEA,KAAK,OAAA,EAAS;AACZ,MAAA,MAAM,QAAA,GAAW,IAAA,CAAK,OAAA,GAAU,CAAC,CAAA;AACjC,MAAA,MAAM,SAAA,GAAY,QAAA,EAAU,OAAA,GAAU,CAAC,CAAA;AACvC,MAAA,MAAM,SAAA,GAAY,SAAA,EAAW,OAAA,GAAU,CAAC,CAAA;AACxC,MAAA,MAAM,UAAA,GACJ,SAAA,EAAW,KAAA,EAAO,GAAA,KAAQ,SAC1B,SAAA,EAAW,KAAA,EAAO,GAAA,KAAQ,KAAA,IAC1B,UAAU,KAAA,EAAO,GAAA,KAAQ,KAAA,IACzB,IAAA,CAAK,OAAO,GAAA,KAAQ,KAAA;AAEtB,MAAA,MAAM,WAAA,GAAc,QAAA,EAAU,OAAA,EAAS,MAAA,IAAU,CAAA;AACjD,MAAA,MAAM,eAAA,GAAkB,GAAA;AACxB,MAAA,MAAM,WAAA,GAAc,IAAA,CAAK,KAAA,CAAM,eAAA,GAAkB,WAAW,CAAA;AAC5D,MAAA,MAAM,YAAA,GAAe,KAAA,CAAM,WAAW,CAAA,CAAE,KAAK,WAAW,CAAA;AAExD,MAAA,MAAM,SAAA,GACJ,IAAA,CAAK,OAAA,EAAS,GAAA,CAAI,CAAC,GAAA,KAAQ;AACzB,QAAA,MAAM,QACJ,GAAA,CAAI,OAAA,EAAS,GAAA,CAAI,CAAC,MAAM,SAAA,KAAc;AACpC,UAAA,MAAM,cAAA,GACJ,IAAA,CAAK,OAAA,EAAS,GAAA,CAAI,CAAC,IAAA,KAAS;AAC1B,YAAA,MAAM,OAAA,GACH,IAAA,CAAK,KAAA,EAAO,GAAA,IACZ,IAAA,CAAK,KAAA,EAAO,GAAA,IACZ,GAAA,CAAI,KAAA,EAAO,GAAA,IACX,IAAA,CAAK,KAAA,EAAO,GAAA;AACf,YAAA,MAAM,SAAA,GAAY,YAAY,KAAA,IAAS,UAAA;AAEvC,YAAA,OAAO,IAAI,SAAA,CAAU;AAAA,cACnB,UAAU,kBAAA,CAAmB,IAAA,CAAK,OAAA,IAAW,IAAI,SAAS,CAAA;AAAA,cAC1D,aAAA,EAAe,YAAY,IAAA,GAAO,MAAA;AAAA,cAClC,SAAA,EAAW,YACPA,aAAAA,CAAc,KAAA,GACd,aAAa,IAAA,CAAK,KAAA,IAAS,EAAE;AAAA,aAClC,CAAA;AAAA,UACH,CAAC,CAAA,IAAK,CAAC,IAAI,SAAA,CAAU,EAAE,QAAA,EAAU,EAAC,EAAG,CAAC,CAAA;AAExC,UAAA,OAAO,IAAI,SAAA,CAAU;AAAA,YACnB,QAAA,EAAU,cAAA;AAAA,YACV,KAAA,EAAO;AAAA,cACL,IAAA,EAAM,YAAA,CAAa,SAAS,CAAA,IAAK,WAAA;AAAA,cACjC,MAAM,SAAA,CAAU;AAAA;AAClB,WACD,CAAA;AAAA,QACH,CAAC,KAAK,EAAC;AACT,QAAA,OAAO,IAAI,QAAA,CAAS,EAAE,QAAA,EAAU,OAAO,CAAA;AAAA,MACzC,CAAC,KAAK,EAAC;AAET,MAAA,IAAI,SAAA,CAAU,SAAS,CAAA,EAAG;AACxB,QAAA,OAAA,CAAQ,gBAAA,CAAiB,IAAA;AAAA,UACvB,IAAI,KAAA,CAAM;AAAA,YACR,IAAA,EAAM,SAAA;AAAA,YACN,YAAA;AAAA,YACA,QAAQ,eAAA,CAAgB,KAAA;AAAA,YACxB,mBAAA,EAAqB,UAAA;AAAA,YACrB,OAAO,EAAE,IAAA,EAAM,eAAA,EAAiB,IAAA,EAAM,UAAU,GAAA;AAAI,WACrD;AAAA,SACH;AAAA,MACF;AACA,MAAA;AAAA,IACF;AAAA,IAEA,KAAK,YAAA,EAAc;AACjB,MAAA,KAAA,MAAW,IAAA,IAAQ,IAAA,CAAK,OAAA,IAAW,EAAC,EAAG;AACrC,QAAA,MAAM,OAAA,GAAW,IAAA,CAAK,KAAA,EAAO,GAAA,IAA8B,OAAA;AAC3D,QAAA,MAAM,YAAY,OAAA,KAAY,KAAA;AAE9B,QAAA,IAAI,IAAA,CAAK,SAAS,WAAA,EAAa;AAC7B,UAAA,OAAA,CAAQ,gBAAA,CAAiB,IAAA;AAAA,YACvB,IAAI,SAAA,CAAU;AAAA,cACZ,UAAU,kBAAA,CAAmB,IAAA,CAAK,OAAA,IAAW,IAAI,SAAS,CAAA;AAAA,cAC1D,MAAA,EAAQ,EAAE,IAAA,EAAM,mBAAA,CAAoB,GAAG,CAAA,EAAE;AAAA,cACzC,aAAA,EAAe,YAAY,IAAA,GAAO,MAAA;AAAA,cAClC,SAAA,EAAW,YACPA,aAAAA,CAAc,KAAA,GACd,aAAa,IAAA,CAAK,KAAA,IAAS,EAAE,CAAA;AAAA,cACjC,OAAA,EAAS;AAAA,gBACP,MAAME,WAAAA,CAAY,KAAA;AAAA,gBAClB,KAAA,EAAO,QAAA;AAAA,gBACP,IAAA,EAAM;AAAA;AACR,aACD;AAAA,WACH;AAAA,QACF,CAAA,MAAO;AAEL,UAAA,MAAM,WAAA,CAAY,MAAM,OAAO,CAAA;AAAA,QACjC;AAAA,MACF;AACA,MAAA;AAAA,IACF;AAAA,IAEA,KAAK,WAAA,EAAa;AAChB,MAAA,MAAM,SAAA,GACJ,IAAA,CAAK,OAAA,EAAS,GAAA,CAAI,CAAC,CAAA,KAAM,CAAA,CAAE,IAAA,IAAQ,EAAE,CAAA,CAAE,IAAA,CAAK,IAAI,CAAA,IAAK,EAAA;AAEvD,MAAA,OAAA,CAAQ,gBAAA,CAAiB,IAAA;AAAA,QACvB,IAAI,SAAA,CAAU;AAAA,UACZ,QAAA,EAAU;AAAA,YACR,IAAID,OAAAA,CAAQ;AAAA,cACV,IAAA,EAAM,SAAA;AAAA,cACN,IAAA,EAAM,EAAE,IAAA,EAAM,aAAA,EAAc;AAAA,cAC5B,IAAA,EAAM,MAAA;AAAA,cACN,WAAA,EAAa;AAAA,aACd;AAAA,WACH;AAAA,UACA,OAAA,EAAS;AAAA,YACP,MAAMC,WAAAA,CAAY,KAAA;AAAA,YAClB,KAAA,EAAO,QAAA;AAAA,YACP,IAAA,EAAM;AAAA,WACR;AAAA,UACA,aAAA,EAAe,YAAY,IAAA,GAAO,MAAA;AAAA,UAClC,SAAA,EAAW,SAAA,GAAYF,aAAAA,CAAc,KAAA,GAAQ;AAAA,SAC9C;AAAA,OACH;AACA,MAAA;AAAA,IACF;AAAA,IAEA,KAAK,gBAAA;AACH,MAAA,OAAA,CAAQ,gBAAA,CAAiB,IAAA;AAAA,QACvB,IAAI,SAAA,CAAU;AAAA,UACZ,aAAA,EAAe;AAAA,SAChB;AAAA,OACH;AACA,MAAA;AAAA,IAEF,KAAK,WAAA;AACH,MAAA,OAAA,CAAQ,gBAAA,CAAiB,KAAK,IAAI,SAAA,CAAU,EAAE,QAAA,EAAU,EAAC,EAAG,CAAC,CAAA;AAC7D,MAAA;AAAA,IAEF;AAEE,MAAA,IAAI,KAAK,OAAA,EAAS;AAChB,QAAA,KAAA,MAAW,KAAA,IAAS,KAAK,OAAA,EAAS;AAChC,UAAA,MAAM,WAAA,CAAY,KAAA,EAAO,OAAA,EAAS,SAAS,CAAA;AAAA,QAC7C;AAAA,MACF;AAAA;AAEN,CAAA;AChgBO,IAAM,oBAAoB,OAAO;AAAA,EACtC,OAAA,EAAS;AAAA,IACP,QAAA,EAAU;AAAA,MACR,GAAA,EAAK;AAAA,QACH,IAAA,EAAM,SAAA;AAAA,QACN,IAAA,EAAM;AAAA;AACR,KACF;AAAA,IACA,SAAA,EAAW;AAAA,MACT,GAAA,EAAK;AAAA,QACH,KAAA,EAAO,QAAA;AAAA,QACP,SAAA,EAAW,EAAE,IAAA,EAAMG,aAAAA,CAAc,MAAA;AAAO;AAC1C;AACF;AAEJ,CAAA,CAAA;AAKO,IAAM,qBAAqB,OAAO;AAAA,EACvC,MAAA,EAAQ;AAAA,IACN;AAAA,MACE,SAAA,EAAW,wBAAA;AAAA,MACX,MAAA,EAAQ;AAAA,QACN;AAAA,UACE,KAAA,EAAO,CAAA;AAAA,UACP,QAAQ,WAAA,CAAY,OAAA;AAAA,UACpB,IAAA,EAAM,KAAA;AAAA,UACN,WAAWH,aAAAA,CAAc,IAAA;AAAA,UACzB,KAAA,EAAO;AAAA,YACL,SAAA,EAAW;AAAA,cACT,MAAA,EAAQ;AAAA,gBACN,IAAA,EAAMI,oBAAoB,GAAG,CAAA;AAAA,gBAC7B,OAAA,EAASA,oBAAoB,IAAI;AAAA;AACnC;AACF;AACF,SACF;AAAA,QACA;AAAA,UACE,KAAA,EAAO,CAAA;AAAA,UACP,QAAQ,WAAA,CAAY,YAAA;AAAA,UACpB,IAAA,EAAM,KAAA;AAAA,UACN,WAAWJ,aAAAA,CAAc,IAAA;AAAA,UACzB,KAAA,EAAO;AAAA,YACL,SAAA,EAAW;AAAA,cACT,MAAA,EAAQ;AAAA,gBACN,IAAA,EAAMI,oBAAoB,CAAC,CAAA;AAAA,gBAC3B,OAAA,EAASA,oBAAoB,IAAI;AAAA;AACnC;AACF;AACF,SACF;AAAA,QACA;AAAA,UACE,KAAA,EAAO,CAAA;AAAA,UACP,QAAQ,WAAA,CAAY,WAAA;AAAA,UACpB,IAAA,EAAM,KAAA;AAAA,UACN,WAAWJ,aAAAA,CAAc,IAAA;AAAA,UACzB,KAAA,EAAO;AAAA,YACL,SAAA,EAAW;AAAA,cACT,MAAA,EAAQ;AAAA,gBACN,IAAA,EAAMI,oBAAoB,GAAG,CAAA;AAAA,gBAC7B,OAAA,EAASA,oBAAoB,IAAI;AAAA;AACnC;AACF;AACF,SACF;AAAA,QACA;AAAA,UACE,KAAA,EAAO,CAAA;AAAA,UACP,QAAQ,WAAA,CAAY,OAAA;AAAA,UACpB,IAAA,EAAM,KAAA;AAAA,UACN,WAAWJ,aAAAA,CAAc,IAAA;AAAA,UACzB,KAAA,EAAO;AAAA,YACL,SAAA,EAAW;AAAA,cACT,MAAA,EAAQ;AAAA,gBACN,IAAA,EAAMI,oBAAoB,CAAC,CAAA;AAAA,gBAC3B,OAAA,EAASA,oBAAoB,IAAI;AAAA;AACnC;AACF;AACF;AACF;AACF;AACF;AAEJ,CAAA,CAAA;;;AC/EO,IAAM,YAAA,GAAe,OAC1B,MAAA,EACA,QAAA,GAAmB,eAAA,KAChB;AACH,EAAA,IAAI,CAAC,MAAA,EAAQ;AAEb,EAAA,MAAM,IAAA,GAAO,OAAO,OAAA,EAAQ;AAG5B,EAAA,MAAM,UAAU,uBAAA,EAAwB;AAGxC,EAAA,KAAA,MAAW,IAAA,IAAS,IAAA,CAAK,OAAA,IAAW,EAAC,EAAiB;AACpD,IAAA,MAAM,WAAA,CAAY,MAAM,OAAO,CAAA;AAAA,EACjC;AAGA,EAAA,MAAM,GAAA,GAAM,IAAI,QAAA,CAAS;AAAA,IACvB,OAAA,EAAS,YAAA;AAAA,IACT,KAAA,EAAO,UAAA;AAAA,IACP,QAAQ,iBAAA,EAAkB;AAAA,IAC1B,WAAW,kBAAA,EAAmB;AAAA,IAC9B,QAAA,EAAU;AAAA,MACR;AAAA,QACE,UACE,OAAA,CAAQ,gBAAA,CAAiB,SAAS,CAAA,GAC9B,OAAA,CAAQ,mBACR,CAAC,IAAIC,UAAU,EAAE,QAAA,EAAU,CAAC,IAAIJ,OAAAA,CAAQ,EAAE,CAAC,CAAA,EAAG,CAAC;AAAA;AACvD;AACF,GACD,CAAA;AAGD,EAAA,MAAM,IAAA,GAAO,MAAM,MAAA,CAAO,MAAA,CAAO,GAAG,CAAA;AACpC,EAAA,MAAA,CAAO,MAAM,QAAQ,CAAA;AACvB;ACIA,IAAM,mBAAmB,MAAM;AAC7B,EAAA,MAAM,EAAE,MAAA,EAAO,GAAI,cAAA,EAAe;AAClC,EAAA,MAAM,CAAC,MAAA,EAAQ,SAAS,CAAA,GAAI,SAAS,KAAK,CAAA;AAE1C,EAAA,MAAM,WAAA,GAAc;AAAA,IAClB,EAAE,KAAA,EAAO,SAAA,EAAW,KAAA,EAAO,QAAA,EAAS;AAAA,IACpC,EAAE,KAAA,EAAO,QAAA,EAAU,KAAA,EAAO,GAAA,EAAI;AAAA,IAC9B,EAAE,KAAA,EAAO,MAAA,EAAQ,KAAA,EAAO,MAAA,EAAO;AAAA,IAC/B,EAAE,KAAA,EAAO,KAAA,EAAO,KAAA,EAAO,KAAA,EAAM;AAAA,IAC7B,EAAE,KAAA,EAAO,QAAA,EAAU,KAAA,EAAO,GAAA;AAAI,GAChC;AAEA,EAAA,uBACEJ,IAAAA,CAAC,YAAA,EAAA,EAAa,IAAA,EAAM,MAAA,EAAQ,cAAc,SAAA,EACxC,QAAA,EAAA;AAAA,oBAAAF,GAAAA,CAAC,mBAAA,EAAA,EAAoB,OAAA,EAAO,IAAA,EAC1B,QAAA,kBAAAA,GAAAA;AAAA,MAAC,QAAA;AAAA,MAAA;AAAA,QACC,aAAA,EAAY,qBAAA;AAAA,QACZ,SAAA,EAAU,kIAAA;AAAA,QAEV,QAAA,kBAAAA,GAAAA,CAAC,gBAAA,EAAA,EAAiB,SAAA,EAAU,QAAA,EAAS;AAAA;AAAA,KACvC,EACF,CAAA;AAAA,oBACAA,GAAAA,CAAC,mBAAA,EAAA,EAAoB,SAAA,EAAU,2BAAA,EAC5B,QAAA,EAAA,WAAA,CAAY,GAAA,CAAI,CAAC,EAAE,KAAA,EAAO,KAAA,EAAM,qBAC/BA,GAAAA;AAAA,MAAC,QAAA;AAAA,MAAA;AAAA,QAEC,SAAS,MAAM;AACb,UAAA,MAAA,EAAQ,OAAM,CAAE,KAAA,GAAQ,aAAA,CAAc,KAAK,EAAE,GAAA,EAAI;AACjD,UAAA,SAAA,CAAU,KAAK,CAAA;AAAA,QACjB,CAAA;AAAA,QACA,SAAA,EAAW,EAAA;AAAA,UACT,wEAAA;AAAA,UACA,MAAA,EAAQ,aAAA,CAAc,WAAW,CAAA,CAAE,eAAe,KAAA,IAChD;AAAA,SACJ;AAAA,QAEA,QAAA,kBAAAA,GAAAA,CAAC,MAAA,EAAA,EAAK,SAAA,EAAU,WAAW,QAAA,EAAA,KAAA,EAAM;AAAA,OAAA;AAAA,MAX5B;AAAA,KAaR,CAAA,EACH;AAAA,GAAA,EACF,CAAA;AAEJ,CAAA;AAEA,IAAM,iBAAiB,MAAM;AAC3B,EAAA,MAAM,EAAE,MAAA,EAAO,GAAI,cAAA,EAAe;AAElC,EAAA,MAAM,eAAA,GAAkB,MAAA,EAAQ,aAAA,CAAc,WAAW,EAAE,QAAA,GACvD,MAAA,EAAQ,aAAA,CAAc,WAAW,CAAA,CAAE,QAAA,CAAS,OAAA,CAAQ,IAAA,EAAM,EAAE,CAAA,GAC5D,IAAA;AAEJ,EAAA,MAAM,CAAC,QAAA,EAAU,WAAW,CAAA,GAAI,SAAS,eAAe,CAAA;AACxD,EAAA,MAAM,CAAC,UAAA,EAAY,aAAa,CAAA,GAAI,SAAS,QAAQ,CAAA;AACrD,EAAA,MAAM,CAAC,SAAA,EAAW,YAAY,CAAA,GAAI,SAAS,KAAK,CAAA;AAEhD,EAAA,MAAM,cAAA,GAAiB,CAAC,OAAA,KAAoB;AAC1C,IAAA,MAAM,IAAA,GAAO,SAAS,OAAO,CAAA;AAC7B,IAAA,IAAI,CAAC,KAAA,CAAM,IAAI,CAAA,IAAK,OAAO,CAAA,EAAG;AAC5B,MAAA,MAAA,EAAQ,KAAA,GAAQ,KAAA,EAAM,CAAE,YAAY,CAAA,EAAG,IAAI,CAAA,EAAA,CAAI,CAAA,CAAE,GAAA,EAAI;AACrD,MAAA,WAAA,CAAY,OAAO,CAAA;AACnB,MAAA,aAAA,CAAc,OAAO,CAAA;AACrB,MAAA,YAAA,CAAa,KAAK,CAAA;AAAA,IACpB;AAAA,EACF,CAAA;AAEA,EAAA,MAAM,iBAAA,GAAoB,CAAC,CAAA,KAA2C;AACpE,IAAA,aAAA,CAAc,CAAA,CAAE,OAAO,KAAK,CAAA;AAAA,EAC9B,CAAA;AAEA,EAAA,MAAM,kBAAkB,MAAM;AAC5B,IAAA,cAAA,CAAe,UAAU,CAAA;AAAA,EAC3B,CAAA;AAEA,EAAA,MAAM,aAAA,GAAgB,CAAC,CAAA,KAA6C;AAClE,IAAA,IAAI,CAAA,CAAE,QAAQ,OAAA,EAAS;AACrB,MAAA,CAAA,CAAE,cAAA,EAAe;AACjB,MAAA,cAAA,CAAe,UAAU,CAAA;AACzB,MAAA,MAAA,EAAQ,SAAS,KAAA,EAAM;AAAA,IACzB;AAAA,EACF,CAAA;AAEA,EAAA,MAAM,YAAY,MAAM;AACtB,IAAA,MAAM,OAAA,GAAU,QAAA,CAAS,QAAQ,CAAA,GAAI,CAAA;AACrC,IAAA,cAAA,CAAe,OAAA,CAAQ,UAAU,CAAA;AAAA,EACnC,CAAA;AAEA,EAAA,MAAM,YAAY,MAAM;AACtB,IAAA,MAAM,OAAA,GAAU,QAAA,CAAS,QAAQ,CAAA,GAAI,CAAA;AACrC,IAAA,IAAI,UAAU,CAAA,EAAG;AACf,MAAA,cAAA,CAAe,OAAA,CAAQ,UAAU,CAAA;AAAA,IACnC;AAAA,EACF,CAAA;AAEA,EAAA,uBACEE,IAAAA;AAAA,IAAC,KAAA;AAAA,IAAA;AAAA,MACC,aAAA,EAAY,mBAAA;AAAA,MACZ,SAAA,EAAU,6BAAA;AAAA,MAEV,QAAA,EAAA;AAAA,wBAAAF,GAAAA;AAAA,UAAC,QAAA;AAAA,UAAA;AAAA,YACC,aAAA,EAAY,4BAAA;AAAA,YACZ,OAAA,EAAS,SAAA;AAAA,YACT,SAAA,EAAU,sFAAA;AAAA,YAEV,QAAA,kBAAAA,GAAAA,CAAC,SAAA,EAAA,EAAU,SAAA,EAAU,QAAA,EAAS;AAAA;AAAA,SAChC;AAAA,QACC,4BACCA,GAAAA;AAAA,UAAC,KAAA;AAAA,UAAA;AAAA,YACC,aAAA,EAAY,yBAAA;AAAA,YACZ,IAAA,EAAK,MAAA;AAAA,YACL,KAAA,EAAO,UAAA;AAAA,YACP,QAAA,EAAU,iBAAA;AAAA,YACV,MAAA,EAAQ,eAAA;AAAA,YACR,SAAA,EAAW,aAAA;AAAA,YACX,SAAA,EAAU;AAAA;AAAA,4BAGZA,GAAAA;AAAA,UAAC,QAAA;AAAA,UAAA;AAAA,YACC,aAAA,EAAY,yBAAA;AAAA,YACZ,SAAS,MAAM;AACb,cAAA,YAAA,CAAa,IAAI,CAAA;AACjB,cAAA,WAAA,CAAY,eAAe,CAAA;AAAA,YAC7B,CAAA;AAAA,YACA,SAAA,EAAU,2FAAA;AAAA,YAET,QAAA,EAAA;AAAA;AAAA,SACH;AAAA,wBAEFA,GAAAA;AAAA,UAAC,QAAA;AAAA,UAAA;AAAA,YACC,aAAA,EAAY,4BAAA;AAAA,YACZ,OAAA,EAAS,SAAA;AAAA,YACT,SAAA,EAAU,sFAAA;AAAA,YAEV,QAAA,kBAAAA,GAAAA,CAAC,QAAA,EAAA,EAAS,SAAA,EAAU,QAAA,EAAS;AAAA;AAAA;AAC/B;AAAA;AAAA,GACF;AAEJ,CAAA;AAEA,IAAM,aAAa,MAAM;AACvB,EAAA,MAAM,EAAE,MAAA,EAAO,GAAI,cAAA,EAAe;AAElC,EAAA,MAAM,KAAA,GAAQ;AAAA,IACZ;AAAA,MACE,KAAA,EAAO,aAAA;AAAA,MACP,IAAA,EAAM,QAAA;AAAA,MACN,QAAA,EAAU,MAAA,EAAQ,QAAA,CAAS,YAAY,CAAA;AAAA,MACvC,OAAA,EAAS,MAAM,MAAA,EAAQ,KAAA,GAAQ,KAAA,EAAM,CAAE,gBAAA,EAAiB,CAAE,GAAA,EAAI;AAAA,MAC9D,MAAA,EAAQ;AAAA,KACV;AAAA,IACA;AAAA,MACE,KAAA,EAAO,cAAA;AAAA,MACP,IAAA,EAAM,eAAA;AAAA,MACN,QAAA,EAAU,MAAA,EAAQ,QAAA,CAAS,aAAa,CAAA;AAAA,MACxC,OAAA,EAAS,MAAM,MAAA,EAAQ,KAAA,GAAQ,KAAA,EAAM,CAAE,iBAAA,EAAkB,CAAE,GAAA,EAAI;AAAA,MAC/D,MAAA,EAAQ;AAAA;AACV,GACF;AAEA,EAAA,uBACEA,GAAAA,CAAC,KAAA,EAAA,EAAI,SAAA,EAAU,+BACZ,QAAA,EAAA,KAAA,CAAM,GAAA,CAAI,CAAC,EAAE,OAAO,IAAA,EAAM,OAAA,EAAS,QAAA,EAAU,MAAA,uBAC5CA,GAAAA;AAAA,IAAC,aAAA;AAAA,IAAA;AAAA,MAEC,IAAA;AAAA,MACA,OAAA;AAAA,MACA,QAAA;AAAA,MACA;AAAA,KAAA;AAAA,IAJK;AAAA,GAMR,CAAA,EACH,CAAA;AAEJ,CAAA;AAEA,IAAM,cAAc,MAAM;AACxB,EAAA,MAAM,EAAE,MAAA,EAAO,GAAI,cAAA,EAAe;AAClC,EAAA,MAAM,CAAC,MAAA,EAAQ,SAAS,CAAA,GAAI,SAAS,KAAK,CAAA;AAE1C,EAAA,MAAM,UAAA,GAAa;AAAA,IACjB;AAAA,MACE,KAAA,EAAO,YAAA;AAAA,MACP,KAAA,EAAO,MAAA;AAAA,MACP,IAAA,EAAM,aAAA;AAAA,MACN,MAAA,EAAQ;AAAA,KACV;AAAA,IACA;AAAA,MACE,KAAA,EAAO,cAAA;AAAA,MACP,KAAA,EAAO,QAAA;AAAA,MACP,IAAA,EAAM,eAAA;AAAA,MACN,MAAA,EAAQ;AAAA,KACV;AAAA,IACA;AAAA,MACE,KAAA,EAAO,aAAA;AAAA,MACP,KAAA,EAAO,OAAA;AAAA,MACP,IAAA,EAAM,cAAA;AAAA,MACN,MAAA,EAAQ;AAAA,KACV;AAAA,IACA;AAAA,MACE,KAAA,EAAO,iBAAA;AAAA,MACP,KAAA,EAAO,SAAA;AAAA,MACP,IAAA,EAAM,gBAAA;AAAA,MACN,MAAA,EAAQ;AAAA;AACV,GACF;AAEA,EAAA,MAAM,sBAAsB,MAAM;AAChC,IAAA,IAAI,CAAC,QAAQ,OAAO,IAAA;AACpB,IAAA,MAAM,SAAA,GAAY,MAAA,CAAO,aAAA,CAAc,WAAW,CAAA;AAClD,IAAA,IAAI,SAAA,CAAU,SAAA,EAAW,OAAO,SAAA,CAAU,SAAA;AAC1C,IAAA,MAAM,YAAA,GAAe,MAAA,CAAO,aAAA,CAAc,SAAS,CAAA;AACnD,IAAA,IAAI,YAAA,CAAa,SAAA,EAAW,OAAO,YAAA,CAAa,SAAA;AAChD,IAAA,OAAO,IAAA;AAAA,EACT,CAAA;AAEA,EAAA,MAAM,mBAAmB,mBAAA,EAAoB;AAC7C,EAAA,MAAM,gBAAA,GACJ,WAAW,IAAA,CAAK,CAAC,MAAM,CAAA,CAAE,KAAA,KAAU,gBAAgB,CAAA,EAAG,IAAA,IAAQ,aAAA;AAEhE,EAAA,uBACEE,IAAAA,CAAC,YAAA,EAAA,EAAa,IAAA,EAAM,MAAA,EAAQ,cAAc,SAAA,EACxC,QAAA,EAAA;AAAA,oBAAAF,GAAAA,CAAC,mBAAA,EAAA,EAAoB,OAAA,EAAO,IAAA,EAC1B,QAAA,kBAAAA,GAAAA;AAAA,MAAC,QAAA;AAAA,MAAA;AAAA,QACC,aAAA,EAAY,eAAA;AAAA,QACZ,SAAA,EAAU,yHAAA;AAAA,QAEV,QAAA,kBAAAA,GAAAA,CAAC,gBAAA,EAAA,EAAiB,SAAA,EAAU,QAAA,EAAS;AAAA;AAAA,KACvC,EACF,CAAA;AAAA,oBACAA,GAAAA,CAAC,mBAAA,EAAA,EAAoB,SAAA,EAAU,6BAC5B,QAAA,EAAA,UAAA,CAAW,GAAA,CAAI,CAAC,EAAE,OAAO,KAAA,EAAO,IAAA,EAAM,IAAA,EAAM,MAAA,uBAC3CA,GAAAA;AAAA,MAAC,QAAA;AAAA,MAAA;AAAA,QAEC,aAAA,EAAa,MAAA;AAAA,QACb,SAAS,MAAM;AACb,UAAA,MAAA,EAAQ,OAAM,CAAE,KAAA,GAAQ,YAAA,CAAa,KAAK,EAAE,GAAA,EAAI;AAChD,UAAA,SAAA,CAAU,KAAK,CAAA;AAAA,QACjB,CAAA;AAAA,QACA,SAAA,EAAW,EAAA;AAAA,UACT,yEAAA;AAAA,UACA,qBAAqB,KAAA,IAAS;AAAA,SAChC;AAAA,QACA,KAAA,EAAO,KAAA;AAAA,QAEP,QAAA,kBAAAA,GAAAA,CAAC,IAAA,EAAA,EAAK,SAAA,EAAU,QAAA,EAAS;AAAA,OAAA;AAAA,MAZpB;AAAA,KAcR,CAAA,EACH;AAAA,GAAA,EACF,CAAA;AAEJ,CAAA;AAEA,IAAM,sBAAsB,MAAM;AAChC,EAAA,MAAM,EAAE,MAAA,EAAO,GAAI,cAAA,EAAe;AAElC,EAAA,MAAM,sBAAsB,MAAM;AAChC,IAAA,IAAI,CAAC,QAAQ,OAAO,IAAA;AACpB,IAAA,MAAM,KAAA,GAAQ,MAAA,CAAO,aAAA,CAAc,WAAW,CAAA;AAC9C,IAAA,OAAO,MAAM,GAAA,IAAO,IAAA;AAAA,EACtB,CAAA;AAEA,EAAA,uBACEE,IAAAA,CAAC,KAAA,EAAA,EAAI,SAAA,EAAU,6BAAA,EACb,QAAA,EAAA;AAAA,oBAAAF,GAAAA;AAAA,MAAC,QAAA;AAAA,MAAA;AAAA,QACC,aAAA,EAAY,aAAA;AAAA,QACZ,OAAA,EAAS,MAAM,MAAA,EAAQ,KAAA,EAAM,CAAE,OAAM,CAAE,gBAAA,CAAiB,KAAK,CAAA,CAAE,GAAA,EAAI;AAAA,QACnE,SAAA,EAAW,EAAA;AAAA,UACT,iGAAA;AAAA,UACA,mBAAA,OAA0B,KAAA,IAAS;AAAA,SACrC;AAAA,QACA,KAAA,EAAM,eAAA;AAAA,QAEN,QAAA,kBAAAA,GAAAA,CAAC,oBAAA,EAAA,EAAqB,SAAA,EAAU,QAAA,EAAS;AAAA;AAAA,KAC3C;AAAA,oBACAA,GAAAA;AAAA,MAAC,QAAA;AAAA,MAAA;AAAA,QACC,aAAA,EAAY,aAAA;AAAA,QACZ,OAAA,EAAS,MAAM,MAAA,EAAQ,KAAA,EAAM,CAAE,OAAM,CAAE,gBAAA,CAAiB,KAAK,CAAA,CAAE,GAAA,EAAI;AAAA,QACnE,SAAA,EAAW,EAAA;AAAA,UACT,iGAAA;AAAA,UACA,mBAAA,OAA0B,KAAA,IAAS;AAAA,SACrC;AAAA,QACA,KAAA,EAAM,eAAA;AAAA,QAEN,QAAA,kBAAAA,GAAAA,CAAC,oBAAA,EAAA,EAAqB,SAAA,EAAU,QAAA,EAAS;AAAA;AAAA;AAC3C,GAAA,EACF,CAAA;AAEJ,CAAA;AAEA,IAAM,cAAc,MAAM;AACxB,EAAA,MAAM,EAAE,MAAA,EAAO,GAAI,cAAA,EAAe;AAClC,EAAA,MAAM,CAAC,YAAA,EAAc,eAAe,CAAA,GAAI,SAAS,KAAK,CAAA;AACtD,EAAA,MAAM,CAAC,QAAA,EAAU,WAAW,CAAA,GAAI,SAAS,EAAE,CAAA;AAE3C,EAAA,MAAM,QAAA,GAAW,CAAC,GAAA,KAAgB;AAChC,IAAA,MAAA,EAAQ,KAAA,GAAQ,KAAA,EAAM,CAAE,SAAS,EAAE,GAAA,EAAK,CAAA,CAAE,GAAA,EAAI;AAAA,EAChD,CAAA;AAEA,EAAA,MAAM,WAAW,MAAM;AACrB,IAAA,MAAM,KAAA,GAAQ,QAAA,CAAS,aAAA,CAAc,OAAO,CAAA;AAC5C,IAAA,KAAA,CAAM,IAAA,GAAO,MAAA;AACb,IAAA,KAAA,CAAM,MAAA,GAAS,SAAA;AAEf,IAAA,KAAA,CAAM,QAAA,GAAW,CAAC,CAAA,KAAM;AACtB,MAAA,MAAM,IAAA,GAAQ,CAAA,CAAE,MAAA,CAA4B,KAAA,GAAQ,CAAC,CAAA;AACrD,MAAA,IAAI,IAAA,EAAM;AACR,QAAA,MAAMW,SAAAA,GAAW,GAAA,CAAI,eAAA,CAAgB,IAAI,CAAA;AACzC,QAAA,QAAA,CAASA,SAAQ,CAAA;AAAA,MACnB;AAAA,IACF,CAAA;AAEA,IAAA,KAAA,CAAM,KAAA,EAAM;AAAA,EACd,CAAA;AAEA,EAAA,MAAM,uBAAuB,MAAM;AACjC,IAAA,IAAI,QAAA,EAAU;AACZ,MAAA,QAAA,CAAS,QAAQ,CAAA;AACjB,MAAA,WAAA,CAAY,EAAE,CAAA;AACd,MAAA,eAAA,CAAgB,KAAK,CAAA;AAAA,IACvB;AAAA,EACF,CAAA;AAEA,EAAA,uBACET,KAAA,QAAA,EAAA,EACE,QAAA,EAAA;AAAA,oBAAAA,KAAC,YAAA,EAAA,EACC,QAAA,EAAA;AAAA,sBAAAF,GAAAA,CAAC,mBAAA,EAAA,EAAoB,OAAA,EAAO,IAAA,EAC1B,QAAA,kBAAAA,GAAAA;AAAA,QAAC,QAAA;AAAA,QAAA;AAAA,UACC,aAAA,EAAY,sBAAA;AAAA,UACZ,SAAA,EAAU,kIAAA;AAAA,UAEV,QAAA,kBAAAA,GAAAA,CAAC,SAAA,EAAA,EAAU,SAAA,EAAU,QAAA,EAAS;AAAA;AAAA,OAChC,EACF,CAAA;AAAA,sBACAE,KAAC,mBAAA,EAAA,EACC,QAAA,EAAA;AAAA,wBAAAA,IAAAA,CAAC,gBAAA,EAAA,EAAiB,aAAA,EAAY,sBAAA,EAAuB,SAAS,QAAA,EAC5D,QAAA,EAAA;AAAA,0BAAAF,GAAAA,CAAC,UAAA,EAAA,EAAW,SAAA,EAAU,aAAA,EAAc,CAAA;AAAA,UAAE;AAAA,SAAA,EAExC,CAAA;AAAA,wBACAE,IAAAA;AAAA,UAAC,gBAAA;AAAA,UAAA;AAAA,YACC,aAAA,EAAY,mBAAA;AAAA,YACZ,OAAA,EAAS,MAAM,eAAA,CAAgB,IAAI,CAAA;AAAA,YAEnC,QAAA,EAAA;AAAA,8BAAAF,GAAAA,CAAC,UAAA,EAAA,EAAW,SAAA,EAAU,aAAA,EAAc,CAAA;AAAA,cAAE;AAAA;AAAA;AAAA;AAExC,OAAA,EACF;AAAA,KAAA,EACF,CAAA;AAAA,oBAEAA,GAAAA,CAAC,MAAA,EAAA,EAAO,IAAA,EAAM,YAAA,EAAc,YAAA,EAAc,eAAA,EACxC,QAAA,kBAAAE,IAAAA,CAAC,aAAA,EAAA,EAAc,aAAA,EAAY,kBAAA,EACzB,QAAA,EAAA;AAAA,sBAAAF,IAAC,YAAA,EAAA,EACC,QAAA,kBAAAA,GAAAA,CAAC,WAAA,EAAA,EAAY,8BAAgB,CAAA,EAC/B,CAAA;AAAA,sBACAA,GAAAA;AAAA,QAAC,OAAA;AAAA,QAAA;AAAA,UACC,aAAA,EAAY,iBAAA;AAAA,UACZ,WAAA,EAAY,kBAAA;AAAA,UACZ,KAAA,EAAO,QAAA;AAAA,UACP,UAAU,CAAC,CAAA,KAAM,WAAA,CAAY,CAAA,CAAE,OAAO,KAAK,CAAA;AAAA,UAC3C,SAAA,EAAW,CAAC,CAAA,KAAM;AAChB,YAAA,IAAI,CAAA,CAAE,QAAQ,OAAA,EAAS;AACrB,cAAA,oBAAA,EAAqB;AAAA,YACvB;AAAA,UACF,CAAA;AAAA,UACA,SAAA,EAAU;AAAA;AAAA,OACZ;AAAA,sBACAE,KAAC,YAAA,EAAA,EACC,QAAA,EAAA;AAAA,wBAAAF,IAAC,MAAA,EAAA,EAAO,aAAA,EAAY,kBAAA,EAAmB,OAAA,EAAS,sBAAsB,QAAA,EAAA,QAAA,EAEtE,CAAA;AAAA,wBACAA,GAAAA;AAAA,UAAC,MAAA;AAAA,UAAA;AAAA,YACC,aAAA,EAAY,kBAAA;AAAA,YACZ,OAAA,EAAS,MAAM,eAAA,CAAgB,KAAK,CAAA;AAAA,YACrC,QAAA,EAAA;AAAA;AAAA;AAED,OAAA,EACF;AAAA,KAAA,EACF,CAAA,EACF;AAAA,GAAA,EACF,CAAA;AAEJ,CAAA;AAEA,IAAM,aAAa,MAAM;AACvB,EAAA,MAAM,EAAE,MAAA,EAAO,GAAI,cAAA,EAAe;AAClC,EAAA,MAAM,CAAC,KAAA,EAAO,QAAQ,CAAA,GAAI,SAAS,EAAE,CAAA;AAErC,EAAA,MAAM,QAAA,GAAW,CAAC,IAAA,KAAiB;AACjC,IAAA,MAAA,EAAQ,KAAA,EAAM,CAAE,KAAA,EAAM,CAAE,eAAA,CAAgB,MAAM,CAAA,CAAE,OAAA,CAAQ,EAAE,IAAA,EAAM,CAAA,CAAE,GAAA,EAAI;AACtE,IAAA,QAAA,CAAS,EAAE,CAAA;AAAA,EACb,CAAA;AAEA,EAAA,uBACEE,IAAAA;AAAA,IAAC,YAAA;AAAA,IAAA;AAAA,MACC,YAAA,EAAc,CAAC,IAAA,KAAS;AACtB,QAAA,IAAI,IAAA,EAAM;AACR,UAAA,QAAA,CAAS,MAAA,EAAQ,aAAA,CAAc,MAAM,CAAA,CAAE,QAAQ,EAAE,CAAA;AAAA,QACnD;AAAA,MACF,CAAA;AAAA,MAEA,QAAA,EAAA;AAAA,wBAAAF,GAAAA,CAAC,mBAAA,EAAA,EAAoB,OAAA,EAAO,IAAA,EAC1B,QAAA,kBAAAA,GAAAA;AAAA,UAAC,QAAA;AAAA,UAAA;AAAA,YACC,aAAA,EAAY,cAAA;AAAA,YACZ,SAAA,EAAU,kIAAA;AAAA,YAEV,QAAA,kBAAAA,GAAAA,CAAC,SAAA,EAAA,EAAU,SAAA,EAAU,QAAA,EAAS;AAAA;AAAA,SAChC,EACF,CAAA;AAAA,wBACAE,IAAAA,CAAC,mBAAA,EAAA,EAAoB,SAAA,EAAU,iCAAA,EAC7B,QAAA,EAAA;AAAA,0BAAAF,GAAAA;AAAA,YAAC,KAAA;AAAA,YAAA;AAAA,cACC,aAAA,EAAY,oBAAA;AAAA,cACZ,WAAA,EAAY,qBAAA;AAAA,cACZ,KAAA;AAAA,cACA,UAAU,CAAC,CAAA,KAAM,QAAA,CAAS,CAAA,CAAE,OAAO,KAAK;AAAA;AAAA,WAC1C;AAAA,0BACAA,GAAAA,CAAC,MAAA,EAAA,EAAO,aAAA,EAAY,oBAAA,EAAqB,SAAS,MAAM,QAAA,CAAS,KAAK,CAAA,EAAG,QAAA,EAAA,OAAA,EAEzE;AAAA,SAAA,EACF;AAAA;AAAA;AAAA,GACF;AAEJ,CAAA;AAEA,IAAM,uBAAuB,MAAM;AACjC,EAAA,MAAM,EAAE,MAAA,EAAO,GAAI,cAAA,EAAe;AAElC,EAAA,MAAM,KAAA,GAAQ,MAAA,EAAQ,aAAA,CAAc,WAAW,EAAE,KAAA,IAAS,SAAA;AAE1D,EAAA,MAAM,QAAA,GAAW,CAAC,KAAA,KAAuB;AACvC,IAAA,MAAA,EAAQ,KAAA,EAAM,CAAE,KAAA,EAAM,CAAE,YAAA,CAAa,EAAE,KAAA,EAAO,KAAA,CAAM,GAAA,EAAK,CAAA,CAAE,GAAA,EAAI;AAAA,EACjE,CAAA;AAEA,EAAA,uBACEE,KAAC,YAAA,EAAA,EACC,QAAA,EAAA;AAAA,oBAAAF,GAAAA,CAAC,mBAAA,EAAA,EAAoB,OAAA,EAAO,IAAA,EAC1B,QAAA,kBAAAA,GAAAA;AAAA,MAAC,QAAA;AAAA,MAAA;AAAA,QACC,aAAA,EAAY,yBAAA;AAAA,QACZ,SAAA,EAAU,kIAAA;AAAA,QAEV,QAAA,kBAAAA,GAAAA,CAAC,eAAA,EAAA,EAAgB,SAAA,EAAU,QAAA,EAAS;AAAA;AAAA,KACtC,EACF,CAAA;AAAA,oBACAA,GAAAA;AAAA,MAAC,mBAAA;AAAA,MAAA;AAAA,QACC,aAAA,EAAY,gCAAA;AAAA,QACZ,SAAA,EAAU,KAAA;AAAA,QAEV,QAAA,kBAAAA,GAAAA,CAAC,YAAA,EAAA,EAAa,KAAA,EAAO,OAAO,QAAA,EAAoB;AAAA;AAAA;AAClD,GAAA,EACF,CAAA;AAEJ,CAAA;AAEA,IAAM,kBAAkB,MAAM;AAC5B,EAAA,MAAM,EAAE,MAAA,EAAO,GAAI,cAAA,EAAe;AAElC,EAAA,MAAM,KAAA,GAAQ,MAAA,EAAQ,aAAA,CAAc,WAAW,EAAE,KAAA,IAAS,SAAA;AAE1D,EAAA,MAAM,QAAA,GAAW,CAAC,KAAA,KAAuB;AACvC,IAAA,MAAA,EAAQ,KAAA,GAAQ,KAAA,EAAM,CAAE,SAAS,KAAA,CAAM,GAAG,EAAE,GAAA,EAAI;AAAA,EAClD,CAAA;AAEA,EAAA,uBACEE,KAAC,YAAA,EAAA,EACC,QAAA,EAAA;AAAA,oBAAAF,GAAAA,CAAC,mBAAA,EAAA,EAAoB,OAAA,EAAO,IAAA,EAC1B,QAAA,kBAAAE,IAAAA;AAAA,MAAC,QAAA;AAAA,MAAA;AAAA,QACC,aAAA,EAAY,oBAAA;AAAA,QACZ,SAAA,EAAU,kIAAA;AAAA,QAEV,QAAA,EAAA;AAAA,0BAAAF,GAAAA,CAAC,MAAA,EAAA,EAAK,SAAA,EAAU,SAAA,EAAU,QAAA,EAAA,GAAA,EAAC,CAAA;AAAA,0BAC3BA,IAAC,KAAA,EAAA,EAAI,SAAA,EAAU,gBAAe,KAAA,EAAO,EAAE,eAAA,EAAiB,KAAA,EAAM,EAAG;AAAA;AAAA;AAAA,KACnE,EACF,CAAA;AAAA,oBACAA,GAAAA;AAAA,MAAC,mBAAA;AAAA,MAAA;AAAA,QACC,aAAA,EAAY,2BAAA;AAAA,QACZ,SAAA,EAAU,KAAA;AAAA,QAEV,QAAA,kBAAAA,GAAAA,CAAC,YAAA,EAAA,EAAa,KAAA,EAAO,OAAO,QAAA,EAAoB;AAAA;AAAA;AAClD,GAAA,EACF,CAAA;AAEJ,CAAA;AAEA,IAAM,qBAAqB,MAAM;AAC/B,EAAA,MAAM,EAAE,MAAA,EAAO,GAAI,cAAA,EAAe;AAClC,EAAA,MAAM,CAAC,MAAA,EAAQ,SAAS,CAAA,GAAI,SAAS,KAAK,CAAA;AAE1C,EAAA,MAAM,QAAA,GAAW;AAAA,IACf,EAAE,KAAA,EAAO,aAAA,EAAe,KAAA,EAAO,CAAA,EAAG,UAAU,MAAA,EAAO;AAAA,IACnD,EAAE,KAAA,EAAO,WAAA,EAAa,KAAA,EAAO,CAAA,EAAG,UAAU,MAAA,EAAO;AAAA,IACjD,EAAE,KAAA,EAAO,WAAA,EAAa,KAAA,EAAO,CAAA,EAAG,UAAU,MAAA,EAAO;AAAA,IACjD,EAAE,KAAA,EAAO,WAAA,EAAa,KAAA,EAAO,CAAA,EAAG,UAAU,MAAA,EAAO;AAAA,IACjD,EAAE,KAAA,EAAO,WAAA,EAAa,KAAA,EAAO,CAAA,EAAG,UAAU,MAAA,EAAO;AAAA,IACjD,EAAE,KAAA,EAAO,WAAA,EAAa,KAAA,EAAO,CAAA,EAAG,UAAU,MAAA,EAAO;AAAA,IACjD,EAAE,KAAA,EAAO,WAAA,EAAa,KAAA,EAAO,CAAA,EAAG,UAAU,MAAA;AAAO,GACnD;AAEA,EAAA,MAAM,oBAAoB,MAAM;AAC9B,IAAA,KAAA,IAAS,KAAA,GAAQ,CAAA,EAAG,KAAA,IAAS,CAAA,EAAG,KAAA,EAAA,EAAS;AACvC,MAAA,IAAI,QAAQ,QAAA,CAAS,SAAA,EAAW,EAAE,KAAA,EAAO,CAAA,EAAG;AAC1C,QAAA,OAAO,WAAW,KAAK,CAAA,CAAA;AAAA,MACzB;AAAA,IACF;AACA,IAAA,OAAO,aAAA;AAAA,EACT,CAAA;AAEA,EAAA,uBACEE,IAAAA,CAAC,YAAA,EAAA,EAAa,IAAA,EAAM,MAAA,EAAQ,cAAc,SAAA,EACxC,QAAA,EAAA;AAAA,oBAAAF,GAAAA,CAAC,mBAAA,EAAA,EAAoB,OAAA,EAAO,IAAA,EAC1B,QAAA,kBAAAE,IAAAA;AAAA,MAAC,QAAA;AAAA,MAAA;AAAA,QACC,aAAA,EAAY,iBAAA;AAAA,QACZ,SAAA,EAAU,yHAAA;AAAA,QAEV,QAAA,EAAA;AAAA,0BAAAF,GAAAA,CAAC,MAAA,EAAA,EAAK,SAAA,EAAU,UAAA,EAAY,6BAAkB,EAAE,CAAA;AAAA,0BAChDA,GAAAA,CAAC,eAAA,EAAA,EAAgB,SAAA,EAAU,sBAAA,EAAuB;AAAA;AAAA;AAAA,KACpD,EACF,CAAA;AAAA,oBACAA,GAAAA,CAAC,mBAAA,EAAA,EAAoB,SAAA,EAAU,2BAAA,EAC5B,QAAA,EAAA,QAAA,CAAS,GAAA,CAAI,CAAC,EAAE,KAAA,EAAO,KAAA,EAAO,QAAA,uBAC7BA,GAAAA;AAAA,MAAC,QAAA;AAAA,MAAA;AAAA,QAEC,aAAA,EAAa,mBAAmB,KAAK,CAAA,CAAA;AAAA,QACrC,KAAA,EAAO,EAAE,QAAA,EAAS;AAAA,QAClB,SAAS,MAAM;AACb,UAAA,IAAI,UAAU,CAAA,EAAG;AACf,YAAA,MAAA,EAAQ,OAAM,CAAE,KAAA,EAAM,CAAE,YAAA,GAAe,GAAA,EAAI;AAAA,UAC7C,CAAA,MAAO;AACL,YAAA,MAAA,EACI,KAAA,EAAM,CACP,KAAA,EAAM,CACN,aAAA,CAAc,EAAE,KAAA,EAAO,KAAA,EAAgB,CAAA,CACvC,GAAA,EAAI;AAAA,UACT;AACA,UAAA,SAAA,CAAU,KAAK,CAAA;AAAA,QACjB,CAAA;AAAA,QACA,SAAA,EAAW,EAAA;AAAA,UACT,wEAAA;AAAA,UACC,KAAA,KAAU,CAAA,IAAK,CAAC,MAAA,EAAQ,SAAS,SAAS,CAAA,IACxC,MAAA,EAAQ,QAAA,CAAS,SAAA,EAAW,EAAE,KAAA,EAAO,KAAA,EAAO,CAAA,IAC3C;AAAA,SACN;AAAA,QAEC,QAAA,EAAA;AAAA,OAAA;AAAA,MAtBI;AAAA,KAwBR,CAAA,EACH;AAAA,GAAA,EACF,CAAA;AAEJ,CAAA;AAEA,IAAM,mBAAmB,MAAM;AAC7B,EAAA,MAAM,EAAE,MAAA,EAAO,GAAI,cAAA,EAAe;AAClC,EAAA,MAAM,CAAC,MAAA,EAAQ,SAAS,CAAA,GAAI,SAAS,KAAK,CAAA;AAE1C,EAAA,MAAM,KAAA,GAAQ;AAAA,IACZ,EAAE,KAAA,EAAO,OAAA,EAAS,KAAA,EAAO,OAAA,EAAQ;AAAA,IACjC,EAAE,KAAA,EAAO,iBAAA,EAAmB,KAAA,EAAO,iBAAA,EAAkB;AAAA,IACrD,EAAE,KAAA,EAAO,aAAA,EAAe,KAAA,EAAO,aAAA,EAAc;AAAA,IAC7C,EAAE,KAAA,EAAO,SAAA,EAAW,KAAA,EAAO,SAAA,EAAU;AAAA,IACrC,EAAE,KAAA,EAAO,SAAA,EAAW,KAAA,EAAO,SAAA,EAAU;AAAA,IACrC,EAAE,KAAA,EAAO,QAAA,EAAU,KAAA,EAAO,QAAA,EAAS;AAAA,IACnC,EAAE,KAAA,EAAO,cAAA,EAAgB,KAAA,EAAO,cAAA,EAAe;AAAA,IAC/C,EAAE,KAAA,EAAO,QAAA,EAAU,KAAA,EAAO,QAAA,EAAS;AAAA,IACnC,EAAE,KAAA,EAAO,eAAA,EAAiB,KAAA,EAAO,eAAA,EAAgB;AAAA,IACjD,EAAE,KAAA,EAAO,gBAAA,EAAkB,KAAA,EAAO,gBAAA,EAAiB;AAAA,IACnD,EAAE,KAAA,EAAO,qBAAA,EAAuB,KAAA,EAAO,qBAAA,EAAsB;AAAA,IAC7D,EAAE,KAAA,EAAO,aAAA,EAAe,KAAA,EAAO,aAAA,EAAc;AAAA,IAC7C,EAAE,KAAA,EAAO,WAAA,EAAa,KAAA,EAAO,WAAA,EAAY;AAAA,IACzC,EAAE,KAAA,EAAO,mBAAA,EAAqB,KAAA,EAAO,mBAAA,EAAoB;AAAA,IACzD,EAAE,KAAA,EAAO,cAAA,EAAgB,KAAA,EAAO,cAAA,EAAe;AAAA,IAC/C,EAAE,KAAA,EAAO,SAAA,EAAW,KAAA,EAAO,SAAA,EAAU;AAAA,IACrC,EAAE,KAAA,EAAO,eAAA,EAAiB,KAAA,EAAO,eAAA,EAAgB;AAAA,IACjD,EAAE,KAAA,EAAO,UAAA,EAAY,KAAA,EAAO,UAAA;AAAW,GACzC;AAEA,EAAA,uBACEE,IAAAA,CAAC,YAAA,EAAA,EAAa,IAAA,EAAM,MAAA,EAAQ,cAAc,SAAA,EACxC,QAAA,EAAA;AAAA,oBAAAF,GAAAA,CAAC,mBAAA,EAAA,EAAoB,OAAA,EAAO,IAAA,EAC1B,QAAA,kBAAAE,IAAAA;AAAA,MAAC,QAAA;AAAA,MAAA;AAAA,QACC,aAAA,EAAY,qBAAA;AAAA,QACZ,SAAA,EAAU,4HAAA;AAAA,QAEV,QAAA,EAAA;AAAA,0BAAAF,GAAAA,CAAC,UAAK,SAAA,EAAU,UAAA,EACb,kBAAQ,aAAA,CAAc,WAAW,CAAA,CAAE,UAAA,IAAc,OAAA,EACpD,CAAA;AAAA,0BACAA,GAAAA,CAAC,eAAA,EAAA,EAAgB,SAAA,EAAU,sBAAA,EAAuB;AAAA;AAAA;AAAA,KACpD,EACF,CAAA;AAAA,oBACAA,GAAAA;AAAA,MAAC,mBAAA;AAAA,MAAA;AAAA,QACC,aAAA,EAAY,8BAAA;AAAA,QACZ,SAAA,EAAU,2BAAA;AAAA,QAET,gBAAM,GAAA,CAAI,CAAC,EAAE,KAAA,EAAO,KAAA,uBACnBA,GAAAA;AAAA,UAAC,QAAA;AAAA,UAAA;AAAA,YACC,SAAS,MAAM;AACb,cAAA,MAAA,EAAQ,OAAM,CAAE,KAAA,GAAQ,aAAA,CAAc,KAAK,EAAE,GAAA,EAAI;AACjD,cAAA,SAAA,CAAU,KAAK,CAAA;AAAA,YACjB,CAAA;AAAA,YAEA,aAAA,EAAa,gBAAgB,KAAA,CAAM,WAAA,GAAc,OAAA,CAAQ,MAAA,EAAQ,GAAG,CAAC,CAAA,CAAA;AAAA,YACrE,SAAA,EAAW,EAAA;AAAA,cACT,wEAAA;AAAA,cACA,MAAA,EAAQ,aAAA,CAAc,WAAW,CAAA,CAAE,eAAe,KAAA,IAChD;AAAA,aACJ;AAAA,YACA,KAAA,EAAO,EAAE,UAAA,EAAY,KAAA,EAAM;AAAA,YAE3B,QAAA,kBAAAA,GAAAA,CAAC,MAAA,EAAA,EAAK,SAAA,EAAU,WAAW,QAAA,EAAA,KAAA,EAAM;AAAA,WAAA;AAAA,UAT5B;AAAA,SAWR;AAAA;AAAA;AACH,GAAA,EACF,CAAA;AAEJ,CAAA;AASA,IAAM,gBAAgB,CAAC;AAAA,EACrB,OAAA;AAAA,EACA,QAAA;AAAA,EACA,IAAA,EAAM,IAAA;AAAA,EACN;AACF,CAAA,KAA0B;AACxB,EAAA,uBACEA,GAAAA;AAAA,IAAC,QAAA;AAAA,IAAA;AAAA,MACC,OAAA;AAAA,MACA,aAAA,EAAa,MAAA;AAAA,MACb,SAAA,EAAW,EAAA;AAAA,QACT,yFAAA;AAAA,QACA,QAAA,IAAY;AAAA,OACd;AAAA,MAEA,QAAA,kBAAAA,GAAAA,CAAC,IAAA,EAAA,EAAK,SAAA,EAAU,QAAA,EAAS;AAAA;AAAA,GAC3B;AAEJ,CAAA;AAEA,IAAM,mBAAmB,MAAM;AAC7B,EAAA,MAAM,EAAE,MAAA,EAAO,GAAI,cAAA,EAAe;AAElC,EAAA,MAAM,aAAa,MAAM;AACvB,IAAA,YAAA,CAAa,MAAM,CAAA;AAAA,EACrB,CAAA;AAEA,EAAA,uBACEA,GAAAA;AAAA,IAAC,QAAA;AAAA,IAAA;AAAA,MACC,aAAA,EAAY,sBAAA;AAAA,MACZ,OAAA,EAAS,UAAA;AAAA,MACT,SAAA,EAAU,yFAAA;AAAA,MACV,KAAA,EAAM,wBAAA;AAAA,MAEN,QAAA,kBAAAA,GAAAA,CAAC,UAAA,EAAA,EAAW,SAAA,EAAU,QAAA,EAAS;AAAA;AAAA,GACjC;AAEJ,CAAA;AAEA,IAAM,kBAAkB,MAAM;AAC5B,EAAA,uBACEA,GAAAA;AAAA,IAAC,QAAA;AAAA,IAAA;AAAA,MACC,aAAA,EAAY,qBAAA;AAAA,MACZ,OAAA,EAAS,MAAM,MAAA,CAAO,KAAA,EAAM;AAAA,MAC5B,SAAA,EAAU,yFAAA;AAAA,MACV,KAAA,EAAM,eAAA;AAAA,MAEN,QAAA,kBAAAA,GAAAA,CAAC,SAAA,EAAA,EAAU,SAAA,EAAU,QAAA,EAAS;AAAA;AAAA,GAChC;AAEJ,CAAA;AASO,IAAM,UAAU,CAAC,EAAE,SAAA,GAAY,KAAA,EAAO,WAAU,KAAoB;AACzE,EAAA,MAAM,EAAE,MAAA,EAAO,GAAI,cAAA,EAAe;AAElC,EAAA,MAAM,QAAA,GAME;AAAA,IACN;AAAA,MACE;AAAA,QACE,KAAA,EAAO,MAAA;AAAA,QACP,IAAA,EAAM,SAAA;AAAA,QACN,OAAA,EAAS,MAAM,MAAA,EAAQ,KAAA,GAAQ,KAAA,EAAM,CAAE,IAAA,EAAK,CAAE,GAAA,EAAI;AAAA,QAClD,MAAA,EAAQ;AAAA,OACV;AAAA,MACA;AAAA,QACE,KAAA,EAAO,MAAA;AAAA,QACP,IAAA,EAAM,SAAA;AAAA,QACN,OAAA,EAAS,MAAM,MAAA,EAAQ,KAAA,GAAQ,KAAA,EAAM,CAAE,IAAA,EAAK,CAAE,GAAA,EAAI;AAAA,QAClD,MAAA,EAAQ;AAAA,OACV;AAAA,MACA;AAAA,QACE,KAAA,EAAO,OAAA;AAAA,QACP,IAAA,EAAM,WAAA;AAAA,QACN,OAAA,EAAS,MAAM,MAAA,CAAO,KAAA,EAAM;AAAA,QAC5B,MAAA,EAAQ;AAAA;AACV,KACF;AAAA,IACA;AAAA,MACE;AAAA,QACE,KAAA,EAAO,MAAA;AAAA,QACP,IAAA,EAAM,QAAA;AAAA,QACN,QAAA,EAAU,MAAA,EAAQ,QAAA,CAAS,MAAM,CAAA;AAAA,QACjC,OAAA,EAAS,MAAM,MAAA,EAAQ,KAAA,GAAQ,KAAA,EAAM,CAAE,UAAA,EAAW,CAAE,GAAA,EAAI;AAAA,QACxD,MAAA,EAAQ;AAAA,OACV;AAAA,MACA;AAAA,QACE,KAAA,EAAO,QAAA;AAAA,QACP,IAAA,EAAM,UAAA;AAAA,QACN,QAAA,EAAU,MAAA,EAAQ,QAAA,CAAS,QAAQ,CAAA;AAAA,QACnC,OAAA,EAAS,MAAM,MAAA,EAAQ,KAAA,GAAQ,KAAA,EAAM,CAAE,YAAA,EAAa,CAAE,GAAA,EAAI;AAAA,QAC1D,MAAA,EAAQ;AAAA,OACV;AAAA,MACA;AAAA,QACE,KAAA,EAAO,WAAA;AAAA,QACP,IAAA,EAAM,aAAA;AAAA,QACN,QAAA,EAAU,MAAA,EAAQ,QAAA,CAAS,WAAW,CAAA;AAAA,QACtC,OAAA,EAAS,MAAM,MAAA,EAAQ,KAAA,GAAQ,KAAA,EAAM,CAAE,eAAA,EAAgB,CAAE,GAAA,EAAI;AAAA,QAC7D,MAAA,EAAQ;AAAA;AACV;AACF,GACF;AAEA,EAAA,uBACEE,IAAAA;AAAA,IAAC,KAAA;AAAA,IAAA;AAAA,MACC,aAAA,EAAY,SAAA;AAAA,MACZ,GAAA,EAAK,SAAA;AAAA,MACL,SAAA,EAAW,EAAA;AAAA,QACT,wHAAA;AAAA,QACA;AAAA,OACF;AAAA,MAEC,QAAA,EAAA;AAAA,QAAA,QAAA,CAAS,CAAC,CAAA,CAAE,GAAA,CAAI,CAAC,IAAA,qBAChBF,GAAAA,CAAC,aAAA,EAAA,EAAgC,GAAG,IAAA,EAAA,EAAhB,IAAA,CAAK,KAAiB,CAC3C,CAAA;AAAA,wBACDA,GAAAA,CAAC,SAAA,EAAA,EAAU,WAAA,EAAY,UAAA,EAAW,WAAU,oBAAA,EAAqB,CAAA;AAAA,wBACjEA,IAAC,gBAAA,EAAA,EAAiB,CAAA;AAAA,wBAClBA,GAAAA,CAAC,SAAA,EAAA,EAAU,WAAA,EAAY,UAAA,EAAW,WAAU,oBAAA,EAAqB,CAAA;AAAA,wBACjEA,IAAC,kBAAA,EAAA,EAAmB,CAAA;AAAA,wBACpBA,GAAAA,CAAC,SAAA,EAAA,EAAU,WAAA,EAAY,UAAA,EAAW,WAAU,oBAAA,EAAqB,CAAA;AAAA,wBACjEA,IAAC,cAAA,EAAA,EAAe,CAAA;AAAA,wBAChBA,GAAAA,CAAC,SAAA,EAAA,EAAU,WAAA,EAAY,UAAA,EAAW,WAAU,oBAAA,EAAqB,CAAA;AAAA,QAChE,QAAA,CAAS,CAAC,CAAA,CAAE,GAAA,CAAI,CAAC,IAAA,qBAChBA,GAAAA,CAAC,aAAA,EAAA,EAAgC,GAAG,IAAA,EAAA,EAAhB,IAAA,CAAK,KAAiB,CAC3C,CAAA;AAAA,wBACDA,IAAC,eAAA,EAAA,EAAgB,CAAA;AAAA,wBACjBA,IAAC,oBAAA,EAAA,EAAqB,CAAA;AAAA,wBACtBA,GAAAA,CAAC,SAAA,EAAA,EAAU,WAAA,EAAY,UAAA,EAAW,WAAU,oBAAA,EAAqB,CAAA;AAAA,wBACjEA,IAAC,UAAA,EAAA,EAAW,CAAA;AAAA,wBACZA,IAAC,WAAA,EAAA,EAAY,CAAA;AAAA,wBACbA,IAAC,WAAA,EAAA,EAAY,CAAA;AAAA,wBACbA,IAAC,mBAAA,EAAA,EAAoB,CAAA;AAAA,wBACrBA,IAAC,gBAAA,EAAA,EAAiB,CAAA;AAAA,wBAClBA,IAAC,UAAA,EAAA,EAAW,CAAA;AAAA,wBACZA,GAAAA,CAAC,SAAA,EAAA,EAAU,WAAA,EAAY,UAAA,EAAW,WAAU,oBAAA,EAAqB,CAAA;AAAA,wBACjEA,IAAC,gBAAA,EAAA,EAAiB,CAAA;AAAA,wBAClBA,IAAC,eAAA,EAAA,EAAgB;AAAA;AAAA;AAAA,GACnB;AAEJ;AC9yBA,IAAM,OAAA,GAAU,KAAA,CAAM,IAAA,CAAK,EAAE,MAAA,EAAQ,IAAG,EAAG,CAAC,CAAA,EAAG,CAAA,KAAM,CAAC,CAAA;AAO/C,IAAM,KAAA,GAAQ,CAAC,EAAE,KAAA,GAAQ,KAAI,KAAkB;AACpD,EAAA,MAAM,CAAC,UAAA,EAAY,aAAa,CAAA,GAAIY,SAAS,EAAE,CAAA;AAC/C,EAAA,MAAM,CAAC,WAAA,EAAa,cAAc,CAAA,GAAIA,SAAS,EAAE,CAAA;AAEjD,EAAA,MAAM,CAAC,cAAA,EAAgB,iBAAiB,CAAA,GAAIA,SAAS,KAAK,CAAA;AAC1D,EAAA,MAAM,CAAC,eAAA,EAAiB,kBAAkB,CAAA,GAAIA,SAAS,KAAK,CAAA;AAC5D,EAAA,MAAM,QAAA,GAAW,OAAuB,IAAI,CAAA;AAE5C,EAAA,MAAM,sBAAsB,MAAM;AAChC,IAAA,iBAAA,CAAkB,IAAI,CAAA;AAAA,EACxB,CAAA;AAEA,EAAA,MAAM,uBAAuB,MAAM;AACjC,IAAA,kBAAA,CAAmB,IAAI,CAAA;AAAA,EACzB,CAAA;AAEA,EAAA,MAAM,eAAA,GAAkB,CAAC,CAAA,KAAwB;AAC/C,IAAA,MAAM,UAAA,GAAa,KAAA;AACnB,IAAA,MAAM,aAAA,GAAgB,GAAA;AAEtB,IAAA,IAAA,CAAK,cAAA,IAAkB,eAAA,KAAoB,QAAA,CAAS,OAAA,EAAS;AAC3D,MAAA,MAAM,SAAA,GAAY,QAAA,CAAS,OAAA,CAAQ,aAAA,CAAc,kBAAkB,CAAA;AACnE,MAAA,IAAI,SAAA,EAAW;AACb,QAAA,MAAM,aAAA,GAAgB,UAAU,qBAAA,EAAsB;AACtD,QAAA,MAAM,SAAA,GAAY,CAAA,CAAE,OAAA,GAAU,aAAA,CAAc,IAAA;AAC5C,QAAA,MAAM,WAAA,GAAc,KAAK,GAAA,CAAI,CAAA,EAAG,KAAK,GAAA,CAAI,UAAA,EAAY,SAAS,CAAC,CAAA;AAE/D,QAAA,IAAI,cAAA,EAAgB;AAClB,UAAA,MAAM,eAAA,GAAkB,aAAa,WAAA,GAAc,aAAA;AACnD,UAAA,MAAM,eAAA,GAAkB,IAAA,CAAK,GAAA,CAAI,WAAA,EAAa,eAAe,CAAA;AAC7D,UAAA,aAAA,CAAc,eAAe,CAAA;AAAA,QAC/B,WAAW,eAAA,EAAiB;AAC1B,UAAA,MAAM,gBAAA,GAAmB,cAAc,UAAA,GAAa,aAAA,CAAA;AACpD,UAAA,MAAM,gBAAA,GAAmB,IAAA,CAAK,GAAA,CAAI,UAAA,GAAa,aAAa,CAAC,CAAA;AAC7D,UAAA,MAAM,2BAA2B,IAAA,CAAK,GAAA;AAAA,YACpC,gBAAA;AAAA,YACA;AAAA,WACF;AACA,UAAA,cAAA,CAAe,wBAAwB,CAAA;AAAA,QACzC;AAAA,MACF;AAAA,IACF;AAAA,EACF,CAAA;AAEA,EAAA,MAAM,gBAAgB,MAAM;AAC1B,IAAA,iBAAA,CAAkB,KAAK,CAAA;AACvB,IAAA,kBAAA,CAAmB,KAAK,CAAA;AAAA,EAC1B,CAAA;AAEA,EAAA,MAAM,wBAAwB,MAAM;AAClC,IAAA,aAAA,CAAc,EAAE,CAAA;AAAA,EAClB,CAAA;AAEA,EAAA,MAAM,yBAAyB,MAAM;AACnC,IAAA,cAAA,CAAe,EAAE,CAAA;AAAA,EACnB,CAAA;AAEA,EAAA,uBACEZ,GAAAA;AAAA,IAAC,KAAA;AAAA,IAAA;AAAA,MACC,GAAA,EAAK,QAAA;AAAA,MACL,WAAA,EAAa,eAAA;AAAA,MACb,SAAA,EAAW,aAAA;AAAA,MACX,YAAA,EAAc,aAAA;AAAA,MACd,SAAA,EAAU,yGAAA;AAAA,MACV,KAAA,EAAO,EAAE,KAAA,EAAO,CAAA,EAAG,KAAK,CAAA,EAAA,CAAA,EAAK;AAAA,MAE7B,0BAAAE,IAAAA,CAAC,KAAA,EAAA,EAAI,EAAA,EAAG,iBAAA,EAAkB,WAAU,wBAAA,EAClC,QAAA,EAAA;AAAA,wBAAAF,GAAAA;AAAA,UAAC,MAAA;AAAA,UAAA;AAAA,YACC,QAAA,EAAU,UAAA;AAAA,YACV,MAAA,EAAQ,IAAA;AAAA,YACR,UAAA,EAAY,cAAA;AAAA,YACZ,WAAA,EAAa,mBAAA;AAAA,YACb,aAAA,EAAe;AAAA;AAAA,SACjB;AAAA,wBACAA,GAAAA;AAAA,UAAC,MAAA;AAAA,UAAA;AAAA,YACC,QAAA,EAAU,WAAA;AAAA,YACV,MAAA,EAAQ,KAAA;AAAA,YACR,UAAA,EAAY,eAAA;AAAA,YACZ,WAAA,EAAa,oBAAA;AAAA,YACb,aAAA,EAAe;AAAA;AAAA,SACjB;AAAA,wBACAA,IAAC,KAAA,EAAA,EAAI,SAAA,EAAU,oCACb,QAAA,kBAAAA,GAAAA,CAAC,SAAI,SAAA,EAAU,iBAAA,EAAkB,OAAO,EAAE,KAAA,EAAO,GAAG,KAAK,CAAA,EAAA,CAAA,IACtD,QAAA,EAAA,OAAA,CAAQ,GAAA,CAAI,CAAC,MAAA,KAAW;AACvB,UAAA,MAAM,QAAA,GAAY,SAAS,KAAA,GAAS,EAAA;AAEpC,UAAA,uBACEE,IAAAA;AAAA,YAAC,KAAA;AAAA,YAAA;AAAA,cAEC,SAAA,EAAU,mBAAA;AAAA,cACV,KAAA,EAAO,EAAE,IAAA,EAAM,CAAA,EAAG,QAAQ,CAAA,EAAA,CAAA,EAAK;AAAA,cAE9B,QAAA,EAAA;AAAA,gBAAA,MAAA,GAAS,EAAA,KAAO,CAAA,oBACfA,IAAAA,CAAAW,UAAA,EACE,QAAA,EAAA;AAAA,kCAAAb,GAAAA,CAAC,KAAA,EAAA,EAAI,SAAA,EAAU,8CAAA,EAA+C,CAAA;AAAA,kCAC9DA,GAAAA,CAAC,MAAA,EAAA,EAAK,WAAU,2EAAA,EACb,QAAA,EAAA,MAAA,GAAS,KAAK,CAAA,EACjB;AAAA,iBAAA,EACF,CAAA;AAAA,gBAED,MAAA,GAAS,CAAA,KAAM,CAAA,IAAK,MAAA,GAAS,EAAA,KAAO,qBACnCA,GAAAA,CAAC,KAAA,EAAA,EAAI,SAAA,EAAU,gDAAA,EAAiD,CAAA;AAAA,gBAEjE,SAAS,CAAA,KAAM,CAAA,oBACdA,GAAAA,CAAC,KAAA,EAAA,EAAI,WAAU,8CAAA,EAA+C;AAAA;AAAA,aAAA;AAAA,YAhB3D;AAAA,WAkBP;AAAA,QAEJ,CAAC,GACH,CAAA,EACF;AAAA,OAAA,EACF;AAAA;AAAA,GACF;AAEJ;AAUA,IAAM,SAAS,CAAC;AAAA,EACd,QAAA;AAAA,EACA,MAAA;AAAA,EACA,UAAA;AAAA,EACA,WAAA;AAAA,EACA;AACF,CAAA,KAAmB;AACjB,EAAA,uBACEE,IAAAA;AAAA,IAAC,KAAA;AAAA,IAAA;AAAA,MACC,SAAA,EAAU,8DAAA;AAAA,MACV,KAAA,EAAO,EAAE,CAAC,MAAA,GAAS,SAAS,OAAO,GAAG,CAAA,EAAG,QAAQ,CAAA,EAAA,CAAA,EAAK;AAAA,MACtD,WAAA;AAAA,MACA,aAAA;AAAA,MAEA,QAAA,EAAA;AAAA,wBAAAF,GAAAA,CAAC,WAAA,EAAA,EAAY,SAAA,EAAU,yEAAA,EAA0E,CAAA;AAAA,wBACjGA,GAAAA;AAAA,UAAC,KAAA;AAAA,UAAA;AAAA,YACC,SAAA,EAAU,oDAAA;AAAA,YACV,KAAA,EAAO;AAAA,cACL,MAAA,EAAQ,OAAA;AAAA,cACR,KAAA,EAAO,KAAA;AAAA,cACP,SAAA,EAAW,aAAA;AAAA,cACX,eAAA,EAAiB,SAAA;AAAA,cACjB,OAAA,EAAS,aAAa,OAAA,GAAU;AAAA;AAClC;AAAA;AACF;AAAA;AAAA,GACF;AAEJ,CAAA;AC/GO,IAAM,aAAa,CAAC,EAAE,OAAA,GAAU,IAAG,KAAuB;AAC/D,EAAA,MAAM;AAAA,IACJ,cAAA,GAAiB,EAAA;AAAA,IACjB,WAAA,GAAc,IAAA;AAAA,IACd,SAAA,GAAY,IAAA;AAAA,IACZ,gBAAA,GAAmB,KAAA;AAAA,IACnB,SAAA;AAAA,IACA,gBAAA;AAAA,IACA,QAAA;AAAA,IACA,OAAA;AAAA,IACA,SAAA;AAAA,IACA,UAAA,EAAY,mBAAmB,EAAC;AAAA,IAChC,QAAA,GAAW,IAAA;AAAA,IACX,SAAA,GAAY,KAAA;AAAA,IACZ,UAAA,GAAa,EAAE,KAAA,EAAO,GAAA,EAAK,QAAQ,IAAA,EAAK;AAAA,IACxC;AAAA,GACF,GAAI,OAAA;AAEJ,EAAA,MAAM,EAAE,SAAA,EAAU,GAAI,cAAA,EAAe;AACrC,EAAA,MAAM,CAAC,OAAA,EAAS,UAAU,CAAA,GAAIY,SAAwB,IAAI,CAAA;AAG1D,EAAA,SAAA,CAAU,MAAM;AACd,IAAA,IAAI,cAAA,EAAgB;AAClB,MAAA,UAAA,CAAW,cAAc,CAAA;AAAA,IAC3B,CAAA,MAAO;AACL,MAAA,UAAA,CAAW,EAAE,CAAA;AAAA,IACf;AAAA,EACF,CAAA,EAAG,CAAC,cAAc,CAAC,CAAA;AAGnB,EAAA,MAAM,sBAAA,GAAyB,uBAAuB,SAAA,CAAU;AAAA,IAC9D,KAAA,EAAO;AAAA,MACL,WAAA;AAAA,MACA,SAAA;AAAA,MACA,YAAA;AAAA,MACA,aAAA;AAAA,MACA,UAAA;AAAA,MACA,UAAA;AAAA,MACA,UAAA;AAAA,MACA,WAAA;AAAA,MACA;AAAA,KACF;AAAA,IACA;AAAA,GACD,CAAA;AAED,EAAA,MAAM,SAAS,SAAA,CAAU;AAAA,IACvB,iBAAA,EAAmB,KAAA;AAAA,IACnB,QAAA;AAAA,IACA,SAAA,EAAW,SAAA;AAAA,IACX,QAAA,CAAS,EAAE,MAAA,EAAAE,OAAAA,EAAO,EAAG;AACnB,MAAA,SAAA,CAAUA,OAAM,CAAA;AAChB,MAAA,OAAA,GAAUA,OAAM,CAAA;AAAA,IAClB,CAAA;AAAA,IACA,SAAA,GAAY;AACV,MAAA,SAAA,CAAU,IAAI,CAAA;AACd,MAAA,SAAA,IAAY;AAAA,IACd,CAAA;AAAA,IACA,QAAA,CAAS,EAAE,MAAA,EAAAA,OAAAA,EAAO,EAAG;AACnB,MAAA,SAAA,CAAUA,OAAM,CAAA;AAChB,MAAA,QAAA,GAAWA,OAAAA,CAAO,OAAA,EAAQ,EAAGA,OAAAA,CAAO,SAAS,CAAA;AAAA,IAC/C,CAAA;AAAA,IACA,iBAAA,CAAkB,EAAE,MAAA,EAAAA,OAAAA,EAAO,EAAG;AAC5B,MAAA,SAAA,CAAUA,OAAM,CAAA;AAAA,IAClB,CAAA;AAAA,IACA,aAAA,CAAc,EAAE,MAAA,EAAAA,OAAAA,EAAO,EAAG;AACxB,MAAA,SAAA,CAAUA,OAAM,CAAA;AAAA,IAClB,CAAA;AAAA,IACA,OAAA,CAAQ,EAAE,MAAA,EAAAA,OAAAA,EAAO,EAAG;AAClB,MAAA,SAAA,CAAUA,OAAM,CAAA;AAAA,IAClB,CAAA;AAAA,IACA,MAAA,CAAO,EAAE,MAAA,EAAAA,OAAAA,EAAO,EAAG;AACjB,MAAA,SAAA,CAAUA,OAAM,CAAA;AAAA,IAClB,CAAA;AAAA,IACA,cAAA,CAAe,EAAE,MAAA,EAAAA,OAAAA,EAAO,EAAG;AACzB,MAAA,SAAA,CAAUA,OAAM,CAAA;AAAA,IAClB,CAAA;AAAA,IACA,WAAA,EAAa;AAAA,MACX,UAAA,EAAY;AAAA,QACV,EAAA,EAAI,qBAAA;AAAA,QACJ,aAAA,EAAe,gBAAA;AAAA,QACf,OAAO,CAAA,qDAAA,EAAwD,UAAA,CAAW,MAAM,CAAA,WAAA,EAAc,WAAW,KAAK,CAAA,GAAA,CAAA;AAAA,QAC9G,KAAA,EACE;AAAA;AACJ,KACF;AAAA,IACA,UAAA,EAAY;AAAA,MACV,UAAA;AAAA,MACA,mBAAA;AAAA,MACA,iBAAA;AAAA,MACA,sBAAA;AAAA,MACA,UAAU,SAAA,CAAU;AAAA,QAClB,KAAA,EAAO,CAAC,SAAA,EAAW,WAAW;AAAA,OAC/B,CAAA;AAAA,MACD,KAAK,SAAA,CAAU;AAAA,QACb,WAAA,EAAa,KAAA;AAAA,QACb,QAAA,EAAU,IAAA;AAAA,QACV,eAAA,EAAiB;AAAA,OAClB,CAAA;AAAA,MACD,KAAA;AAAA,MACA,UAAU,SAAA,CAAU;AAAA,QAClB,UAAA,EAAY;AAAA,OACb,CAAA;AAAA,MACD,UAAA;AAAA,MACA,SAAA;AAAA,MACA,SAAA;AAAA,MACA,KAAA;AAAA,MACA,WAAA;AAAA,MACAC,MAAAA;AAAA,MACAC,UAAAA;AAAA,MACA,WAAA;AAAA,MACAC,SAAAA;AAAA,MACA,SAAS,SAAA,CAAU;AAAA,QACjB,MAAA,EAAQ;AAAA,OACT,CAAA;AAAA,MACD,QAAA;AAAA,MACA,GAAG;AAAA;AACL,GACD,CAAA;AAGD,EAAA,SAAA,CAAU,MAAM;AACd,IAAA,IAAI,UAAU,OAAA,EAAS;AACrB,MAAA,MAAA,CAAO,QAAA,CAAS,WAAW,OAAO,CAAA;AAAA,IACpC,CAAA,MAAA,IAAW,MAAA,KAAW,CAAC,OAAA,IAAW,YAAY,EAAA,CAAA,EAAK;AAEjD,MAAA,MAAM,UAAU,MAAA,CAAO,OAAA;AACvB,MAAA,IAAI,OAAA,EAAS;AACX,QAAA,MAAA,CAAO,QAAA,CAAS,iBAAiB,gBAAgB,CAAA;AACjD,QAAA,MAAA,CAAO,QAAA,CAAS,YAAA;AAAA,UACd,gBAAA,KAAqB,QAAQ,OAAA,GAAU;AAAA,SACzC;AAAA,MACF;AAAA,IACF;AAAA,EACF,CAAA,EAAG,CAAC,MAAA,EAAQ,OAAA,EAAS,gBAAgB,CAAC,CAAA;AAEtC,EAAA,uBACEf,IAAAA;AAAA,IAAC,KAAA;AAAA,IAAA;AAAA,MACC,SAAA,EAAW,EAAA,CAAG,uCAAA,EAAyC,SAAS,CAAA;AAAA,MAChE,aAAA,EAAY,aAAA;AAAA,MAEX,QAAA,EAAA;AAAA,QAAA,WAAA,oBACCF,GAAAA,CAAC,KAAA,EAAA,EAAI,SAAA,EAAU,yHACb,QAAA,kBAAAA,GAAAA;AAAA,UAAC,OAAA;AAAA,UAAA;AAAA,YACC,WAAW,gBAAA,IAAoB,gBAAA;AAAA,YAC/B,SAAA,EAAW;AAAA;AAAA,SACb,EACF,CAAA;AAAA,wBAEFA,GAAAA;AAAA,UAAC,KAAA;AAAA,UAAA;AAAA,YACC,SAAA,EAAW,EAAA;AAAA,cACT,wCAAA;AAAA,cACA,WAAA,IAAe;AAAA,aACjB;AAAA,YAEA,QAAA,kBAAAE,IAAAA;AAAA,cAAC,KAAA;AAAA,cAAA;AAAA,gBACC,EAAA,EAAG,uBAAA;AAAA,gBACH,aAAA,EAAY,kBAAA;AAAA,gBACZ,SAAA,EAAU,6FAAA;AAAA,gBAET,QAAA,EAAA;AAAA,kBAAA,SAAA,oBAAaF,GAAAA,CAAC,KAAA,EAAA,EAAM,KAAA,EAAO,WAAW,KAAA,EAAO,CAAA;AAAA,kCAC9CA,GAAAA;AAAA,oBAAC,KAAA;AAAA,oBAAA;AAAA,sBACC,SAAA,EAAU,kFAAA;AAAA,sBACV,OAAO,EAAE,KAAA,EAAO,CAAA,EAAG,UAAA,CAAW,KAAK,CAAA,EAAA,CAAA,EAAK;AAAA,sBAExC,QAAA,kBAAAA,GAAAA,CAAC,aAAA,EAAA,EAAc,MAAA,EAAgB;AAAA;AAAA;AACjC;AAAA;AAAA;AACF;AAAA;AACF;AAAA;AAAA,GACF;AAEJ;;;ACxNO,IAAM,gBAAA,GAAmB,CAAC,KAAA,GAAgB,EAAC,KAAwB;AACxE,EAAA,MAAM,QAA0B,EAAC;AAEjC,EAAA,KAAA,MAAW,QAAQ,KAAA,EAAO;AACxB,IAAA,QAAQ,KAAK,IAAA;AAAM,MACjB,KAAK,MAAA;AACH,QAAA,KAAA,CAAM,IAAA,GAAO,IAAA;AACb,QAAA;AAAA,MACF,KAAK,QAAA;AACH,QAAA,KAAA,CAAM,OAAA,GAAU,IAAA;AAChB,QAAA;AAAA,MACF,KAAK,WAAA;AACH,QAAA,IAAI,MAAM,UAAA,EAAY;AACpB,UAAA,IAAI,KAAA,CAAM,OAAA,CAAQ,KAAA,CAAM,UAAU,CAAA,EAAG;AACnC,YAAA,KAAA,CAAM,UAAA,CAAW,KAAK,WAAW,CAAA;AAAA,UACnC,CAAA,MAAO;AACL,YAAA,KAAA,CAAM,UAAA,GAAa,CAAC,KAAA,CAAM,UAAA,EAAY,WAAW,CAAA;AAAA,UACnD;AAAA,QACF,CAAA,MAAO;AACL,UAAA,KAAA,CAAM,UAAA,GAAa,WAAA;AAAA,QACrB;AACA,QAAA;AAAA,MACF,KAAK,QAAA;AACH,QAAA,IAAI,MAAM,UAAA,EAAY;AACpB,UAAA,IAAI,KAAA,CAAM,OAAA,CAAQ,KAAA,CAAM,UAAU,CAAA,EAAG;AACnC,YAAA,KAAA,CAAM,UAAA,CAAW,KAAK,aAAa,CAAA;AAAA,UACrC,CAAA,MAAO;AACL,YAAA,KAAA,CAAM,UAAA,GAAa,CAAC,KAAA,CAAM,UAAA,EAAY,aAAa,CAAA;AAAA,UACrD;AAAA,QACF,CAAA,MAAO;AACL,UAAA,KAAA,CAAM,UAAA,GAAa,aAAA;AAAA,QACrB;AACA,QAAA;AAAA,MACF,KAAK,WAAA;AACH,QAAA,IAAI,IAAA,CAAK,OAAO,KAAA,EAAO;AACrB,UAAA,KAAA,CAAM,KAAA,GAAQkB,eAAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAe,CAAA;AAAA,QACzD;AACA,QAAA,IAAI,IAAA,CAAK,OAAO,UAAA,EAAY;AAC1B,UAAA,KAAA,CAAM,IAAA,GAAO,KAAK,KAAA,CAAM,UAAA;AAAA,QAC1B;AACA,QAAA,IAAI,IAAA,CAAK,OAAO,QAAA,EAAU;AACxB,UAAA,KAAA,CAAM,QAAA,GAAW,aAAA,CAAc,IAAA,CAAK,KAAA,CAAM,QAAkB,CAAA;AAAA,QAC9D;AACA,QAAA;AAAA,MACF,KAAK,WAAA;AACH,QAAA,IAAI,IAAA,CAAK,OAAO,KAAA,EAAO;AACrB,UAAA,KAAA,CAAM,UAAA,GAAaA,eAAAA,CAAe,IAAA,CAAK,KAAA,CAAM,KAAe,CAAA;AAAA,QAC9D;AACA,QAAA;AAAA,MACF,KAAK,MAAA;AACH,QAAA,IAAI,IAAA,CAAK,OAAO,IAAA,EAAM;AACpB,UAAA,KAAA,CAAM,IAAA,GAAO,KAAK,KAAA,CAAM,IAAA;AAAA,QAC1B;AACA,QAAA;AAAA;AACJ,EACF;AAEA,EAAA,OAAO,KAAA;AACT,CAAA;AAKO,IAAMA,eAAAA,GAAiB,CAAC,KAAA,KAAkD;AAC/E,EAAA,IAAI,CAAC,OAAO,OAAO,MAAA;AAGnB,EAAA,IAAI,KAAA,CAAM,UAAA,CAAW,GAAG,CAAA,EAAG;AACzB,IAAA,OAAO,KAAA,CAAM,UAAU,CAAC,CAAA;AAAA,EAC1B;AAGA,EAAA,MAAM,QAAA,GAAW,KAAA,CAAM,KAAA,CAAM,gCAAgC,CAAA;AAC7D,EAAA,IAAI,QAAA,EAAU;AACZ,IAAA,MAAM,CAAA,GAAI,QAAA,CAAS,QAAA,CAAS,CAAC,CAAC,CAAA,CAAE,QAAA,CAAS,EAAE,CAAA,CAAE,QAAA,CAAS,CAAA,EAAG,GAAG,CAAA;AAC5D,IAAA,MAAM,CAAA,GAAI,QAAA,CAAS,QAAA,CAAS,CAAC,CAAC,CAAA,CAAE,QAAA,CAAS,EAAE,CAAA,CAAE,QAAA,CAAS,CAAA,EAAG,GAAG,CAAA;AAC5D,IAAA,MAAM,CAAA,GAAI,QAAA,CAAS,QAAA,CAAS,CAAC,CAAC,CAAA,CAAE,QAAA,CAAS,EAAE,CAAA,CAAE,QAAA,CAAS,CAAA,EAAG,GAAG,CAAA;AAC5D,IAAA,OAAO,CAAA,EAAG,CAAC,CAAA,EAAG,CAAC,GAAG,CAAC,CAAA,CAAA;AAAA,EACrB;AAGA,EAAA,MAAM,QAAA,GAAmC;AAAA,IACvC,GAAA,EAAK,QAAA;AAAA,IACL,KAAA,EAAO,QAAA;AAAA,IACP,IAAA,EAAM,QAAA;AAAA,IACN,MAAA,EAAQ,QAAA;AAAA,IACR,MAAA,EAAQ,QAAA;AAAA,IACR,MAAA,EAAQ,QAAA;AAAA,IACR,IAAA,EAAM,QAAA;AAAA,IACN,KAAA,EAAO,QAAA;AAAA,IACP,KAAA,EAAO,QAAA;AAAA,IACP,IAAA,EAAM,QAAA;AAAA,IACN,IAAA,EAAM;AAAA,GACR;AAEA,EAAA,OAAO,QAAA,CAAS,KAAA,CAAM,WAAA,EAAa,CAAA,IAAK,KAAA;AAC1C,CAAA;AAKO,IAAM,aAAA,GAAgB,CAAC,QAAA,KAA6B;AACzD,EAAA,MAAM,KAAA,GAAQ,QAAA,CAAS,KAAA,CAAM,2BAA2B,CAAA;AACxD,EAAA,IAAI,KAAA,EAAO;AACT,IAAA,MAAM,KAAA,GAAQ,UAAA,CAAW,KAAA,CAAM,CAAC,CAAC,CAAA;AACjC,IAAA,MAAM,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA,IAAK,IAAA;AAEzB,IAAA,OAAO,SAAS,IAAA,GAAO,IAAA,CAAK,KAAA,CAAM,KAAA,GAAQ,IAAI,CAAA,GAAI,KAAA;AAAA,EACpD;AACA,EAAA,OAAO,EAAA;AACT,CAAA;AAKO,IAAMC,aAAAA,GAAe,CAC1B,KAAA,KACwD;AACxD,EAAA,IAAI,CAAC,KAAA,EAAO,SAAA,EAAW,OAAO,MAAA;AAC9B,EAAA,MAAM,QAAQ,KAAA,CAAM,SAAA;AACpB,EAAA,IAAI,CAAC,QAAQ,QAAA,EAAU,OAAA,EAAS,SAAS,CAAA,CAAE,QAAA,CAAS,KAAK,CAAA,EAAG;AAC1D,IAAA,OAAO,KAAA;AAAA,EACT;AACA,EAAA,OAAO,MAAA;AACT,CAAA;AAKO,IAAM,kBAAA,GAAqB,CAAC,KAAA,KAA0B;AAC3D,EAAA,MAAM,KAAA,GAAgC;AAAA,IACpC,CAAA,EAAG,EAAA;AAAA,IACH,CAAA,EAAG,EAAA;AAAA,IACH,CAAA,EAAG,KAAA;AAAA,IACH,CAAA,EAAG,EAAA;AAAA,IACH,CAAA,EAAG,KAAA;AAAA,IACH,CAAA,EAAG;AAAA,GACL;AACA,EAAA,OAAO,KAAA,CAAM,KAAK,CAAA,IAAK,EAAA;AACzB,CAAA;;;AC7IO,IAAM,kBAAA,GAAqB,OAAO,GAAA,KAAwC;AAC/E,EAAA,IAAI;AAEF,IAAA,IAAI,GAAA,CAAI,UAAA,CAAW,OAAO,CAAA,EAAG;AAC3B,MAAA,OAAO,GAAA;AAAA,IACT;AAGA,IAAA,MAAM,QAAA,GAAW,MAAM,KAAA,CAAM,GAAG,CAAA;AAChC,IAAA,IAAI,CAAC,SAAS,EAAA,EAAI;AAChB,MAAA,OAAA,CAAQ,IAAA,CAAK,CAAA,uBAAA,EAA0B,GAAG,CAAA,CAAE,CAAA;AAC5C,MAAA,OAAO,IAAA;AAAA,IACT;AAEA,IAAA,MAAM,IAAA,GAAO,MAAM,QAAA,CAAS,IAAA,EAAK;AAGjC,IAAA,OAAO,IAAI,OAAA,CAAQ,CAAC,OAAA,KAAY;AAC9B,MAAA,MAAM,MAAA,GAAS,IAAI,UAAA,EAAW;AAC9B,MAAA,MAAA,CAAO,YAAY,MAAM;AACvB,QAAA,OAAA,CAAQ,OAAO,MAAgB,CAAA;AAAA,MACjC,CAAA;AACA,MAAA,MAAA,CAAO,UAAU,MAAM;AACrB,QAAA,OAAA,CAAQ,IAAA,CAAK,CAAA,gCAAA,EAAmC,GAAG,CAAA,CAAE,CAAA;AACrD,QAAA,OAAA,CAAQ,IAAI,CAAA;AAAA,MACd,CAAA;AACA,MAAA,MAAA,CAAO,cAAc,IAAI,CAAA;AAAA,IAC3B,CAAC,CAAA;AAAA,EACH,SAAS,KAAA,EAAO;AACd,IAAA,OAAA,CAAQ,IAAA,CAAK,CAAA,sBAAA,EAAyB,GAAG,CAAA,CAAA,EAAI,KAAK,CAAA;AAClD,IAAA,OAAO,IAAA;AAAA,EACT;AACF,CAAA;AAKO,IAAMC,eAAAA,GAAiB,CAAC,KAAA,KAAkC;AAC/D,EAAA,IAAI,OAAO,KAAA,KAAU,QAAA,EAAU,OAAO,KAAA;AACtC,EAAA,IAAI,OAAO,UAAU,QAAA,EAAU;AAC7B,IAAA,MAAM,SAAS,UAAA,CAAW,KAAA,CAAM,OAAA,CAAQ,WAAA,EAAa,EAAE,CAAC,CAAA;AACxD,IAAA,OAAO,KAAA,CAAM,MAAM,CAAA,GAAI,IAAA,GAAO,MAAA;AAAA,EAChC;AACA,EAAA,OAAO,IAAA;AACT,CAAA;AAKO,IAAM,kBAAA,GAAqB,CAChC,KAAA,KACwC;AACxC,EAAA,MAAM,SAA8C,EAAC;AAGrD,EAAA,MAAM,SAAA,GAAY,KAAA,CAAM,KAAA,IAAS,KAAA,CAAM,SAAA;AACvC,EAAA,MAAM,UAAA,GAAa,KAAA,CAAM,MAAA,IAAU,KAAA,CAAM,UAAA;AAEzC,EAAA,IAAI,SAAA,EAAW;AACb,IAAA,MAAM,CAAA,GAAIA,gBAAe,SAAS,CAAA;AAClC,IAAA,IAAI,CAAA,SAAU,KAAA,GAAQ,CAAA;AAAA,EACxB;AAEA,EAAA,IAAI,UAAA,EAAY;AACd,IAAA,MAAM,CAAA,GAAIA,gBAAe,UAAU,CAAA;AACnC,IAAA,IAAI,CAAA,SAAU,MAAA,GAAS,CAAA;AAAA,EACzB;AAGA,EAAA,IAAI,CAAC,MAAA,CAAO,KAAA,IAAS,CAAC,OAAO,MAAA,EAAQ;AACnC,IAAA,MAAM,QAAQ,KAAA,CAAM,KAAA;AACpB,IAAA,IAAI,KAAA,EAAO;AACT,MAAA,MAAM,UAAA,GAAa,KAAA,CAAM,KAAA,CAAM,yCAAyC,CAAA;AACxE,MAAA,MAAM,WAAA,GAAc,KAAA,CAAM,KAAA,CAAM,0CAA0C,CAAA;AAC1E,MAAA,IAAI,UAAA,IAAc,CAAC,MAAA,CAAO,KAAA,SAAc,KAAA,GAAQ,UAAA,CAAW,UAAA,CAAW,CAAC,CAAC,CAAA;AACxE,MAAA,IAAI,WAAA,IAAe,CAAC,MAAA,CAAO,MAAA,SAAe,MAAA,GAAS,UAAA,CAAW,WAAA,CAAY,CAAC,CAAC,CAAA;AAAA,IAC9E;AAAA,EACF;AAGA,EAAA,IAAI,CAAC,OAAO,KAAA,EAAO;AACjB,IAAA,MAAA,CAAO,KAAA,GAAQ,GAAA;AAAA,EACjB;AAEA,EAAA,OAAO,MAAA;AACT,CAAA;AAKO,IAAMC,kBAAAA,GAAoB,CAC/B,KAAA,KAC4C;AAE5C,EAAA,IAAI,MAAM,KAAA,EAAO;AACf,IAAA,MAAM,KAAA,GAAS,KAAA,CAAM,KAAA,CAAiB,WAAA,EAAY;AAClD,IAAA,IAAI,CAAC,MAAA,EAAQ,QAAA,EAAU,OAAO,CAAA,CAAE,QAAA,CAAS,KAAK,CAAA,EAAG;AAC/C,MAAA,OAAO,KAAA;AAAA,IACT;AAAA,EACF;AAGA,EAAA,IAAI,KAAA,CAAM,cAAA,IAAkB,OAAO,KAAA,CAAM,mBAAmB,QAAA,EAAU;AACpE,IAAA,MAAM,QAAQ,KAAA,CAAM,cAAA;AACpB,IAAA,IAAI,MAAM,QAAA,CAAS,mBAAmB,KAAK,KAAA,CAAM,QAAA,CAAS,oBAAoB,CAAA,EAAG;AAC/E,MAAA,OAAO,QAAA;AAAA,IACT;AACA,IAAA,IAAI,KAAA,CAAM,SAAS,mBAAmB,CAAA,IAAK,CAAC,KAAA,CAAM,QAAA,CAAS,oBAAoB,CAAA,EAAG;AAChF,MAAA,OAAO,OAAA;AAAA,IACT;AACA,IAAA,IAAI,KAAA,CAAM,SAAS,oBAAoB,CAAA,IAAK,CAAC,KAAA,CAAM,QAAA,CAAS,mBAAmB,CAAA,EAAG;AAChF,MAAA,OAAO,MAAA;AAAA,IACT;AAAA,EACF;AAGA,EAAA,IAAI,KAAA,CAAM,KAAA,IAAS,OAAO,KAAA,CAAM,UAAU,QAAA,EAAU;AAClD,IAAA,MAAM,QAAQ,KAAA,CAAM,KAAA;AACpB,IAAA,MAAM,UAAA,GAAa,KAAA,CAAM,KAAA,CAAM,wBAAwB,CAAA;AACvD,IAAA,IAAI,UAAA,EAAY;AACd,MAAA,OAAO,UAAA,CAAW,CAAC,CAAA,CAAE,WAAA,EAAY;AAAA,IACnC;AACA,IAAA,MAAM,cAAA,GAAiB,KAAA,CAAM,KAAA,CAAM,oCAAoC,CAAA;AACvE,IAAA,IAAI,cAAA,EAAgB;AAClB,MAAA,OAAO,cAAA,CAAe,CAAC,CAAA,CAAE,WAAA,EAAY;AAAA,IACvC;AAAA,EACF;AAGA,EAAA,IAAI,MAAM,SAAA,EAAW;AACnB,IAAA,MAAM,KAAA,GAAS,KAAA,CAAM,SAAA,CAAqB,WAAA,EAAY;AACtD,IAAA,IAAI,CAAC,MAAA,EAAQ,QAAA,EAAU,OAAO,CAAA,CAAE,QAAA,CAAS,KAAK,CAAA,EAAG;AAC/C,MAAA,OAAO,KAAA;AAAA,IACT;AAAA,EACF;AAEA,EAAA,OAAO,MAAA;AACT,CAAA;;;AC3FO,IAAM,oBAAA,GAAuB,CAClC,OAAA,EACA,MAAA,GAAkB,KAAA,KACW;AAC7B,EAAA,IAAI,CAAC,OAAA,IAAW,OAAA,CAAQ,MAAA,KAAW,CAAA,EAAG;AACpC,IAAA,OAAO,EAAC;AAAA,EACV;AAEA,EAAA,MAAM,SAAmC,EAAC;AAE1C,EAAA,KAAA,MAAW,QAAQ,OAAA,EAAS;AAC1B,IAAA,IAAI,IAAA,CAAK,SAAS,MAAA,EAAQ;AACxB,MAAA,MAAM,IAAA,GAAO,KAAK,IAAA,IAAQ,EAAA;AAC1B,MAAA,MAAM,KAAA,GAAQ,gBAAA,CAAiB,IAAA,CAAK,KAAK,CAAA;AACzC,MAAA,MAAM,QAAA,GAAW,MAAA,CAAO,IAAA,CAAK,KAAK,EAAE,MAAA,GAAS,CAAA;AAE7C,MAAA,IAAI,QAAA,EAAU;AACZ,QAAA,MAAM,WAAA,GAA2B;AAAA,UAC/B,IAAA;AAAA,UACA,GAAG;AAAA,SACL;AAGA,QAAA,IAAI,MAAM,IAAA,EAAM;AACd,UAAA,WAAA,CAAY,OAAO,KAAA,CAAM,IAAA;AACzB,UAAA,WAAA,CAAY,KAAA,GAAQ,YAAY,KAAA,IAAS,QAAA;AACzC,UAAA,IAAI,CAAC,YAAY,UAAA,EAAY;AAC3B,YAAA,WAAA,CAAY,UAAA,GAAa,WAAA;AAAA,UAC3B;AAAA,QACF;AAEA,QAAA,MAAA,CAAO,KAAK,WAAW,CAAA;AAAA,MACzB,CAAA,MAAO;AACL,QAAA,MAAA,CAAO,KAAK,IAAI,CAAA;AAAA,MAClB;AAAA,IACF,CAAA,MAAA,IAAW,IAAA,CAAK,IAAA,KAAS,WAAA,EAAa;AACpC,MAAA,MAAA,CAAO,KAAK,IAAI,CAAA;AAAA,IAClB;AAAA,EACF;AAEA,EAAA,OAAO,MAAA;AACT,CAAA;;;ACjFO,IAAMC,YAAAA,GAAc,CAAC,IAAA,KAA2B;AACrD,EAAA,OACE,KAAK,IAAA,KAAS,OAAA,IACd,KAAK,IAAA,KAAS,gBAAA,IACd,KAAK,IAAA,KAAS,aAAA;AAElB,CAAA;AAKO,IAAMC,2BAA0B,OAA6B;AAAA,EAClE,kBAAkB,EAAC;AAAA,EACnB,kBAAA,EAAoB,IAAA;AAAA,EACpB,QAAQ;AACV,CAAA,CAAA;AAKA,IAAM,gBAAA,GAAmB,OACvB,IAAA,EACA,OAAA,EACA,eAAA,KAC4B;AAC5B,EAAA,MAAM,GAAA,GAAM,KAAK,KAAA,EAAO,GAAA;AACxB,EAAA,IAAI,CAAC,GAAA,EAAK;AACR,IAAA,OAAA,CAAQ,IAAA,CAAK,0BAA0B,IAAI,CAAA;AAC3C,IAAA,OAAO,IAAA;AAAA,EACT;AAEA,EAAA,MAAM,SAAA,GAAY,MAAM,kBAAA,CAAmB,GAAG,CAAA;AAC9C,EAAA,IAAI,CAAC,SAAA,EAAW;AACd,IAAA,OAAA,CAAQ,KAAK,iCAAA,EAAmC,GAAA,CAAI,SAAA,CAAU,CAAA,EAAG,GAAG,CAAC,CAAA;AACrE,IAAA,OAAO,IAAA;AAAA,EACT;AAEA,EAAA,MAAM,EAAE,OAAO,MAAA,EAAO,GAAI,mBAAmB,IAAA,CAAK,KAAA,IAAS,EAAE,CAAA;AAC7D,EAAA,MAAM,YAAYF,kBAAAA,CAAkB,IAAA,CAAK,KAAA,IAAS,EAAE,CAAA,IAAK,eAAA;AAEzD,EAAA,MAAM,YAAA,GAAwB;AAAA,IAC5B,KAAA,EAAO,SAAA;AAAA,IACP,OAAO,KAAA,GAAQ,IAAA,CAAK,GAAA,CAAI,KAAA,EAAO,GAAG,CAAA,GAAI,GAAA;AAAA;AAAA,IACtC,WAAW,SAAA,IAAa,MAAA;AAAA,IACxB,MAAA,EAAQ,CAAC,CAAA,EAAG,CAAA,EAAG,GAAG,CAAC;AAAA,GACrB;AAEA,EAAA,IAAI,MAAA,EAAQ;AACV,IAAC,aAAqB,MAAA,GAAS,MAAA;AAAA,EACjC;AAEA,EAAA,OAAO,YAAA;AACT,CAAA;AAKA,IAAM,gBAAA,GAAmB,OACvB,IAAA,EACA,OAAA,KACkB;AAClB,EAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,EAAO,GAAA,KAAQ,KAAA;AAClC,EAAA,MAAM,SAAA,GAAYF,aAAAA,CAAa,IAAA,CAAK,KAAK,CAAA;AAGzC,EAAA,MAAM,QAAA,GAAW,KAAK,OAAA,EAAS,IAAA,CAAK,CAAC,IAAA,KAASG,YAAAA,CAAY,IAAI,CAAC,CAAA;AAE/D,EAAA,IAAI,QAAA,EAAU;AAEZ,IAAA,KAAA,MAAW,IAAA,IAAQ,IAAA,CAAK,OAAA,IAAW,EAAC,EAAG;AACrC,MAAA,IAAIA,YAAAA,CAAY,IAAI,CAAA,EAAG;AACrB,QAAA,MAAM,eAAe,MAAM,gBAAA;AAAA,UACzB,IAAA;AAAA,UACA,OAAA;AAAA,UACA;AAAA,SACF;AACA,QAAA,IAAI,YAAA,EAAc;AAChB,UAAA,OAAA,CAAQ,gBAAA,CAAiB,KAAK,YAAY,CAAA;AAAA,QAC5C;AAAA,MACF,WAAW,IAAA,CAAK,IAAA,KAAS,MAAA,IAAU,IAAA,CAAK,SAAS,WAAA,EAAa;AAC5D,QAAA,MAAM,WAAA,GAAc,oBAAA,CAAqB,CAAC,IAAI,GAAG,KAAK,CAAA;AACtD,QAAA,IAAI,WAAA,CAAY,SAAS,CAAA,EAAG;AAC1B,UAAA,OAAA,CAAQ,iBAAiB,IAAA,CAAK;AAAA,YAC5B,IAAA,EAAM,WAAA;AAAA,YACN,SAAA,EAAW,SAAA,KAAc,KAAA,GAAQ,OAAA,GAAU,MAAA,CAAA;AAAA,YAC3C,MAAA,EAAQ,CAAC,CAAA,EAAG,CAAA,EAAG,GAAG,CAAC;AAAA,WACpB,CAAA;AAAA,QACH;AAAA,MACF;AAAA,IACF;AAAA,EACF,CAAA,MAAO;AAEL,IAAA,MAAM,cAAc,oBAAA,CAAqB,IAAA,CAAK,OAAA,IAAW,IAAI,KAAK,CAAA;AAClE,IAAA,OAAA,CAAQ,iBAAiB,IAAA,CAAK;AAAA,MAC5B,IAAA,EAAM,WAAA,CAAY,MAAA,GAAS,CAAA,GAAI,WAAA,GAAc,GAAA;AAAA;AAAA,MAC7C,SAAA,EAAW,SAAA,KAAc,KAAA,GAAQ,OAAA,GAAU,MAAA,CAAA;AAAA,MAC3C,MAAA,EAAQ,CAAC,CAAA,EAAG,CAAA,EAAG,GAAG,CAAC;AAAA,KACpB,CAAA;AAAA,EACH;AACF,CAAA;AAKA,IAAM,cAAA,GAAiB,OACrB,IAAA,EACA,OAAA,KACkB;AAClB,EAAA,MAAM,KAAA,GAAS,IAAA,CAAK,KAAA,EAAO,KAAA,IAAoB,CAAA;AAC/C,EAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,EAAO,GAAA,KAAQ,KAAA;AAClC,EAAA,MAAM,SAAA,GAAYH,aAAAA,CAAa,IAAA,CAAK,KAAK,CAAA;AACzC,EAAA,MAAM,cAAc,oBAAA,CAAqB,IAAA,CAAK,OAAA,IAAW,IAAI,KAAK,CAAA;AAElE,EAAA,OAAA,CAAQ,iBAAiB,IAAA,CAAK;AAAA,IAC5B,IAAA,EAAM,WAAA,CAAY,MAAA,GAAS,CAAA,GAAI,WAAA,GAAc,GAAA;AAAA,IAC7C,QAAA,EAAU,mBAAmB,KAAK,CAAA;AAAA,IAClC,IAAA,EAAM,IAAA;AAAA,IACN,SAAA,EAAW,SAAA,KAAc,KAAA,GAAQ,OAAA,GAAU,MAAA,CAAA;AAAA,IAC3C,MAAA,EAAQ,CAAC,CAAA,EAAG,EAAA,EAAI,GAAG,CAAC;AAAA,GACrB,CAAA;AACH,CAAA;AAKA,IAAM,iBAAA,GAAoB,OACxB,IAAA,EACA,OAAA,KACkB;AAClB,EAAA,MAAM,QAAmB,EAAC;AAC1B,EAAA,MAAM,OAAA,GAAU,KAAK,KAAA,EAAO,GAAA;AAE5B,EAAA,KAAA,MAAW,QAAA,IAAY,IAAA,CAAK,OAAA,IAAW,EAAC,EAAG;AACzC,IAAA,MAAM,OAAA,GAAW,QAAA,CAAS,KAAA,EAAO,GAAA,IAA8B,OAAA;AAE/D,IAAA,KAAA,MAAW,OAAA,IAAW,QAAA,CAAS,OAAA,IAAW,EAAC,EAAG;AAC5C,MAAA,IAAI,OAAA,CAAQ,SAAS,WAAA,EAAa;AAChC,QAAA,MAAM,OAAA,GAAW,OAAA,CAAQ,KAAA,EAAO,GAAA,IAA8B,OAAA;AAC9D,QAAA,MAAM,YAAY,OAAA,KAAY,KAAA;AAC9B,QAAA,MAAM,cAAc,oBAAA,CAAqB,OAAA,CAAQ,OAAA,IAAW,IAAI,SAAS,CAAA;AAEzE,QAAA,KAAA,CAAM,IAAA,CAAK;AAAA,UACT,IAAA,EAAM,WAAA,CAAY,MAAA,GAAS,CAAA,GAAI,WAAA,GAAc,GAAA;AAAA,UAC7C,SAAA,EAAW,YAAY,OAAA,GAAU;AAAA,SAClC,CAAA;AAAA,MACH,CAAA,MAAA,IAAW,OAAA,CAAQ,IAAA,KAAS,YAAA,EAAc;AAExC,QAAA,MAAM,cAAyB,EAAC;AAChC,QAAA,MAAM,iBAAA,CAAkB,OAAA,EAAS,WAAA,EAAa,OAAO,CAAA;AACrD,QAAA,IAAI,WAAA,CAAY,SAAS,CAAA,EAAG;AAC1B,UAAA,KAAA,CAAM,IAAA,CAAK,EAAE,EAAA,EAAI,WAAA,EAAa,CAAA;AAAA,QAChC;AAAA,MACF,CAAA,MAAA,IAAW,OAAA,CAAQ,IAAA,KAAS,aAAA,EAAe;AACzC,QAAA,MAAM,cAAyB,EAAC;AAChC,QAAA,MAAM,iBAAA,CAAkB,OAAA,EAAS,WAAA,EAAa,OAAO,CAAA;AACrD,QAAA,IAAI,WAAA,CAAY,SAAS,CAAA,EAAG;AAC1B,UAAA,KAAA,CAAM,IAAA,CAAK,EAAE,EAAA,EAAI,WAAA,EAAa,CAAA;AAAA,QAChC;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAEA,EAAA,IAAI,KAAA,CAAM,SAAS,CAAA,EAAG;AACpB,IAAA,OAAA,CAAQ,iBAAiB,IAAA,CAAK;AAAA,MAC5B,EAAA,EAAI,KAAA;AAAA,MACJ,MAAA,EAAQ,CAAC,CAAA,EAAG,CAAA,EAAG,GAAG,CAAC;AAAA,KACpB,CAAA;AAAA,EACH;AACF,CAAA;AAKA,IAAM,iBAAA,GAAoB,OACxB,IAAA,EACA,KAAA,EACA,SAAA,KACkB;AAClB,EAAA,KAAA,MAAW,QAAA,IAAY,IAAA,CAAK,OAAA,IAAW,EAAC,EAAG;AACzC,IAAA,MAAM,OAAA,GAAW,QAAA,CAAS,KAAA,EAAO,GAAA,IAA8B,SAAA;AAE/D,IAAA,KAAA,MAAW,OAAA,IAAW,QAAA,CAAS,OAAA,IAAW,EAAC,EAAG;AAC5C,MAAA,IAAI,OAAA,CAAQ,SAAS,WAAA,EAAa;AAChC,QAAA,MAAM,OAAA,GAAW,OAAA,CAAQ,KAAA,EAAO,GAAA,IAA8B,OAAA;AAC9D,QAAA,MAAM,YAAY,OAAA,KAAY,KAAA;AAC9B,QAAA,MAAM,cAAc,oBAAA,CAAqB,OAAA,CAAQ,OAAA,IAAW,IAAI,SAAS,CAAA;AAEzE,QAAA,KAAA,CAAM,IAAA,CAAK;AAAA,UACT,IAAA,EAAM,WAAA,CAAY,MAAA,GAAS,CAAA,GAAI,WAAA,GAAc,GAAA;AAAA,UAC7C,SAAA,EAAW,YAAY,OAAA,GAAU;AAAA,SAClC,CAAA;AAAA,MACH,WAAW,OAAA,CAAQ,IAAA,KAAS,YAAA,IAAgB,OAAA,CAAQ,SAAS,aAAA,EAAe;AAC1E,QAAA,MAAM,cAAyB,EAAC;AAChC,QAAA,MAAM,iBAAA,CAAkB,OAAA,EAAS,WAAA,EAAa,OAAO,CAAA;AACrD,QAAA,IAAI,WAAA,CAAY,SAAS,CAAA,EAAG;AAC1B,UAAA,KAAA,CAAM,IAAA,CAAK,OAAA,CAAQ,IAAA,KAAS,YAAA,GAAe,EAAE,EAAA,EAAI,WAAA,EAAY,GAAI,EAAE,EAAA,EAAI,WAAA,EAAa,CAAA;AAAA,QACtF;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF,CAAA;AAKA,IAAM,kBAAA,GAAqB,OACzB,IAAA,EACA,OAAA,KACkB;AAClB,EAAA,MAAM,QAAmB,EAAC;AAC1B,EAAA,MAAM,OAAA,GAAU,KAAK,KAAA,EAAO,GAAA;AAE5B,EAAA,KAAA,MAAW,QAAA,IAAY,IAAA,CAAK,OAAA,IAAW,EAAC,EAAG;AACzC,IAAA,MAAM,OAAA,GAAW,QAAA,CAAS,KAAA,EAAO,GAAA,IAA8B,OAAA;AAE/D,IAAA,KAAA,MAAW,OAAA,IAAW,QAAA,CAAS,OAAA,IAAW,EAAC,EAAG;AAC5C,MAAA,IAAI,OAAA,CAAQ,SAAS,WAAA,EAAa;AAChC,QAAA,MAAM,OAAA,GAAW,OAAA,CAAQ,KAAA,EAAO,GAAA,IAA8B,OAAA;AAC9D,QAAA,MAAM,YAAY,OAAA,KAAY,KAAA;AAC9B,QAAA,MAAM,cAAc,oBAAA,CAAqB,OAAA,CAAQ,OAAA,IAAW,IAAI,SAAS,CAAA;AAEzE,QAAA,KAAA,CAAM,IAAA,CAAK;AAAA,UACT,IAAA,EAAM,WAAA,CAAY,MAAA,GAAS,CAAA,GAAI,WAAA,GAAc,GAAA;AAAA,UAC7C,SAAA,EAAW,YAAY,OAAA,GAAU;AAAA,SAClC,CAAA;AAAA,MACH,CAAA,MAAA,IAAW,OAAA,CAAQ,IAAA,KAAS,YAAA,EAAc;AACxC,QAAA,MAAM,cAAyB,EAAC;AAChC,QAAA,MAAM,iBAAA,CAAkB,OAAA,EAAS,WAAA,EAAa,OAAO,CAAA;AACrD,QAAA,IAAI,WAAA,CAAY,SAAS,CAAA,EAAG;AAC1B,UAAA,KAAA,CAAM,IAAA,CAAK,EAAE,EAAA,EAAI,WAAA,EAAa,CAAA;AAAA,QAChC;AAAA,MACF,CAAA,MAAA,IAAW,OAAA,CAAQ,IAAA,KAAS,aAAA,EAAe;AACzC,QAAA,MAAM,cAAyB,EAAC;AAChC,QAAA,MAAM,iBAAA,CAAkB,OAAA,EAAS,WAAA,EAAa,OAAO,CAAA;AACrD,QAAA,IAAI,WAAA,CAAY,SAAS,CAAA,EAAG;AAC1B,UAAA,KAAA,CAAM,IAAA,CAAK,EAAE,EAAA,EAAI,WAAA,EAAa,CAAA;AAAA,QAChC;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAEA,EAAA,IAAI,KAAA,CAAM,SAAS,CAAA,EAAG;AACpB,IAAA,OAAA,CAAQ,iBAAiB,IAAA,CAAK;AAAA,MAC5B,EAAA,EAAI,KAAA;AAAA,MACJ,MAAA,EAAQ,CAAC,CAAA,EAAG,CAAA,EAAG,GAAG,CAAC;AAAA,KACpB,CAAA;AAAA,EACH;AACF,CAAA;AAKA,IAAM,eAAA,GAAkB,OACtB,IAAA,EACA,OAAA,KACkB;AAClB,EAAA,KAAA,MAAW,QAAA,IAAY,IAAA,CAAK,OAAA,IAAW,EAAC,EAAG;AACzC,IAAA,MAAM,SAAA,GAAY,QAAA,CAAS,KAAA,EAAO,OAAA,KAAY,IAAA;AAC9C,IAAA,MAAM,OAAA,GAAW,QAAA,CAAS,KAAA,EAAO,GAAA,IAA8B,KAAK,KAAA,EAAO,GAAA;AAC3E,IAAA,MAAM,QAAA,GAAW,YAAY,SAAA,GAAO,SAAA;AAEpC,IAAA,KAAA,MAAW,IAAA,IAAQ,QAAA,CAAS,OAAA,IAAW,EAAC,EAAG;AACzC,MAAA,IAAI,IAAA,CAAK,SAAS,WAAA,EAAa;AAC7B,QAAA,MAAM,OAAA,GAAW,IAAA,CAAK,KAAA,EAAO,GAAA,IAA8B,OAAA;AAC3D,QAAA,MAAM,YAAY,OAAA,KAAY,KAAA;AAC9B,QAAA,MAAM,cAAc,oBAAA,CAAqB,IAAA,CAAK,OAAA,IAAW,IAAI,SAAS,CAAA;AAEtE,QAAA,OAAA,CAAQ,iBAAiB,IAAA,CAAK;AAAA,UAC5B,IAAA,EAAM,CAAC,QAAA,EAAU,GAAI,KAAA,CAAM,OAAA,CAAQ,WAAW,CAAA,GAAI,WAAA,GAAc,CAAC,WAAW,CAAE,CAAA;AAAA,UAC9E,SAAA,EAAW,YAAY,OAAA,GAAU,MAAA;AAAA,UACjC,MAAA,EAAQ,CAAC,CAAA,EAAG,CAAA,EAAG,GAAG,CAAC;AAAA,SACpB,CAAA;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACF,CAAA;AAKA,IAAM,YAAA,GAAe,OACnB,IAAA,EACA,OAAA,KACkB;AAClB,EAAA,MAAM,YAA2B,EAAC;AAElC,EAAA,KAAA,MAAW,GAAA,IAAO,IAAA,CAAK,OAAA,IAAW,EAAC,EAAG;AACpC,IAAA,MAAM,WAAwB,EAAC;AAE/B,IAAA,KAAA,MAAW,IAAA,IAAQ,GAAA,CAAI,OAAA,IAAW,EAAC,EAAG;AACpC,MAAA,MAAM,cAAyB,EAAC;AAEhC,MAAA,KAAA,MAAW,IAAA,IAAQ,IAAA,CAAK,OAAA,IAAW,EAAC,EAAG;AACrC,QAAA,IAAI,IAAA,CAAK,SAAS,WAAA,EAAa;AAC7B,UAAA,MAAM,OAAA,GACH,IAAA,CAAK,KAAA,EAAO,GAAA,IACZ,IAAA,CAAK,KAAA,EAAO,GAAA,IACZ,GAAA,CAAI,KAAA,EAAO,GAAA,IACX,IAAA,CAAK,KAAA,EAAO,GAAA;AACf,UAAA,MAAM,YAAY,OAAA,KAAY,KAAA;AAC9B,UAAA,MAAM,cAAc,oBAAA,CAAqB,IAAA,CAAK,OAAA,IAAW,IAAI,SAAS,CAAA;AAEtE,UAAA,WAAA,CAAY,IAAA,CAAK;AAAA,YACf,IAAA,EAAM,WAAA,CAAY,MAAA,GAAS,CAAA,GAAI,WAAA,GAAc,GAAA;AAAA,YAC7C,SAAA,EAAW,YAAY,OAAA,GAAU;AAAA,WAClC,CAAA;AAAA,QACH;AAAA,MACF;AAEA,MAAA,QAAA,CAAS,IAAA,CAAK;AAAA,QACZ,KAAA,EAAO,YAAY,MAAA,GAAS,CAAA,GAAI,cAAc,CAAC,EAAE,IAAA,EAAM,GAAA,EAAK,CAAA;AAAA,QAC5D,MAAA,EAAQ,CAAC,CAAA,EAAG,CAAA,EAAG,GAAG,CAAC;AAAA,OACpB,CAAA;AAAA,IACH;AAEA,IAAA,IAAI,QAAA,CAAS,SAAS,CAAA,EAAG;AACvB,MAAA,SAAA,CAAU,KAAK,QAAQ,CAAA;AAAA,IACzB;AAAA,EACF;AAEA,EAAA,IAAI,SAAA,CAAU,SAAS,CAAA,EAAG;AACxB,IAAA,MAAM,QAAA,GAAW,SAAA,CAAU,CAAC,CAAA,CAAE,MAAA;AAC9B,IAAA,OAAA,CAAQ,iBAAiB,IAAA,CAAK;AAAA,MAC5B,KAAA,EAAO;AAAA,QACL,UAAA,EAAY,CAAA;AAAA,QACZ,MAAA,EAAQ,KAAA,CAAM,QAAQ,CAAA,CAAE,KAAK,GAAG,CAAA;AAAA,QAChC,IAAA,EAAM;AAAA,OACR;AAAA,MACA,MAAA,EAAQ,sBAAA;AAAA,MACR,MAAA,EAAQ,CAAC,CAAA,EAAG,EAAA,EAAI,GAAG,EAAE;AAAA,KACtB,CAAA;AAAA,EACH;AACF,CAAA;AAKA,IAAM,iBAAA,GAAoB,OACxB,IAAA,EACA,OAAA,KACkB;AAClB,EAAA,MAAM,OAAA,GAAU,KAAK,KAAA,EAAO,GAAA;AAE5B,EAAA,KAAA,MAAW,IAAA,IAAQ,IAAA,CAAK,OAAA,IAAW,EAAC,EAAG;AACrC,IAAA,IAAI,IAAA,CAAK,SAAS,WAAA,EAAa;AAC7B,MAAA,MAAM,OAAA,GAAW,IAAA,CAAK,KAAA,EAAO,GAAA,IAA8B,OAAA;AAC3D,MAAA,MAAM,YAAY,OAAA,KAAY,KAAA;AAC9B,MAAA,MAAM,cAAc,oBAAA,CAAqB,IAAA,CAAK,OAAA,IAAW,IAAI,SAAS,CAAA;AAEtE,MAAA,OAAA,CAAQ,iBAAiB,IAAA,CAAK;AAAA,QAC5B,IAAA,EAAM,WAAA,CAAY,MAAA,GAAS,CAAA,GAAI,WAAA,GAAc,GAAA;AAAA,QAC7C,MAAA,EAAQ,CAAC,EAAA,EAAI,CAAA,EAAG,IAAI,CAAC,CAAA;AAAA,QACrB,OAAA,EAAS,IAAA;AAAA,QACT,KAAA,EAAO,QAAA;AAAA,QACP,SAAA,EAAW,YAAY,OAAA,GAAU;AAAA,OAClC,CAAA;AAAA,IACH,CAAA,MAAO;AAEL,MAAA,MAAMK,YAAAA,CAAY,MAAM,OAAO,CAAA;AAAA,IACjC;AAAA,EACF;AACF,CAAA;AAKA,IAAM,gBAAA,GAAmB,OACvB,IAAA,EACA,OAAA,KACkB;AAClB,EAAA,MAAM,SAAA,GAAY,IAAA,CAAK,OAAA,EAAS,GAAA,CAAI,CAAC,CAAA,KAAM,CAAA,CAAE,IAAA,IAAQ,EAAE,CAAA,CAAE,IAAA,CAAK,IAAI,CAAA,IAAK,EAAA;AACvE,EAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,KAAA,EAAO,GAAA,KAAQ,KAAA;AAElC,EAAA,OAAA,CAAQ,iBAAiB,IAAA,CAAK;AAAA,IAC5B,IAAA,EAAM,SAAA;AAAA,IACN,IAAA,EAAM,SAAA;AAAA,IACN,QAAA,EAAU,EAAA;AAAA,IACV,UAAA,EAAY,QAAA;AAAA,IACZ,MAAA,EAAQ,CAAC,CAAA,EAAG,CAAA,EAAG,GAAG,CAAC,CAAA;AAAA,IACnB,SAAA,EAAW,QAAQ,OAAA,GAAU,MAAA;AAAA,IAC7B,qBAAA,EAAuB;AAAA,GACxB,CAAA;AACH,CAAA;AAKA,IAAM,qBAAA,GAAwB,CAAC,OAAA,KAAwC;AACrE,EAAA,OAAA,CAAQ,iBAAiB,IAAA,CAAK;AAAA,IAC5B,MAAA,EAAQ;AAAA,MACN;AAAA,QACE,IAAA,EAAM,MAAA;AAAA,QACN,EAAA,EAAI,CAAA;AAAA,QACJ,EAAA,EAAI,CAAA;AAAA,QACJ,EAAA,EAAI,GAAA;AAAA,QACJ,EAAA,EAAI,CAAA;AAAA,QACJ,SAAA,EAAW,CAAA;AAAA,QACX,SAAA,EAAW;AAAA;AACb,KACF;AAAA,IACA,MAAA,EAAQ,CAAC,CAAA,EAAG,EAAA,EAAI,GAAG,EAAE;AAAA,GACtB,CAAA;AACH,CAAA;AAKO,IAAMA,YAAAA,GAAc,OACzB,IAAA,EACA,OAAA,KACkB;AAClB,EAAA,MAAM,OAAA,GAAU,KAAK,KAAA,EAAO,GAAA;AAG5B,EAAA,IAAI,OAAA,EAAS;AACX,IAAA,OAAA,CAAQ,kBAAA,GAAqB,OAAA;AAAA,EAC/B;AAEA,EAAA,QAAQ,KAAK,IAAA;AAAM,IACjB,KAAK,WAAA;AACH,MAAA,MAAM,gBAAA,CAAiB,MAAM,OAAO,CAAA;AACpC,MAAA;AAAA,IAEF,KAAK,OAAA;AAAA,IACL,KAAK,gBAAA;AAAA,IACL,KAAK,aAAA,EAAe;AAClB,MAAA,MAAM,YAAA,GAAe,OAAA,KAAY,KAAA,IAAS,OAAA,CAAQ,kBAAA,KAAuB,KAAA;AACzE,MAAA,MAAM,eAAe,MAAM,gBAAA;AAAA,QACzB,IAAA;AAAA,QACA,OAAA;AAAA,QACA,eAAe,OAAA,GAAU;AAAA,OAC3B;AACA,MAAA,IAAI,YAAA,EAAc;AAChB,QAAA,OAAA,CAAQ,gBAAA,CAAiB,KAAK,YAAY,CAAA;AAAA,MAC5C;AACA,MAAA;AAAA,IACF;AAAA,IAEA,KAAK,SAAA;AACH,MAAA,MAAM,cAAA,CAAe,MAAM,OAAO,CAAA;AAClC,MAAA;AAAA,IAEF,KAAK,YAAA;AACH,MAAA,MAAM,iBAAA,CAAkB,MAAM,OAAO,CAAA;AACrC,MAAA;AAAA,IAEF,KAAK,aAAA;AACH,MAAA,MAAM,kBAAA,CAAmB,MAAM,OAAO,CAAA;AACtC,MAAA;AAAA,IAEF,KAAK,UAAA;AACH,MAAA,MAAM,eAAA,CAAgB,MAAM,OAAO,CAAA;AACnC,MAAA;AAAA,IAEF,KAAK,OAAA;AACH,MAAA,MAAM,YAAA,CAAa,MAAM,OAAO,CAAA;AAChC,MAAA;AAAA,IAEF,KAAK,YAAA;AACH,MAAA,MAAM,iBAAA,CAAkB,MAAM,OAAO,CAAA;AACrC,MAAA;AAAA,IAEF,KAAK,WAAA;AACH,MAAA,MAAM,gBAAA,CAAiB,MAAM,OAAO,CAAA;AACpC,MAAA;AAAA,IAEF,KAAK,gBAAA;AACH,MAAA,qBAAA,CAAsB,OAAO,CAAA;AAC7B,MAAA;AAAA,IAEF,KAAK,WAAA;AACH,MAAA,OAAA,CAAQ,gBAAA,CAAiB,IAAA,CAAK,EAAE,IAAA,EAAM,MAAM,CAAA;AAC5C,MAAA;AAAA,IAEF;AAEE,MAAA,IAAI,KAAK,OAAA,EAAS;AAChB,QAAA,KAAA,MAAW,KAAA,IAAS,KAAK,OAAA,EAAS;AAChC,UAAA,MAAMA,YAAAA,CAAY,OAAO,OAAO,CAAA;AAAA,QAClC;AAAA,MACF;AAAA;AAEN,CAAA;;;ACneA,OAAA,CAAQ,MAAM,QAAA,CAAS,GAAA;AAKhB,IAAM,WAAA,GAAc,OACzB,MAAA,EACA,QAAA,GAAmB,cAAA,KACD;AAClB,EAAA,IAAI,CAAC,MAAA,EAAQ;AAEb,EAAA,MAAM,IAAA,GAAO,OAAO,OAAA,EAAQ;AAG5B,EAAA,MAAM,UAAUD,wBAAAA,EAAwB;AAGxC,EAAA,KAAA,MAAW,IAAA,IAAS,IAAA,CAAK,OAAA,IAAW,EAAC,EAAiB;AACpD,IAAA,MAAMC,YAAAA,CAAY,MAAM,OAAO,CAAA;AAAA,EACjC;AAGA,EAAA,MAAM,aAAA,GAAsC;AAAA,IAC1C,IAAA,EAAM;AAAA,MACJ,KAAA,EAAO,QAAA,CAAS,OAAA,CAAQ,SAAA,EAAW,EAAE,CAAA;AAAA,MACrC,OAAA,EAAS,YAAA;AAAA,MACT,QAAA,EAAU;AAAA,KACZ;AAAA,IACA,QAAA,EAAU,IAAA;AAAA,IACV,WAAA,EAAa,CAAC,EAAA,EAAI,EAAA,EAAI,IAAI,EAAE,CAAA;AAAA,IAC5B,OAAA,EAAS,OAAA,CAAQ,gBAAA,CAAiB,MAAA,GAAS,CAAA,GACvC,OAAA,CAAQ,gBAAA,GACR,CAAC,EAAE,IAAA,EAAM,GAAA,EAAK,CAAA;AAAA;AAAA,IAClB,YAAA,EAAc;AAAA,MACZ,IAAA,EAAM,QAAA;AAAA,MACN,QAAA,EAAU,EAAA;AAAA,MACV,UAAA,EAAY;AAAA,KACd;AAAA,IACA,MAAA,EAAQ;AAAA,MACN,MAAA,EAAQ;AAAA,QACN,QAAA,EAAU,EAAA;AAAA,QACV,IAAA,EAAM,IAAA;AAAA,QACN,MAAA,EAAQ,CAAC,CAAA,EAAG,CAAA,EAAG,GAAG,EAAE;AAAA;AACtB;AACF,GACF;AAGA,EAAA,OAAA,CAAQ,SAAA,CAAU,aAAa,CAAA,CAAE,QAAA,CAAS,QAAQ,CAAA;AACpD","file":"index.mjs","sourcesContent":["import { create } from \"zustand\";\nimport { type Editor } from \"@tiptap/react\";\n\ninterface EditorState {\n  editor: Editor | null;\n  setEditor: (editor: Editor | null) => void;\n}\n\nexport const useEditorStore = create<EditorState>((set) => ({\n  editor: null,\n  setEditor: (editor) => set({ editor }),\n}));\n\n","import { Extension } from \"@tiptap/react\";\nimport \"@tiptap/extension-text-style\";\n\ndeclare module \"@tiptap/core\" {\n  interface Commands<ReturnType> {\n    fontSize: {\n      setFontSize: (size: string) => ReturnType;\n      unsetFontSize: () => ReturnType;\n    };\n  }\n}\n\nexport const FontSizeExtension = Extension.create({\n  name: \"fontSize\",\n\n  addOptions() {\n    return {\n      types: [\"textStyle\"],\n    };\n  },\n\n  addGlobalAttributes() {\n    return [\n      {\n        types: this.options.types,\n        attributes: {\n          fontSize: {\n            default: null,\n            parseHTML: (element) => element.style.fontSize,\n            renderHTML: (attributes) => {\n              if (!attributes.fontSize) {\n                return {};\n              }\n\n              return {\n                style: `font-size: ${attributes.fontSize}`,\n              };\n            },\n          },\n        },\n      },\n    ];\n  },\n\n  addCommands() {\n    return {\n      setFontSize:\n        (fontSize: string) =>\n        ({ chain }) => {\n          return chain().setMark(\"textStyle\", { fontSize }).run();\n        },\n\n      unsetFontSize:\n        () =>\n        ({ chain }) => {\n          return chain()\n            .setMark(\"textStyle\", { fontSize: null })\n            .removeEmptyTextStyle()\n            .run();\n        },\n    };\n  },\n});\n\n","import { Extension } from \"@tiptap/react\";\n\ndeclare module \"@tiptap/core\" {\n  interface Commands<ReturnType> {\n    LineHeight: {\n      setLineHeight: (LineHeight: string) => ReturnType;\n      unsetLineHeight: () => ReturnType;\n    };\n  }\n}\n\nexport const LineHeightExtension = Extension.create({\n  name: \"lineHeight\",\n\n  addOptions() {\n    return {\n      types: [\"paragraph\", \"heading\"],\n      defaultLineHeight: \"normal\",\n    };\n  },\n\n  addGlobalAttributes() {\n    return [\n      {\n        types: this.options.types,\n        attributes: {\n          lineHeight: {\n            default: this.options.defaultLineHeight,\n            renderHTML: (attributes) => {\n              if (!attributes.lineHeight) return {};\n              return {\n                style: `line-height: ${attributes.lineHeight}`,\n              };\n            },\n            parseHTML: (element) => {\n              return element.style.lineHeight || this.options.defaultLineHeight;\n            },\n          },\n        },\n      },\n    ];\n  },\n\n  addCommands() {\n    return {\n      setLineHeight:\n        (lineHeight: string) =>\n        ({ tr, state, dispatch }) => {\n          const { selection } = state;\n          tr = tr.setSelection(selection);\n\n          const { from, to } = selection;\n          state.doc.nodesBetween(from, to, (node, pos) => {\n            if (this.options.types.includes(node.type.name)) {\n              tr = tr.setNodeMarkup(pos, undefined, {\n                ...node.attrs,\n                lineHeight,\n              });\n            }\n          });\n\n          if (dispatch) dispatch(tr);\n          return true;\n        },\n\n      unsetLineHeight:\n        () =>\n        ({ tr, state, dispatch }) => {\n          const { selection } = state;\n          tr = tr.setSelection(selection);\n\n          const { from, to } = selection;\n          state.doc.nodesBetween(from, to, (node, pos) => {\n            if (this.options.types.includes(node.type.name)) {\n              tr = tr.setNodeMarkup(pos, undefined, {\n                ...node.attrs,\n                lineHeight: this.options.defaultLineHeight,\n              });\n            }\n          });\n\n          if (dispatch) dispatch(tr);\n          return true;\n        },\n    };\n  },\n});\n\n","import { Extension } from \"@tiptap/react\";\n\ndeclare module \"@tiptap/core\" {\n  interface Commands<ReturnType> {\n    textDirection: {\n      setTextDirection: (direction: \"ltr\" | \"rtl\") => ReturnType;\n      unsetTextDirection: () => ReturnType;\n    };\n  }\n}\n\nexport const TextDirectionExtension = Extension.create({\n  name: \"textDirection\",\n\n  addOptions() {\n    return {\n      types: [\n        \"paragraph\",\n        \"heading\",\n        \"bulletList\",\n        \"orderedList\",\n        \"listItem\",\n        \"taskList\",\n        \"taskItem\",\n        \"codeBlock\",\n        \"blockquote\",\n      ],\n      defaultDirection: \"ltr\" as \"ltr\" | \"rtl\",\n    };\n  },\n\n  addGlobalAttributes() {\n    return [\n      {\n        types: this.options.types,\n        attributes: {\n          dir: {\n            default: this.options.defaultDirection,\n            renderHTML: (attributes) => {\n              if (!attributes.dir) return {};\n              return {\n                dir: attributes.dir,\n                style: `direction: ${attributes.dir}; text-align: ${attributes.dir === \"rtl\" ? \"right\" : \"left\"}`,\n              };\n            },\n            parseHTML: (element) => {\n              return (\n                element.getAttribute(\"dir\") || element.style.direction || null\n              );\n            },\n          },\n        },\n      },\n    ];\n  },\n\n  addCommands() {\n    return {\n      setTextDirection:\n        (direction: \"ltr\" | \"rtl\") =>\n        ({ tr, state, dispatch }) => {\n          const { selection } = state;\n          tr = tr.setSelection(selection);\n\n          const { from, to } = selection;\n          state.doc.nodesBetween(from, to, (node, pos) => {\n            if (this.options.types.includes(node.type.name)) {\n              tr = tr.setNodeMarkup(pos, undefined, {\n                ...node.attrs,\n                dir: direction,\n              });\n            }\n          });\n\n          if (dispatch) dispatch(tr);\n          return true;\n        },\n\n      unsetTextDirection:\n        () =>\n        ({ tr, state, dispatch }) => {\n          const { selection } = state;\n          tr = tr.setSelection(selection);\n\n          const { from, to } = selection;\n          state.doc.nodesBetween(from, to, (node, pos) => {\n            if (this.options.types.includes(node.type.name)) {\n              tr = tr.setNodeMarkup(pos, undefined, {\n                ...node.attrs,\n                dir: null,\n              });\n            }\n          });\n\n          if (dispatch) dispatch(tr);\n          return true;\n        },\n    };\n  },\n});\n\n","import { type LucideProps } from \"lucide-react\";\n\nexport const TextDirectionLtrIcon = ({ className, ...props }: LucideProps) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    fill=\"currentColor\"\n    className={className}\n    {...props}\n  >\n    <path d=\"M10 10v5h2V4h2v11h2V4h2V2h-8C7.79 2 6 3.79 6 6s1.79 4 4 4zM20 18l-4-4v3h-12v2h12v3z\" />\n  </svg>\n);\n\nexport const TextDirectionRtlIcon = ({ className, ...props }: LucideProps) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    fill=\"currentColor\"\n    className={className}\n    {...props}\n  >\n    <path d=\"M10 10v5h2V4h2v11h2V4h2V2h-8C7.79 2 6 3.79 6 6s1.79 4 4 4zM4 18l4-4v3h12v2h-12v3z\" />\n  </svg>\n);\n\n","import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\n","import * as React from \"react\";\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\";\n\nimport { cn } from \"../../lib/utils\";\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n);\nSeparator.displayName = SeparatorPrimitive.Root.displayName;\n\nexport { Separator };\n\n","import * as React from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { Check, ChevronRight, Circle } from \"lucide-react\";\n\nimport { cn } from \"../../lib/utils\";\n\nconst DropdownMenu = DropdownMenuPrimitive.Root;\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger;\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group;\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal;\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub;\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup;\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean;\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n));\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName;\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n));\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName;\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md\",\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n));\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName;\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean;\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n));\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName;\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n));\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName;\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n));\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName;\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean;\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n));\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName;\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n));\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName;\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  );\n};\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\";\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n};\n\n","import * as React from \"react\";\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\";\nimport { X } from \"lucide-react\";\n\nimport { cn } from \"../../lib/utils\";\n\nconst Dialog = DialogPrimitive.Root;\n\nconst DialogTrigger = DialogPrimitive.Trigger;\n\nconst DialogPortal = DialogPrimitive.Portal;\n\nconst DialogClose = DialogPrimitive.Close;\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n));\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n));\nDialogContent.displayName = DialogPrimitive.Content.displayName;\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n);\nDialogHeader.displayName = \"DialogHeader\";\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n);\nDialogFooter.displayName = \"DialogFooter\";\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n));\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nDialogDescription.displayName = DialogPrimitive.Description.displayName;\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n};\n\n","import * as React from \"react\";\n\nimport { cn } from \"../../lib/utils\";\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nInput.displayName = \"Input\";\n\nexport { Input };\n\n","import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"../../lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2\",\n        sm: \"h-8 rounded-md px-3 text-xs\",\n        lg: \"h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };\n\n","import { AlignmentType } from \"docx\";\n\n/**\n * Parse a dimension value from various formats (number, string with units)\n */\nexport const parseDimension = (value: unknown): number | null => {\n  if (typeof value === \"number\") return value;\n  if (typeof value === \"string\") {\n    const parsed = parseFloat(value.replace(/[^0-9.-]/g, \"\"));\n    return isNaN(parsed) ? null : parsed;\n  }\n  return null;\n};\n\n/**\n * Extract width and height from a CSS style string\n */\nexport const extractStyleDimensions = (\n  style: string\n): { width: number | null; height: number | null } => {\n  let width: number | null = null;\n  let height: number | null = null;\n\n  const widthMatch = style.match(/width:\\s*(\\d+(?:\\.\\d+)?)(px|%|em|rem)?/i);\n  if (widthMatch) width = parseFloat(widthMatch[1]);\n\n  const heightMatch = style.match(/height:\\s*(\\d+(?:\\.\\d+)?)(px|%|em|rem)?/i);\n  if (heightMatch) height = parseFloat(heightMatch[1]);\n\n  return { width, height };\n};\n\n/**\n * Extract alignment from a CSS style string\n * Handles float, margin-based centering, text-align, and flexbox\n */\nexport const extractStyleAlignment = (style: string): string | null => {\n  const floatMatch = style.match(/float:\\s*(left|right)/i);\n  if (floatMatch) return floatMatch[1].toLowerCase();\n\n  // Check for margin-based alignment (used by tiptap-extension-resize-image)\n  // Handles both \"margin: 0 0 0 auto\" and \"margin: 0px 0px 0px auto\" formats\n  // Right alignment: margin with only margin-left as auto\n  const rightMarginPattern =\n    /margin:\\s*0(?:px)?\\s+0(?:px)?\\s+0(?:px)?\\s+auto/i;\n  if (\n    rightMarginPattern.test(style) ||\n    (style.includes(\"margin-left: auto\") &&\n      !style.includes(\"margin-right: auto\"))\n  ) {\n    return \"right\";\n  }\n\n  // Left alignment: margin with only margin-right as auto\n  const leftMarginPattern =\n    /margin:\\s*0(?:px)?\\s+auto\\s+0(?:px)?\\s+0(?:px)?/i;\n  if (\n    leftMarginPattern.test(style) ||\n    (style.includes(\"margin-right: auto\") &&\n      !style.includes(\"margin-left: auto\"))\n  ) {\n    return \"left\";\n  }\n\n  // Center alignment: margin: 0 auto OR both margin-left and margin-right are auto\n  const centerMarginPattern = /margin:\\s*0(?:px)?\\s+auto(?:\\s*;|\\s*$)/i;\n  if (\n    centerMarginPattern.test(style) ||\n    (style.includes(\"margin-left: auto\") &&\n      style.includes(\"margin-right: auto\"))\n  ) {\n    return \"center\";\n  }\n\n  const textAlignMatch = style.match(/text-align:\\s*(left|center|right)/i);\n  if (textAlignMatch) return textAlignMatch[1].toLowerCase();\n\n  // Check for flexbox justify-content\n  const justifyMatch = style.match(\n    /justify-content:\\s*(flex-start|flex-end|center|start|end)/i\n  );\n  if (justifyMatch) {\n    const justify = justifyMatch[1].toLowerCase();\n    if (justify === \"flex-start\" || justify === \"start\") return \"left\";\n    if (justify === \"flex-end\" || justify === \"end\") return \"right\";\n    if (justify === \"center\") return \"center\";\n  }\n\n  return null;\n};\n\n/**\n * Get text alignment from node attributes\n */\nexport const getAlignment = (\n  attrs: Record<string, unknown>\n): (typeof AlignmentType)[keyof typeof AlignmentType] | undefined => {\n  if (!attrs?.textAlign) return undefined;\n  const alignMap: Record<\n    string,\n    (typeof AlignmentType)[keyof typeof AlignmentType]\n  > = {\n    left: AlignmentType.LEFT,\n    center: AlignmentType.CENTER,\n    right: AlignmentType.RIGHT,\n    justify: AlignmentType.JUSTIFIED,\n  };\n  return alignMap[attrs.textAlign as string];\n};\n\n/**\n * Get image alignment from various attribute sources\n */\nexport const getImageAlignment = (\n  attrs: Record<string, unknown>\n): (typeof AlignmentType)[keyof typeof AlignmentType] | undefined => {\n  if (attrs?.align) {\n    const align = (attrs.align as string).toLowerCase();\n    if (align === \"center\") return AlignmentType.CENTER;\n    if (align === \"right\") return AlignmentType.RIGHT;\n    if (align === \"left\") return AlignmentType.LEFT;\n  }\n\n  // Check containerStyle (used by tiptap-extension-resize-image for alignment)\n  if (attrs?.containerStyle && typeof attrs.containerStyle === \"string\") {\n    const containerAlign = extractStyleAlignment(attrs.containerStyle);\n    if (containerAlign === \"center\") return AlignmentType.CENTER;\n    if (containerAlign === \"right\") return AlignmentType.RIGHT;\n    if (containerAlign === \"left\") return AlignmentType.LEFT;\n  }\n\n  if (attrs?.style && typeof attrs.style === \"string\") {\n    const styleAlign = extractStyleAlignment(attrs.style);\n    if (styleAlign === \"center\") return AlignmentType.CENTER;\n    if (styleAlign === \"right\") return AlignmentType.RIGHT;\n    if (styleAlign === \"left\") return AlignmentType.LEFT;\n  }\n\n  if (attrs?.textAlign) {\n    const align = (attrs.textAlign as string).toLowerCase();\n    if (align === \"center\") return AlignmentType.CENTER;\n    if (align === \"right\") return AlignmentType.RIGHT;\n    if (align === \"left\") return AlignmentType.LEFT;\n  }\n\n  return undefined;\n};\n\n","import { parseDimension, extractStyleDimensions } from \"./style-utils\";\n\n/**\n * Determine image type from source URL or data URI\n */\nexport const getImageType = (src: string): \"png\" | \"jpg\" | \"gif\" | \"bmp\" => {\n  if (src.startsWith(\"data:\")) {\n    const mimeMatch = src.match(/data:image\\/(\\w+)/);\n    if (mimeMatch) {\n      const mime = mimeMatch[1].toLowerCase();\n      if (mime === \"jpeg\" || mime === \"jpg\") return \"jpg\";\n      if (mime === \"gif\") return \"gif\";\n      if (mime === \"bmp\") return \"bmp\";\n    }\n    return \"png\";\n  }\n  const ext = src.split(\".\").pop()?.toLowerCase().split(\"?\")[0];\n  if (ext === \"jpg\" || ext === \"jpeg\") return \"jpg\";\n  if (ext === \"gif\") return \"gif\";\n  if (ext === \"bmp\") return \"bmp\";\n  return \"png\";\n};\n\n/**\n * Load image via canvas as fallback for CORS-restricted images\n */\nexport const loadImageViaCanvas = (\n  src: string\n): Promise<ArrayBuffer | null> => {\n  return new Promise((resolve) => {\n    const img = document.createElement(\"img\");\n    img.crossOrigin = \"anonymous\";\n    img.onload = () => {\n      try {\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = img.naturalWidth;\n        canvas.height = img.naturalHeight;\n        const ctx = canvas.getContext(\"2d\");\n        if (!ctx) {\n          resolve(null);\n          return;\n        }\n        ctx.drawImage(img, 0, 0);\n        canvas.toBlob((blob) => {\n          if (blob) {\n            blob\n              .arrayBuffer()\n              .then(resolve)\n              .catch(() => resolve(null));\n          } else {\n            resolve(null);\n          }\n        }, \"image/png\");\n      } catch {\n        resolve(null);\n      }\n    };\n    img.onerror = () => resolve(null);\n    img.src = src;\n  });\n};\n\n/**\n * Fetch image data as ArrayBuffer from various sources\n * Handles data URIs, blob URLs, and regular URLs\n */\nexport const fetchImageAsArrayBuffer = async (\n  src: string\n): Promise<ArrayBuffer | null> => {\n  try {\n    if (src.startsWith(\"data:\")) {\n      const base64Data = src.split(\",\")[1];\n      const binaryString = atob(base64Data);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      return bytes.buffer;\n    }\n\n    if (src.startsWith(\"blob:\")) {\n      const response = await fetch(src);\n      if (!response.ok) throw new Error(\"Failed to fetch blob image\");\n      return await response.arrayBuffer();\n    }\n\n    try {\n      const response = await fetch(src);\n      if (!response.ok) throw new Error(\"Failed to fetch image\");\n      return await response.arrayBuffer();\n    } catch {\n      return await loadImageViaCanvas(src);\n    }\n  } catch (error) {\n    console.error(\"Error fetching image:\", error);\n    return null;\n  }\n};\n\n/**\n * Get actual image dimensions by loading the image\n */\nexport const getActualImageDimensions = (\n  src: string\n): Promise<{ naturalWidth: number; naturalHeight: number } | null> => {\n  return new Promise((resolve) => {\n    const img = document.createElement(\"img\");\n    img.crossOrigin = \"anonymous\";\n    img.onload = () => {\n      resolve({\n        naturalWidth: img.naturalWidth,\n        naturalHeight: img.naturalHeight,\n      });\n    };\n    img.onerror = () => resolve(null);\n    img.src = src;\n  });\n};\n\n/**\n * Calculate final image dimensions with aspect ratio preservation\n * and max width constraint\n */\nexport const calculateFinalImageDimensions = async (\n  attrs: Record<string, unknown>,\n  src: string\n): Promise<{ width: number; height: number }> => {\n  const maxWidth = 600;\n\n  // First try to get dimensions from attrs - check multiple possible attribute names\n  let width: number | null = null;\n  let height: number | null = null;\n\n  // Check containerStyle attribute (used by tiptap-extension-resize-image)\n  if (attrs?.containerStyle && typeof attrs.containerStyle === \"string\") {\n    const containerStyleDims = extractStyleDimensions(attrs.containerStyle);\n    if (containerStyleDims.width) width = containerStyleDims.width;\n    if (containerStyleDims.height) height = containerStyleDims.height;\n  }\n\n  // Check style attribute\n  if (attrs?.style && typeof attrs.style === \"string\") {\n    const styleDims = extractStyleDimensions(attrs.style);\n    if (styleDims.width) width = styleDims.width;\n    if (styleDims.height) height = styleDims.height;\n  }\n\n  // Check direct width/height attributes\n  const attrWidth = parseDimension(attrs?.width);\n  const attrHeight = parseDimension(attrs?.height);\n  if (attrWidth) width = attrWidth;\n  if (attrHeight) height = attrHeight;\n\n  // Check data-* attributes (common for resizable images)\n  const dataWidth = parseDimension(attrs?.[\"data-width\"]);\n  const dataHeight = parseDimension(attrs?.[\"data-height\"]);\n  if (dataWidth) width = dataWidth;\n  if (dataHeight) height = dataHeight;\n\n  // Check resized* attributes\n  const resizedWidth = parseDimension(attrs?.resizedWidth);\n  const resizedHeight = parseDimension(attrs?.resizedHeight);\n  if (resizedWidth) width = resizedWidth;\n  if (resizedHeight) height = resizedHeight;\n\n  // If we have both dimensions from attrs, use them\n  if (width && height) {\n    if (width > maxWidth) {\n      const ratio = maxWidth / width;\n      width = maxWidth;\n      height = Math.round(height * ratio);\n    }\n    return { width: Math.round(width), height: Math.round(height) };\n  }\n\n  // If we have at least one dimension, try to get aspect ratio from actual image\n  const actualDims = await getActualImageDimensions(src);\n\n  if (actualDims) {\n    const { naturalWidth, naturalHeight } = actualDims;\n    const aspectRatio = naturalHeight / naturalWidth;\n\n    if (width && !height) {\n      // We have width, calculate height preserving aspect ratio\n      height = Math.round(width * aspectRatio);\n    } else if (height && !width) {\n      // We have height, calculate width preserving aspect ratio\n      width = Math.round(height / aspectRatio);\n    } else {\n      // No dimensions provided - use natural dimensions but cap at maxWidth\n      width = naturalWidth;\n      height = naturalHeight;\n    }\n\n    // Apply max width constraint while preserving aspect ratio\n    if (width > maxWidth) {\n      const ratio = maxWidth / width;\n      width = maxWidth;\n      height = Math.round(height * ratio);\n    }\n\n    return { width: Math.round(width), height: Math.round(height) };\n  }\n\n  // Fallback if we can't load the image\n  if (!width) width = 300;\n  if (!height) height = 300;\n\n  if (width > maxWidth) {\n    const ratio = maxWidth / width;\n    width = maxWidth;\n    height = Math.round(height * ratio);\n  }\n\n  return { width: Math.round(width), height: Math.round(height) };\n};\n\n","/**\n * Normalize color to uppercase hex format (without # prefix)\n * Handles hex colors and rgb() format\n */\nexport const normalizeColor = (color: string | undefined): string | undefined => {\n  if (!color) return undefined;\n  // Remove # prefix if present\n  let normalized = color.replace(/^#/, \"\");\n  // Handle rgb() format\n  const rgbMatch = color.match(/rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/);\n  if (rgbMatch) {\n    const r = parseInt(rgbMatch[1]).toString(16).padStart(2, \"0\");\n    const g = parseInt(rgbMatch[2]).toString(16).padStart(2, \"0\");\n    const b = parseInt(rgbMatch[3]).toString(16).padStart(2, \"0\");\n    normalized = `${r}${g}${b}`;\n  }\n  return normalized.toUpperCase();\n};\n\n/**\n * Map TipTap highlight colors to docx HighlightColor names\n */\nexport const mapHighlightColor = (color: string): string | undefined => {\n  const colorMap: Record<string, string> = {\n    yellow: \"yellow\",\n    green: \"green\",\n    cyan: \"cyan\",\n    magenta: \"magenta\",\n    blue: \"blue\",\n    red: \"red\",\n    darkBlue: \"darkBlue\",\n    darkCyan: \"darkCyan\",\n    darkGreen: \"darkGreen\",\n    darkMagenta: \"darkMagenta\",\n    darkRed: \"darkRed\",\n    darkYellow: \"darkYellow\",\n    darkGray: \"darkGray\",\n    lightGray: \"lightGray\",\n    black: \"black\",\n    white: \"white\",\n  };\n  return colorMap[color.toLowerCase()] || undefined;\n};\n\n/** Valid highlight color type for docx */\nexport type HighlightColor =\n  | \"yellow\"\n  | \"green\"\n  | \"cyan\"\n  | \"magenta\"\n  | \"blue\"\n  | \"red\"\n  | \"darkBlue\"\n  | \"darkCyan\"\n  | \"darkGreen\"\n  | \"darkMagenta\"\n  | \"darkRed\"\n  | \"darkYellow\"\n  | \"darkGray\"\n  | \"lightGray\"\n  | \"black\"\n  | \"white\"\n  | undefined;\n\n","import {\n  TextRun,\n  ExternalHyperlink,\n  ShadingType,\n  UnderlineType,\n} from \"docx\";\nimport type { DocNode, ParagraphChild } from \"./types\";\nimport {\n  normalizeColor,\n  mapHighlightColor,\n  type HighlightColor,\n} from \"./color-utils\";\n\n/**\n * Process text content from TipTap nodes into docx paragraph children\n */\nexport const processTextContent = (\n  content: DocNode[],\n  isRTL: boolean = false\n): ParagraphChild[] => {\n  if (!content || content.length === 0) {\n    return [new TextRun({ text: \"\", rightToLeft: isRTL })];\n  }\n\n  const result: ParagraphChild[] = [];\n\n  for (const item of content) {\n    if (item.type === \"text\") {\n      const marks = item.marks || [];\n\n      // Extract formatting from marks\n      const isBold = marks.some((m) => m.type === \"bold\");\n      const isItalic = marks.some((m) => m.type === \"italic\");\n      const isUnderline = marks.some((m) => m.type === \"underline\");\n      const isStrike = marks.some((m) => m.type === \"strike\");\n      const isSubscript = marks.some((m) => m.type === \"subscript\");\n      const isSuperscript = marks.some((m) => m.type === \"superscript\");\n      const isCode = marks.some((m) => m.type === \"code\");\n\n      // Extract color mark\n      const textColorMark = marks.find((m) => m.type === \"textStyle\");\n      const textColor = normalizeColor(\n        textColorMark?.attrs?.color as string | undefined\n      );\n\n      // Extract highlight mark\n      const highlightMark = marks.find((m) => m.type === \"highlight\");\n      const highlightColorAttr = highlightMark?.attrs?.color as\n        | string\n        | undefined;\n      const highlight = highlightColorAttr\n        ? mapHighlightColor(highlightColorAttr)\n        : undefined;\n\n      // Extract font family from textStyle mark\n      const fontFamily = textColorMark?.attrs?.fontFamily as string | undefined;\n\n      // Extract font size (in pt or px)\n      const fontSizeAttr = textColorMark?.attrs?.fontSize as string | undefined;\n      let fontSize: `${number}pt` | number | undefined;\n      if (fontSizeAttr) {\n        // Parse fontSize - can be \"12pt\", \"16px\", etc.\n        const sizeMatch = fontSizeAttr.match(/^(\\d+(?:\\.\\d+)?)(pt|px)?$/);\n        if (sizeMatch) {\n          const value = parseFloat(sizeMatch[1]);\n          const unit = sizeMatch[2] || \"pt\";\n          // docx uses half-points for number, or string like \"12pt\"\n          fontSize =\n            unit === \"px\"\n              ? (`${Math.round(value * 0.75)}pt` as `${number}pt`)\n              : (`${value}pt` as `${number}pt`);\n        }\n      }\n\n      // Check for link mark\n      const linkMark = marks.find((m) => m.type === \"link\");\n      if (linkMark && linkMark.attrs?.href) {\n        result.push(\n          new ExternalHyperlink({\n            children: [\n              new TextRun({\n                text: item.text || \"\",\n                style: \"Hyperlink\",\n                bold: isBold,\n                italics: isItalic,\n                underline: isUnderline\n                  ? { type: UnderlineType.SINGLE }\n                  : undefined,\n                strike: isStrike,\n                rightToLeft: isRTL,\n                color: textColor,\n                size: fontSize,\n                font: fontFamily ? { name: fontFamily } : undefined,\n              }),\n            ],\n            link: linkMark.attrs.href as string,\n          })\n        );\n      } else {\n        result.push(\n          new TextRun({\n            text: item.text || \"\",\n            bold: isBold,\n            italics: isItalic,\n            underline: isUnderline ? { type: UnderlineType.SINGLE } : undefined,\n            strike: isStrike,\n            subScript: isSubscript,\n            superScript: isSuperscript,\n            rightToLeft: isRTL,\n            color: textColor,\n            highlight: highlight as HighlightColor,\n            size: fontSize,\n            font: isCode\n              ? { name: \"Courier New\" }\n              : fontFamily\n                ? { name: fontFamily }\n                : undefined,\n            // Use shading for custom highlight colors not in the standard list\n            shading:\n              highlightColorAttr && !highlight\n                ? {\n                    type: ShadingType.SOLID,\n                    color: normalizeColor(highlightColorAttr),\n                    fill: normalizeColor(highlightColorAttr),\n                  }\n                : undefined,\n          })\n        );\n      }\n    } else if (item.type === \"hardBreak\") {\n      result.push(new TextRun({ break: 1 }));\n    }\n  }\n\n  return result.length > 0\n    ? result\n    : [new TextRun({ text: \"\", rightToLeft: isRTL })];\n};\n\n","import {\n  Paragraph,\n  TextRun,\n  ImageRun,\n  HeadingLevel,\n  AlignmentType,\n  Table,\n  TableRow,\n  TableCell,\n  WidthType,\n  TableLayoutType,\n  CheckBox,\n  convertInchesToTwip,\n  ShadingType,\n  HorizontalPositionAlign,\n  HorizontalPositionRelativeFrom,\n  VerticalPositionAlign,\n  VerticalPositionRelativeFrom,\n  TextWrappingType,\n} from \"docx\";\nimport type { DocNode } from \"./types\";\nimport { getAlignment, getImageAlignment } from \"./style-utils\";\nimport {\n  getImageType,\n  fetchImageAsArrayBuffer,\n  calculateFinalImageDimensions,\n} from \"./image-utils\";\nimport { processTextContent } from \"./text-processor\";\n\n/**\n * Check if a node is an image node\n */\nexport const isImageNode = (node: DocNode): boolean => {\n  return (\n    node.type === \"image\" ||\n    node.type === \"resizableImage\" ||\n    node.type === \"imageResize\"\n  );\n};\n\n/**\n * Create a paragraph containing an image with proper alignment\n */\nexport const createImageParagraph = async (\n  item: DocNode,\n  parentAlignment?: (typeof AlignmentType)[keyof typeof AlignmentType],\n  isRTL: boolean = false\n): Promise<Paragraph | null> => {\n  const src = item.attrs?.src as string;\n  if (!src) {\n    console.warn(\"Image node has no src:\", item);\n    return null;\n  }\n\n  const imageData = await fetchImageAsArrayBuffer(src);\n  if (!imageData) {\n    console.warn(\"Failed to fetch image data for:\", src.substring(0, 100));\n    return null;\n  }\n\n  // Use async dimension calculation to preserve aspect ratio\n  const { width, height } = await calculateFinalImageDimensions(\n    item.attrs || {},\n    src\n  );\n  const imageType = getImageType(src);\n  const imageAlignment = getImageAlignment(item.attrs || {});\n\n  // For RTL content: if no explicit alignment, default to RIGHT (which is the natural start for RTL)\n  // If there's an explicit alignment, use it; otherwise use parent alignment or RTL default\n  let finalAlignment = imageAlignment || parentAlignment;\n  if (isRTL && !finalAlignment) {\n    finalAlignment = AlignmentType.RIGHT;\n  }\n\n  // Use floating positioning for explicit alignment (more reliable in DOCX)\n  // Map alignment to horizontal position\n  let horizontalAlign:\n    | (typeof HorizontalPositionAlign)[keyof typeof HorizontalPositionAlign]\n    | undefined;\n  const alignStr = String(finalAlignment);\n  if (alignStr === \"right\") {\n    horizontalAlign = HorizontalPositionAlign.RIGHT;\n  } else if (alignStr === \"center\") {\n    horizontalAlign = HorizontalPositionAlign.CENTER;\n  } else if (alignStr === \"left\") {\n    horizontalAlign = HorizontalPositionAlign.LEFT;\n  }\n\n  // If we have explicit alignment, use floating image for reliable positioning\n  if (horizontalAlign) {\n    return new Paragraph({\n      children: [\n        new ImageRun({\n          data: imageData,\n          transformation: { width, height },\n          type: imageType,\n          floating: {\n            horizontalPosition: {\n              relative: HorizontalPositionRelativeFrom.MARGIN,\n              align: horizontalAlign,\n            },\n            verticalPosition: {\n              relative: VerticalPositionRelativeFrom.PARAGRAPH,\n              align: VerticalPositionAlign.TOP,\n            },\n            wrap: {\n              type: TextWrappingType.TOP_AND_BOTTOM,\n            },\n          },\n        }),\n      ],\n      bidirectional: isRTL ? true : undefined,\n    });\n  }\n\n  // Fallback to inline image with paragraph alignment\n  return new Paragraph({\n    children: [\n      new ImageRun({\n        data: imageData,\n        transformation: { width, height },\n        type: imageType,\n      }),\n    ],\n    alignment: finalAlignment,\n    bidirectional: isRTL ? true : undefined,\n  });\n};\n\n/**\n * Context for node processing (tracks list counters and direction)\n */\nexport interface ProcessingContext {\n  documentChildren: (Paragraph | Table)[];\n  bulletListInstanceCounter: number;\n  orderedListInstanceCounter: number;\n  lastKnownDirection: \"rtl\" | \"ltr\" | null;\n}\n\n/**\n * Create initial processing context\n */\nexport const createProcessingContext = (): ProcessingContext => ({\n  documentChildren: [],\n  bulletListInstanceCounter: 0,\n  orderedListInstanceCounter: 0,\n  lastKnownDirection: null,\n});\n\n/**\n * Process a single TipTap node and add to document children\n */\nexport const processNode = async (\n  node: DocNode,\n  context: ProcessingContext,\n  listLevel: number = 0\n): Promise<void> => {\n  const nodeDir = node.attrs?.dir as string | undefined;\n  const isNodeRTL = nodeDir === \"rtl\";\n\n  // Update direction tracking when we see text content with direction\n  if (nodeDir) {\n    context.lastKnownDirection = nodeDir as \"rtl\" | \"ltr\";\n  }\n\n  switch (node.type) {\n    case \"paragraph\": {\n      const hasImage = node.content?.some((item) => isImageNode(item));\n      const baseAlignment = getAlignment(node.attrs || {});\n\n      // For RTL: bidirectional + START alignment (START = right side in RTL mode)\n      const rtlOptions = isNodeRTL\n        ? { bidirectional: true, alignment: AlignmentType.START }\n        : {};\n\n      if (hasImage) {\n        for (const item of node.content || []) {\n          if (isImageNode(item)) {\n            const imgParagraph = await createImageParagraph(\n              item,\n              baseAlignment,\n              isNodeRTL\n            );\n            if (imgParagraph) context.documentChildren.push(imgParagraph);\n          } else if (item.type === \"text\") {\n            const textChildren = processTextContent([item], isNodeRTL);\n            context.documentChildren.push(\n              new Paragraph({\n                children: textChildren,\n                alignment: isNodeRTL ? AlignmentType.START : baseAlignment,\n                ...rtlOptions,\n              })\n            );\n          }\n        }\n      } else {\n        const textChildren = processTextContent(node.content || [], isNodeRTL);\n        context.documentChildren.push(\n          new Paragraph({\n            children: textChildren,\n            alignment: isNodeRTL ? AlignmentType.START : baseAlignment,\n            ...rtlOptions,\n          })\n        );\n      }\n      break;\n    }\n\n    case \"image\":\n    case \"resizableImage\":\n    case \"imageResize\": {\n      // For standalone images, use the tracked direction context if no explicit direction\n      const effectiveRTL = isNodeRTL || context.lastKnownDirection === \"rtl\";\n      const imgParagraph = await createImageParagraph(\n        node,\n        undefined,\n        effectiveRTL\n      );\n      if (imgParagraph) context.documentChildren.push(imgParagraph);\n      break;\n    }\n\n    case \"heading\": {\n      const level = (node.attrs?.level as number) || 1;\n      const headingLevelMap: Record<\n        number,\n        (typeof HeadingLevel)[keyof typeof HeadingLevel]\n      > = {\n        1: HeadingLevel.HEADING_1,\n        2: HeadingLevel.HEADING_2,\n        3: HeadingLevel.HEADING_3,\n        4: HeadingLevel.HEADING_4,\n        5: HeadingLevel.HEADING_5,\n        6: HeadingLevel.HEADING_6,\n      };\n\n      context.documentChildren.push(\n        new Paragraph({\n          children: processTextContent(node.content || [], isNodeRTL),\n          heading: headingLevelMap[level] || HeadingLevel.HEADING_1,\n          bidirectional: isNodeRTL ? true : undefined,\n          alignment: isNodeRTL\n            ? AlignmentType.START\n            : getAlignment(node.attrs || {}),\n        })\n      );\n      break;\n    }\n\n    case \"bulletList\": {\n      context.bulletListInstanceCounter++;\n\n      const processListItems = async (\n        items: DocNode[],\n        level: number,\n        parentDir?: string\n      ) => {\n        for (const listItem of items) {\n          // Direction inheritance: list  listItem  paragraph\n          const itemDir =\n            (listItem.attrs?.dir as string | undefined) || parentDir || nodeDir;\n\n          for (const content of listItem.content || []) {\n            if (\n              content.type === \"bulletList\" ||\n              content.type === \"orderedList\"\n            ) {\n              // Nested list - pass direction down\n              await processListItems(content.content || [], level + 1, itemDir);\n            } else if (content.type === \"paragraph\") {\n              // Check paragraph direction (most specific)\n              const paraDir =\n                (content.attrs?.dir as string | undefined) || itemDir;\n              const isParaRTL = paraDir === \"rtl\";\n\n              context.documentChildren.push(\n                new Paragraph({\n                  children: processTextContent(content.content || [], isParaRTL),\n                  bullet: { level },\n                  bidirectional: isParaRTL ? true : undefined,\n                  alignment: isParaRTL\n                    ? AlignmentType.START\n                    : getAlignment(content.attrs || {}),\n                })\n              );\n            }\n          }\n        }\n      };\n\n      await processListItems(node.content || [], listLevel, nodeDir);\n      break;\n    }\n\n    case \"orderedList\": {\n      context.orderedListInstanceCounter++;\n      const currentInstance = context.orderedListInstanceCounter;\n\n      const processOrderedListItems = async (\n        items: DocNode[],\n        level: number,\n        parentDir?: string\n      ) => {\n        for (const listItem of items) {\n          // Direction inheritance: list  listItem  paragraph\n          const itemDir =\n            (listItem.attrs?.dir as string | undefined) || parentDir || nodeDir;\n\n          for (const content of listItem.content || []) {\n            if (\n              content.type === \"bulletList\" ||\n              content.type === \"orderedList\"\n            ) {\n              // Nested list - pass direction down\n              await processOrderedListItems(\n                content.content || [],\n                level + 1,\n                itemDir\n              );\n            } else if (content.type === \"paragraph\") {\n              // Check paragraph direction (most specific)\n              const paraDir =\n                (content.attrs?.dir as string | undefined) || itemDir;\n              const isParaRTL = paraDir === \"rtl\";\n\n              context.documentChildren.push(\n                new Paragraph({\n                  children: processTextContent(content.content || [], isParaRTL),\n                  numbering: {\n                    reference: \"ordered-list-numbering\",\n                    level,\n                    instance: currentInstance,\n                  },\n                  bidirectional: isParaRTL ? true : undefined,\n                  alignment: isParaRTL\n                    ? AlignmentType.START\n                    : getAlignment(content.attrs || {}),\n                })\n              );\n            }\n          }\n        }\n      };\n\n      await processOrderedListItems(node.content || [], listLevel, nodeDir);\n      break;\n    }\n\n    case \"taskList\": {\n      for (const taskItem of node.content || []) {\n        const isChecked = taskItem.attrs?.checked === true;\n        const itemDir =\n          (taskItem.attrs?.dir as string | undefined) || nodeDir;\n\n        for (const para of taskItem.content || []) {\n          if (para.type === \"paragraph\") {\n            const paraDir =\n              (para.attrs?.dir as string | undefined) || itemDir;\n            const isParaRTL = paraDir === \"rtl\";\n\n            context.documentChildren.push(\n              new Paragraph({\n                children: [\n                  new CheckBox({ checked: isChecked }),\n                  new TextRun({ text: \" \", rightToLeft: isParaRTL }),\n                  ...processTextContent(para.content || [], isParaRTL),\n                ],\n                bidirectional: isParaRTL ? true : undefined,\n                alignment: isParaRTL\n                  ? AlignmentType.START\n                  : getAlignment(para.attrs || {}),\n              })\n            );\n          }\n        }\n      }\n      break;\n    }\n\n    case \"table\": {\n      const firstRow = node.content?.[0];\n      const firstCell = firstRow?.content?.[0];\n      const firstPara = firstCell?.content?.[0];\n      const isTableRTL =\n        firstPara?.attrs?.dir === \"rtl\" ||\n        firstCell?.attrs?.dir === \"rtl\" ||\n        firstRow?.attrs?.dir === \"rtl\" ||\n        node.attrs?.dir === \"rtl\";\n\n      const columnCount = firstRow?.content?.length || 1;\n      const totalTableWidth = 9000;\n      const columnWidth = Math.floor(totalTableWidth / columnCount);\n      const columnWidths = Array(columnCount).fill(columnWidth);\n\n      const tableRows =\n        node.content?.map((row) => {\n          const cells =\n            row.content?.map((cell, cellIndex) => {\n              const cellParagraphs =\n                cell.content?.map((para) => {\n                  const paraDir =\n                    (para.attrs?.dir as string | undefined) ||\n                    (cell.attrs?.dir as string | undefined) ||\n                    (row.attrs?.dir as string | undefined) ||\n                    (node.attrs?.dir as string | undefined);\n                  const isParaRTL = paraDir === \"rtl\" || isTableRTL;\n\n                  return new Paragraph({\n                    children: processTextContent(para.content || [], isParaRTL),\n                    bidirectional: isParaRTL ? true : undefined,\n                    alignment: isParaRTL\n                      ? AlignmentType.START\n                      : getAlignment(para.attrs || {}),\n                  });\n                }) || [new Paragraph({ children: [] })];\n\n              return new TableCell({\n                children: cellParagraphs,\n                width: {\n                  size: columnWidths[cellIndex] || columnWidth,\n                  type: WidthType.DXA,\n                },\n              });\n            }) || [];\n          return new TableRow({ children: cells });\n        }) || [];\n\n      if (tableRows.length > 0) {\n        context.documentChildren.push(\n          new Table({\n            rows: tableRows,\n            columnWidths: columnWidths,\n            layout: TableLayoutType.FIXED,\n            visuallyRightToLeft: isTableRTL,\n            width: { size: totalTableWidth, type: WidthType.DXA },\n          })\n        );\n      }\n      break;\n    }\n\n    case \"blockquote\": {\n      for (const para of node.content || []) {\n        const paraDir = (para.attrs?.dir as string | undefined) || nodeDir;\n        const isParaRTL = paraDir === \"rtl\";\n\n        if (para.type === \"paragraph\") {\n          context.documentChildren.push(\n            new Paragraph({\n              children: processTextContent(para.content || [], isParaRTL),\n              indent: { left: convertInchesToTwip(0.5) },\n              bidirectional: isParaRTL ? true : undefined,\n              alignment: isParaRTL\n                ? AlignmentType.START\n                : getAlignment(para.attrs || {}),\n              shading: {\n                type: ShadingType.SOLID,\n                color: \"F5F5F5\",\n                fill: \"F5F5F5\",\n              },\n            })\n          );\n        } else {\n          // Nested content in blockquote\n          await processNode(para, context);\n        }\n      }\n      break;\n    }\n\n    case \"codeBlock\": {\n      const codeLines =\n        node.content?.map((c) => c.text || \"\").join(\"\\n\") || \"\";\n\n      context.documentChildren.push(\n        new Paragraph({\n          children: [\n            new TextRun({\n              text: codeLines,\n              font: { name: \"Courier New\" },\n              size: \"10pt\",\n              rightToLeft: isNodeRTL,\n            }),\n          ],\n          shading: {\n            type: ShadingType.SOLID,\n            color: \"F0F0F0\",\n            fill: \"F0F0F0\",\n          },\n          bidirectional: isNodeRTL ? true : undefined,\n          alignment: isNodeRTL ? AlignmentType.START : undefined,\n        })\n      );\n      break;\n    }\n\n    case \"horizontalRule\":\n      context.documentChildren.push(\n        new Paragraph({\n          thematicBreak: true,\n        })\n      );\n      break;\n\n    case \"hardBreak\":\n      context.documentChildren.push(new Paragraph({ children: [] }));\n      break;\n\n    default:\n      // Process nested content for unknown node types\n      if (node.content) {\n        for (const child of node.content) {\n          await processNode(child, context, listLevel);\n        }\n      }\n  }\n};\n\n","import { AlignmentType, LevelFormat, convertInchesToTwip, UnderlineType } from \"docx\";\n\n/**\n * Default document styles configuration\n */\nexport const getDocumentStyles = () => ({\n  default: {\n    document: {\n      run: {\n        font: \"Calibri\",\n        size: \"11pt\" as `${number}pt`,\n      },\n    },\n    hyperlink: {\n      run: {\n        color: \"0563C1\",\n        underline: { type: UnderlineType.SINGLE },\n      },\n    },\n  },\n});\n\n/**\n * Numbering configuration for ordered lists\n */\nexport const getNumberingConfig = () => ({\n  config: [\n    {\n      reference: \"ordered-list-numbering\",\n      levels: [\n        {\n          level: 0,\n          format: LevelFormat.DECIMAL,\n          text: \"%1.\",\n          alignment: AlignmentType.LEFT,\n          style: {\n            paragraph: {\n              indent: {\n                left: convertInchesToTwip(0.5),\n                hanging: convertInchesToTwip(0.25),\n              },\n            },\n          },\n        },\n        {\n          level: 1,\n          format: LevelFormat.LOWER_LETTER,\n          text: \"%2.\",\n          alignment: AlignmentType.LEFT,\n          style: {\n            paragraph: {\n              indent: {\n                left: convertInchesToTwip(1),\n                hanging: convertInchesToTwip(0.25),\n              },\n            },\n          },\n        },\n        {\n          level: 2,\n          format: LevelFormat.LOWER_ROMAN,\n          text: \"%3.\",\n          alignment: AlignmentType.LEFT,\n          style: {\n            paragraph: {\n              indent: {\n                left: convertInchesToTwip(1.5),\n                hanging: convertInchesToTwip(0.25),\n              },\n            },\n          },\n        },\n        {\n          level: 3,\n          format: LevelFormat.DECIMAL,\n          text: \"%4.\",\n          alignment: AlignmentType.LEFT,\n          style: {\n            paragraph: {\n              indent: {\n                left: convertInchesToTwip(2),\n                hanging: convertInchesToTwip(0.25),\n              },\n            },\n          },\n        },\n      ],\n    },\n  ],\n});\n\n","import { Editor } from \"@tiptap/react\";\nimport { Document, Packer, Paragraph, TextRun } from \"docx\";\nimport { saveAs } from \"file-saver\";\nimport type { DocNode } from \"./types\";\nimport { processNode, createProcessingContext } from \"./node-processor\";\nimport { getDocumentStyles, getNumberingConfig } from \"./document-config\";\n\n/**\n * Export TipTap editor content to a DOCX file\n */\nexport const exportToDocx = async (\n  editor: Editor | null,\n  filename: string = \"document.docx\"\n) => {\n  if (!editor) return;\n\n  const json = editor.getJSON();\n\n  // Create processing context\n  const context = createProcessingContext();\n\n  // Process all nodes\n  for (const node of (json.content || []) as DocNode[]) {\n    await processNode(node, context);\n  }\n\n  // Create the document with proper styling and numbering configuration\n  const doc = new Document({\n    creator: \"GoatEditor\",\n    title: \"Document\",\n    styles: getDocumentStyles(),\n    numbering: getNumberingConfig(),\n    sections: [\n      {\n        children:\n          context.documentChildren.length > 0\n            ? context.documentChildren\n            : [new Paragraph({ children: [new TextRun(\"\")] })],\n      },\n    ],\n  });\n\n  // Generate and download using Packer\n  const blob = await Packer.toBlob(doc);\n  saveAs(blob, filename);\n};\n\n// Re-export types and utilities for external use\nexport type { DocNode, Mark, ParagraphChild } from \"./types\";\nexport type { ProcessingContext } from \"./node-processor\";\n\n","import { useState } from \"react\";\nimport { ColorResult, SketchPicker } from \"react-color\";\nimport { Level } from \"@tiptap/extension-heading\";\nimport {\n  AlignCenterIcon,\n  AlignJustifyIcon,\n  AlignLeftIcon,\n  AlignRightIcon,\n  BoldIcon,\n  ChevronDownIcon,\n  HighlighterIcon,\n  ImageIcon,\n  ItalicIcon,\n  Link2Icon,\n  ListCollapseIcon,\n  ListIcon,\n  ListOrderedIcon,\n  LucideIcon,\n  MinusIcon,\n  PlusIcon,\n  PrinterIcon,\n  Redo2Icon,\n  SearchIcon,\n  UnderlineIcon,\n  Undo2Icon,\n  UploadIcon,\n} from \"lucide-react\";\nimport { BsFileWord, BsFilePdf } from \"react-icons/bs\";\nimport { TextDirectionLtrIcon, TextDirectionRtlIcon } from \"./components/icons\";\nimport { cn } from \"./lib/utils\";\nimport { Separator } from \"./components/ui/separator\";\nimport { useEditorStore } from \"./store/use-editor-store\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"./components/ui/dropdown-menu\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"./components/ui/dialog\";\nimport { Input } from \"./components/ui/input\";\nimport { Button } from \"./components/ui/button\";\nimport { exportToDocx } from \"./utils/export-docx\";\n\nconst LineHeightButton = () => {\n  const { editor } = useEditorStore();\n  const [isOpen, setIsOpen] = useState(false);\n\n  const lineHeights = [\n    { label: \"Default\", value: \"normal\" },\n    { label: \"Single\", value: \"1\" },\n    { label: \"1.15\", value: \"1.15\" },\n    { label: \"1.5\", value: \"1.5\" },\n    { label: \"Double\", value: \"2\" },\n  ];\n\n  return (\n    <DropdownMenu open={isOpen} onOpenChange={setIsOpen}>\n      <DropdownMenuTrigger asChild>\n        <button\n          data-testid=\"toolbar-line-height\"\n          className=\"h-7 min-w-7 shrink-0 flex flex-col items-center justify-center rounded-sm hover:bg-neutral-200/80 px-1.5 overflow-hidden text-sm\"\n        >\n          <ListCollapseIcon className=\"size-4\" />\n        </button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent className=\"p-1 flex flex-col gap-y-1\">\n        {lineHeights.map(({ label, value }) => (\n          <button\n            key={value}\n            onClick={() => {\n              editor?.chain().focus().setLineHeight(value).run();\n              setIsOpen(false);\n            }}\n            className={cn(\n              \"flex items-center gap-x-2 px-2 py-1 rounded-sm hover:bg-neutral-200/80\",\n              editor?.getAttributes(\"paragraph\").lineHeight === value &&\n                \"bg-neutral-200/80\"\n            )}\n          >\n            <span className=\"text-sm\">{label}</span>\n          </button>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n\nconst FontSizeButton = () => {\n  const { editor } = useEditorStore();\n\n  const currentFontSize = editor?.getAttributes(\"textStyle\").fontSize\n    ? editor?.getAttributes(\"textStyle\").fontSize.replace(\"px\", \"\")\n    : \"16\";\n\n  const [fontSize, setFontSize] = useState(currentFontSize);\n  const [inputValue, setInputvalue] = useState(fontSize);\n  const [isEditing, setIsEditing] = useState(false);\n\n  const updateFontSize = (newSize: string) => {\n    const size = parseInt(newSize);\n    if (!isNaN(size) && size > 0) {\n      editor?.chain().focus().setFontSize(`${size}px`).run();\n      setFontSize(newSize);\n      setInputvalue(newSize);\n      setIsEditing(false);\n    }\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setInputvalue(e.target.value);\n  };\n\n  const handleInputBlur = () => {\n    updateFontSize(inputValue);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      updateFontSize(inputValue);\n      editor?.commands.focus();\n    }\n  };\n\n  const increment = () => {\n    const newSize = parseInt(fontSize) + 1;\n    updateFontSize(newSize.toString());\n  };\n\n  const decrement = () => {\n    const newSize = parseInt(fontSize) - 1;\n    if (newSize > 0) {\n      updateFontSize(newSize.toString());\n    }\n  };\n\n  return (\n    <div\n      data-testid=\"toolbar-font-size\"\n      className=\"flex items-center gap-x-0.5\"\n    >\n      <button\n        data-testid=\"toolbar-font-size-decrease\"\n        onClick={decrement}\n        className=\"h-7 w-7 shrink-0 flex items-center justify-center rounded-sm hover:bg-neutral-200/80\"\n      >\n        <MinusIcon className=\"size-4\" />\n      </button>\n      {isEditing ? (\n        <Input\n          data-testid=\"toolbar-font-size-input\"\n          type=\"text\"\n          value={inputValue}\n          onChange={handleInputChange}\n          onBlur={handleInputBlur}\n          onKeyDown={handleKeyDown}\n          className=\"h-7 w-10 text-sm text-center border border-neutral-400 rounded-sm bg-transparent focus:outline-none focus:ring-0\"\n        />\n      ) : (\n        <button\n          data-testid=\"toolbar-font-size-value\"\n          onClick={() => {\n            setIsEditing(true);\n            setFontSize(currentFontSize);\n          }}\n          className=\"h-7 w-10 text-sm text-center border border-neutral-400 rounded-sm hover:bg-neutral-200/80\"\n        >\n          {currentFontSize}\n        </button>\n      )}\n      <button\n        data-testid=\"toolbar-font-size-increase\"\n        onClick={increment}\n        className=\"h-7 w-7 shrink-0 flex items-center justify-center rounded-sm hover:bg-neutral-200/80\"\n      >\n        <PlusIcon className=\"size-4\" />\n      </button>\n    </div>\n  );\n};\n\nconst ListButton = () => {\n  const { editor } = useEditorStore();\n\n  const lists = [\n    {\n      label: \"Bullet List\",\n      icon: ListIcon,\n      isActive: editor?.isActive(\"bulletList\"),\n      onClick: () => editor?.chain().focus().toggleBulletList().run(),\n      testId: \"toolbar-list-bullet\",\n    },\n    {\n      label: \"Ordered List\",\n      icon: ListOrderedIcon,\n      isActive: editor?.isActive(\"orderedList\"),\n      onClick: () => editor?.chain().focus().toggleOrderedList().run(),\n      testId: \"toolbar-list-ordered\",\n    },\n  ];\n\n  return (\n    <div className=\"flex items-center gap-x-0.5\">\n      {lists.map(({ label, icon, onClick, isActive, testId }) => (\n        <ToolbarButton\n          key={label}\n          icon={icon}\n          onClick={onClick}\n          isActive={isActive}\n          testId={testId}\n        />\n      ))}\n    </div>\n  );\n};\n\nconst AlignButton = () => {\n  const { editor } = useEditorStore();\n  const [isOpen, setIsOpen] = useState(false);\n\n  const alignments = [\n    {\n      label: \"Align left\",\n      value: \"left\",\n      icon: AlignLeftIcon,\n      testId: \"toolbar-align-left\",\n    },\n    {\n      label: \"Align Center\",\n      value: \"center\",\n      icon: AlignCenterIcon,\n      testId: \"toolbar-align-center\",\n    },\n    {\n      label: \"Align Right\",\n      value: \"right\",\n      icon: AlignRightIcon,\n      testId: \"toolbar-align-right\",\n    },\n    {\n      label: \"Align Justified\",\n      value: \"justify\",\n      icon: AlignJustifyIcon,\n      testId: \"toolbar-align-justify\",\n    },\n  ];\n\n  const getCurrentAlignment = () => {\n    if (!editor) return null;\n    const paraAttrs = editor.getAttributes(\"paragraph\");\n    if (paraAttrs.textAlign) return paraAttrs.textAlign;\n    const headingAttrs = editor.getAttributes(\"heading\");\n    if (headingAttrs.textAlign) return headingAttrs.textAlign;\n    return null;\n  };\n\n  const currentAlignment = getCurrentAlignment();\n  const CurrentAlignIcon =\n    alignments.find((a) => a.value === currentAlignment)?.icon || AlignLeftIcon;\n\n  return (\n    <DropdownMenu open={isOpen} onOpenChange={setIsOpen}>\n      <DropdownMenuTrigger asChild>\n        <button\n          data-testid=\"toolbar-align\"\n          className=\"h-7 min-w-7 shrink-0 flex items-center justify-center rounded-sm hover:bg-neutral-200/80 px-1.5 overflow-hidden text-sm\"\n        >\n          <CurrentAlignIcon className=\"size-4\" />\n        </button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent className=\"p-1 flex flex-row gap-x-1\">\n        {alignments.map(({ label, value, icon: Icon, testId }) => (\n          <button\n            key={value}\n            data-testid={testId}\n            onClick={() => {\n              editor?.chain().focus().setTextAlign(value).run();\n              setIsOpen(false);\n            }}\n            className={cn(\n              \"flex items-center justify-center p-2 rounded-sm hover:bg-neutral-200/80\",\n              currentAlignment === value && \"bg-blue-100 text-blue-700\"\n            )}\n            title={label}\n          >\n            <Icon className=\"size-4\" />\n          </button>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n\nconst TextDirectionButton = () => {\n  const { editor } = useEditorStore();\n\n  const getCurrentDirection = () => {\n    if (!editor) return null;\n    const attrs = editor.getAttributes(\"paragraph\");\n    return attrs.dir || null;\n  };\n\n  return (\n    <div className=\"flex items-center gap-x-0.5\">\n      <button\n        data-testid=\"toolbar-ltr\"\n        onClick={() => editor?.chain().focus().setTextDirection(\"ltr\").run()}\n        className={cn(\n          \"h-7 min-w-7 shrink-0 flex items-center justify-center rounded-sm hover:bg-neutral-200/80 px-1.5\",\n          getCurrentDirection() === \"ltr\" && \"bg-neutral-200/80\"\n        )}\n        title=\"Left to Right\"\n      >\n        <TextDirectionLtrIcon className=\"size-4\" />\n      </button>\n      <button\n        data-testid=\"toolbar-rtl\"\n        onClick={() => editor?.chain().focus().setTextDirection(\"rtl\").run()}\n        className={cn(\n          \"h-7 min-w-7 shrink-0 flex items-center justify-center rounded-sm hover:bg-neutral-200/80 px-1.5\",\n          getCurrentDirection() === \"rtl\" && \"bg-neutral-200/80\"\n        )}\n        title=\"Right to Left\"\n      >\n        <TextDirectionRtlIcon className=\"size-4\" />\n      </button>\n    </div>\n  );\n};\n\nconst ImageButton = () => {\n  const { editor } = useEditorStore();\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [imageUrl, setImageUrl] = useState(\"\");\n\n  const onChange = (src: string) => {\n    editor?.chain().focus().setImage({ src }).run();\n  };\n\n  const onUpload = () => {\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = \"image/*\";\n\n    input.onchange = (e) => {\n      const file = (e.target as HTMLInputElement).files?.[0];\n      if (file) {\n        const imageUrl = URL.createObjectURL(file);\n        onChange(imageUrl);\n      }\n    };\n\n    input.click();\n  };\n\n  const handleImageUrlSubmit = () => {\n    if (imageUrl) {\n      onChange(imageUrl);\n      setImageUrl(\"\");\n      setIsDialogOpen(false);\n    }\n  };\n\n  return (\n    <>\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <button\n            data-testid=\"toolbar-image-button\"\n            className=\"h-7 min-w-7 shrink-0 flex flex-col items-center justify-center rounded-sm hover:bg-neutral-200/80 px-1.5 overflow-hidden text-sm\"\n          >\n            <ImageIcon className=\"size-4\" />\n          </button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent>\n          <DropdownMenuItem data-testid=\"toolbar-image-upload\" onClick={onUpload}>\n            <UploadIcon className=\"size-2 mr-2\" />\n            Upload\n          </DropdownMenuItem>\n          <DropdownMenuItem\n            data-testid=\"toolbar-image-url\"\n            onClick={() => setIsDialogOpen(true)}\n          >\n            <SearchIcon className=\"size-2 mr-2\" />\n            Paste image URL\n          </DropdownMenuItem>\n        </DropdownMenuContent>\n      </DropdownMenu>\n\n      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n        <DialogContent data-testid=\"image-url-dialog\">\n          <DialogHeader>\n            <DialogTitle>Insert image URL</DialogTitle>\n          </DialogHeader>\n          <input\n            data-testid=\"image-url-input\"\n            placeholder=\"Insert image URL\"\n            value={imageUrl}\n            onChange={(e) => setImageUrl(e.target.value)}\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\") {\n                handleImageUrlSubmit();\n              }\n            }}\n            className=\"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm\"\n          />\n          <DialogFooter>\n            <Button data-testid=\"image-url-submit\" onClick={handleImageUrlSubmit}>\n              Submit\n            </Button>\n            <Button\n              data-testid=\"image-url-cancel\"\n              onClick={() => setIsDialogOpen(false)}\n            >\n              Cancel\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n};\n\nconst LinkButton = () => {\n  const { editor } = useEditorStore();\n  const [value, setValue] = useState(\"\");\n\n  const onChange = (href: string) => {\n    editor?.chain().focus().extendMarkRange(\"link\").setLink({ href }).run();\n    setValue(\"\");\n  };\n\n  return (\n    <DropdownMenu\n      onOpenChange={(open) => {\n        if (open) {\n          setValue(editor?.getAttributes(\"link\").href || \"\");\n        }\n      }}\n    >\n      <DropdownMenuTrigger asChild>\n        <button\n          data-testid=\"toolbar-link\"\n          className=\"h-7 min-w-7 shrink-0 flex flex-col items-center justify-center rounded-sm hover:bg-neutral-200/80 px-1.5 overflow-hidden text-sm\"\n        >\n          <Link2Icon className=\"size-4\" />\n        </button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent className=\"p-2.5 flex items-center gap-x-2\">\n        <Input\n          data-testid=\"toolbar-link-input\"\n          placeholder=\"https://example.com\"\n          value={value}\n          onChange={(e) => setValue(e.target.value)}\n        />\n        <Button data-testid=\"toolbar-link-apply\" onClick={() => onChange(value)}>\n          Apply\n        </Button>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n\nconst HighlightColorButton = () => {\n  const { editor } = useEditorStore();\n\n  const value = editor?.getAttributes(\"highlight\").color || \"#ffffff\";\n\n  const onChange = (color: ColorResult) => {\n    editor?.chain().focus().setHighlight({ color: color.hex }).run();\n  };\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <button\n          data-testid=\"toolbar-highlight-color\"\n          className=\"h-7 min-w-7 shrink-0 flex flex-col items-center justify-center rounded-sm hover:bg-neutral-200/80 px-1.5 overflow-hidden text-sm\"\n        >\n          <HighlighterIcon className=\"size-4\" />\n        </button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent\n        data-testid=\"toolbar-highlight-color-picker\"\n        className=\"p-0\"\n      >\n        <SketchPicker color={value} onChange={onChange} />\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n\nconst TextColorButton = () => {\n  const { editor } = useEditorStore();\n\n  const value = editor?.getAttributes(\"textStyle\").color || \"#000000\";\n\n  const onChange = (color: ColorResult) => {\n    editor?.chain().focus().setColor(color.hex).run();\n  };\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <button\n          data-testid=\"toolbar-text-color\"\n          className=\"h-7 min-w-7 shrink-0 flex flex-col items-center justify-center rounded-sm hover:bg-neutral-200/80 px-1.5 overflow-hidden text-sm\"\n        >\n          <span className=\"text-xs\">A</span>\n          <div className=\"h-0.5 w-full\" style={{ backgroundColor: value }} />\n        </button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent\n        data-testid=\"toolbar-text-color-picker\"\n        className=\"p-0\"\n      >\n        <SketchPicker color={value} onChange={onChange} />\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n\nconst HeadingLevelButton = () => {\n  const { editor } = useEditorStore();\n  const [isOpen, setIsOpen] = useState(false);\n\n  const headings = [\n    { label: \"Normal text\", value: 0, fontSize: \"16px\" },\n    { label: \"Heading 1\", value: 1, fontSize: \"32px\" },\n    { label: \"Heading 2\", value: 2, fontSize: \"28px\" },\n    { label: \"Heading 3\", value: 3, fontSize: \"24px\" },\n    { label: \"Heading 4\", value: 4, fontSize: \"20px\" },\n    { label: \"Heading 5\", value: 5, fontSize: \"18px\" },\n    { label: \"Heading 6\", value: 6, fontSize: \"16px\" },\n  ];\n\n  const getCurrentHeading = () => {\n    for (let level = 1; level <= 5; level++) {\n      if (editor?.isActive(\"heading\", { level })) {\n        return `heading ${level}`;\n      }\n    }\n    return \"Normal text\";\n  };\n\n  return (\n    <DropdownMenu open={isOpen} onOpenChange={setIsOpen}>\n      <DropdownMenuTrigger asChild>\n        <button\n          data-testid=\"toolbar-heading\"\n          className=\"h-7 min-w-7 shrink-0 flex items-center justify-center rounded-sm hover:bg-neutral-200/80 px-1.5 overflow-hidden text-sm\"\n        >\n          <span className=\"truncate\">{getCurrentHeading()}</span>\n          <ChevronDownIcon className=\"ml-2 size-4 shrink-0\" />\n        </button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent className=\"p-1 flex flex-col gap-y-1\">\n        {headings.map(({ label, value, fontSize }) => (\n          <button\n            key={value}\n            data-testid={`toolbar-heading-${value}`}\n            style={{ fontSize }}\n            onClick={() => {\n              if (value === 0) {\n                editor?.chain().focus().setParagraph().run();\n              } else {\n                editor\n                  ?.chain()\n                  .focus()\n                  .toggleHeading({ level: value as Level })\n                  .run();\n              }\n              setIsOpen(false);\n            }}\n            className={cn(\n              \"flex items-center gap-x-2 px-2 py-1 rounded-sm hover:bg-neutral-200/80\",\n              (value === 0 && !editor?.isActive(\"heading\")) ||\n                (editor?.isActive(\"heading\", { level: value }) &&\n                  \"bg-neutral-200/80\")\n            )}\n          >\n            {label}\n          </button>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n\nconst FontFamilyButton = () => {\n  const { editor } = useEditorStore();\n  const [isOpen, setIsOpen] = useState(false);\n\n  const fonts = [\n    { label: \"Arial\", value: \"Arial\" },\n    { label: \"Times New Roman\", value: \"Times New Roman\" },\n    { label: \"Courier New\", value: \"Courier New\" },\n    { label: \"Georgia\", value: \"Georgia\" },\n    { label: \"Verdana\", value: \"Verdana\" },\n    { label: \"Tahoma\", value: \"Tahoma\" },\n    { label: \"Trebuchet MS\", value: \"Trebuchet MS\" },\n    { label: \"Impact\", value: \"Impact\" },\n    { label: \"Comic Sans MS\", value: \"Comic Sans MS\" },\n    { label: \"Lucida Console\", value: \"Lucida Console\" },\n    { label: \"Lucida Sans Unicode\", value: \"Lucida Sans Unicode\" },\n    { label: \"Arial Black\", value: \"Arial Black\" },\n    { label: \"Helvetica\", value: \"Helvetica\" },\n    { label: \"Palatino Linotype\", value: \"Palatino Linotype\" },\n    { label: \"Book Antiqua\", value: \"Book Antiqua\" },\n    { label: \"Courier\", value: \"Courier\" },\n    { label: \"MS Sans Serif\", value: \"MS Sans Serif\" },\n    { label: \"MS Serif\", value: \"MS Serif\" },\n  ];\n\n  return (\n    <DropdownMenu open={isOpen} onOpenChange={setIsOpen}>\n      <DropdownMenuTrigger asChild>\n        <button\n          data-testid=\"toolbar-font-family\"\n          className=\"h-7 w-[120px] shrink-0 flex items-center justify-between rounded-sm hover:bg-neutral-200/80 px-1.5 overflow-hidden text-sm\"\n        >\n          <span className=\"truncate\">\n            {editor?.getAttributes(\"textStyle\").fontFamily || \"Arial\"}\n          </span>\n          <ChevronDownIcon className=\"ml-2 size-4 shrink-0\" />\n        </button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent\n        data-testid=\"toolbar-font-family-dropdown\"\n        className=\"p-1 flex flex-col gap-y-1\"\n      >\n        {fonts.map(({ label, value }) => (\n          <button\n            onClick={() => {\n              editor?.chain().focus().setFontFamily(value).run();\n              setIsOpen(false);\n            }}\n            key={value}\n            data-testid={`toolbar-font-${value.toLowerCase().replace(/\\s+/g, \"-\")}`}\n            className={cn(\n              \"flex items-center gap-x-2 px-2 py-1 rounded-sm hover:bg-neutral-200/80\",\n              editor?.getAttributes(\"textStyle\").fontfamily === value &&\n                \"bg-neutral-200/80\"\n            )}\n            style={{ fontFamily: value }}\n          >\n            <span className=\"text-sm\">{label}</span>\n          </button>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n\ninterface ToolbarButtonProps {\n  onClick?: () => void;\n  isActive?: boolean;\n  icon: LucideIcon;\n  testId?: string;\n}\n\nconst ToolbarButton = ({\n  onClick,\n  isActive,\n  icon: Icon,\n  testId,\n}: ToolbarButtonProps) => {\n  return (\n    <button\n      onClick={onClick}\n      data-testid={testId}\n      className={cn(\n        \"text-sm h-7 min-w-7 flex items-center justify-center rounded-sm hover:bg-neutral-200/80\",\n        isActive && \"bg-neutral-200/80\"\n      )}\n    >\n      <Icon className=\"size-4\" />\n    </button>\n  );\n};\n\nconst ExportDocxButton = () => {\n  const { editor } = useEditorStore();\n\n  const onSaveDocx = () => {\n    exportToDocx(editor);\n  };\n\n  return (\n    <button\n      data-testid=\"shortcut-export-docx\"\n      onClick={onSaveDocx}\n      className=\"text-sm h-7 min-w-7 flex items-center justify-center rounded-sm hover:bg-neutral-200/80\"\n      title=\"Export to Word (.docx)\"\n    >\n      <BsFileWord className=\"size-4\" />\n    </button>\n  );\n};\n\nconst ExportPdfButton = () => {\n  return (\n    <button\n      data-testid=\"shortcut-export-pdf\"\n      onClick={() => window.print()}\n      className=\"text-sm h-7 min-w-7 flex items-center justify-center rounded-sm hover:bg-neutral-200/80\"\n      title=\"Export to PDF\"\n    >\n      <BsFilePdf className=\"size-4\" />\n    </button>\n  );\n};\n\nexport interface ToolbarProps {\n  /** Text direction for the toolbar layout */\n  direction?: \"ltr\" | \"rtl\";\n  /** Custom class name */\n  className?: string;\n}\n\nexport const Toolbar = ({ direction = \"ltr\", className }: ToolbarProps) => {\n  const { editor } = useEditorStore();\n\n  const sections: {\n    label: string;\n    icon: LucideIcon;\n    onClick: () => void;\n    isActive?: boolean;\n    testId?: string;\n  }[][] = [\n    [\n      {\n        label: \"Undo\",\n        icon: Undo2Icon,\n        onClick: () => editor?.chain().focus().undo().run(),\n        testId: \"toolbar-undo\",\n      },\n      {\n        label: \"Redo\",\n        icon: Redo2Icon,\n        onClick: () => editor?.chain().focus().redo().run(),\n        testId: \"toolbar-redo\",\n      },\n      {\n        label: \"Print\",\n        icon: PrinterIcon,\n        onClick: () => window.print(),\n        testId: \"toolbar-print\",\n      },\n    ],\n    [\n      {\n        label: \"Bold\",\n        icon: BoldIcon,\n        isActive: editor?.isActive(\"bold\"),\n        onClick: () => editor?.chain().focus().toggleBold().run(),\n        testId: \"toolbar-bold\",\n      },\n      {\n        label: \"Italic\",\n        icon: ItalicIcon,\n        isActive: editor?.isActive(\"italic\"),\n        onClick: () => editor?.chain().focus().toggleItalic().run(),\n        testId: \"toolbar-italic\",\n      },\n      {\n        label: \"Underline\",\n        icon: UnderlineIcon,\n        isActive: editor?.isActive(\"underline\"),\n        onClick: () => editor?.chain().focus().toggleUnderline().run(),\n        testId: \"toolbar-underline\",\n      },\n    ],\n  ];\n\n  return (\n    <div\n      data-testid=\"toolbar\"\n      dir={direction}\n      className={cn(\n        \"goat-editor-toolbar bg-[#F1F4F9] px-2.5 py-0.5 rounded-[24px] min-h-[40px] flex items-center gap-x-0.5 overflow-x-auto\",\n        className\n      )}\n    >\n      {sections[0].map((item) => (\n        <ToolbarButton key={item.label} {...item} />\n      ))}\n      <Separator orientation=\"vertical\" className=\"h-6 bg-neutral-300\" />\n      <FontFamilyButton />\n      <Separator orientation=\"vertical\" className=\"h-6 bg-neutral-300\" />\n      <HeadingLevelButton />\n      <Separator orientation=\"vertical\" className=\"h-6 bg-neutral-300\" />\n      <FontSizeButton />\n      <Separator orientation=\"vertical\" className=\"h-6 bg-neutral-300\" />\n      {sections[1].map((item) => (\n        <ToolbarButton key={item.label} {...item} />\n      ))}\n      <TextColorButton />\n      <HighlightColorButton />\n      <Separator orientation=\"vertical\" className=\"h-6 bg-neutral-300\" />\n      <LinkButton />\n      <ImageButton />\n      <AlignButton />\n      <TextDirectionButton />\n      <LineHeightButton />\n      <ListButton />\n      <Separator orientation=\"vertical\" className=\"h-6 bg-neutral-300\" />\n      <ExportDocxButton />\n      <ExportPdfButton />\n    </div>\n  );\n};\n\n","import { useRef, useState } from \"react\";\nimport { FaCaretDown } from \"react-icons/fa\";\n\nconst markers = Array.from({ length: 83 }, (_, i) => i);\n\ninterface RulerProps {\n  /** Width of the document in pixels */\n  width?: number;\n}\n\nexport const Ruler = ({ width = 816 }: RulerProps) => {\n  const [leftMargin, setLeftMargin] = useState(56);\n  const [rightMargin, setRightMargin] = useState(56);\n\n  const [isDraggingLeft, setIsDraggingLeft] = useState(false);\n  const [isDraggingRight, setIsDraggingRight] = useState(false);\n  const rulerRef = useRef<HTMLDivElement>(null);\n\n  const handleLeftMouseDown = () => {\n    setIsDraggingLeft(true);\n  };\n\n  const handleRightMouseDown = () => {\n    setIsDraggingRight(true);\n  };\n\n  const handleMouseMove = (e: React.MouseEvent) => {\n    const PAGE_WIDTH = width;\n    const MININUM_SPACE = 100;\n\n    if ((isDraggingLeft || isDraggingRight) && rulerRef.current) {\n      const container = rulerRef.current.querySelector(\"#ruler-container\");\n      if (container) {\n        const containerRect = container.getBoundingClientRect();\n        const relativeX = e.clientX - containerRect.left;\n        const rawPosition = Math.max(0, Math.min(PAGE_WIDTH, relativeX));\n\n        if (isDraggingLeft) {\n          const maxLeftPosition = PAGE_WIDTH - rightMargin - MININUM_SPACE;\n          const newLeftPosition = Math.min(rawPosition, maxLeftPosition);\n          setLeftMargin(newLeftPosition);\n        } else if (isDraggingRight) {\n          const maxRightPosition = PAGE_WIDTH - (leftMargin + MININUM_SPACE);\n          const newRightPosition = Math.max(PAGE_WIDTH - rawPosition, 0);\n          const constrainedRightPosition = Math.min(\n            newRightPosition,\n            maxRightPosition\n          );\n          setRightMargin(constrainedRightPosition);\n        }\n      }\n    }\n  };\n\n  const handleMouseUp = () => {\n    setIsDraggingLeft(false);\n    setIsDraggingRight(false);\n  };\n\n  const handleLeftDoubleClick = () => {\n    setLeftMargin(56);\n  };\n\n  const handleRightDoubleClick = () => {\n    setRightMargin(56);\n  };\n\n  return (\n    <div\n      ref={rulerRef}\n      onMouseMove={handleMouseMove}\n      onMouseUp={handleMouseUp}\n      onMouseLeave={handleMouseUp}\n      className=\"goat-editor-ruler mx-auto h-6 border-b border-gray-300 flex items-end relative select-none print:hidden\"\n      style={{ width: `${width}px` }}\n    >\n      <div id=\"ruler-container\" className=\"w-full h-full relative\">\n        <Marker\n          position={leftMargin}\n          isLeft={true}\n          isDragging={isDraggingLeft}\n          onMouseDown={handleLeftMouseDown}\n          onDoubleClick={handleLeftDoubleClick}\n        />\n        <Marker\n          position={rightMargin}\n          isLeft={false}\n          isDragging={isDraggingRight}\n          onMouseDown={handleRightMouseDown}\n          onDoubleClick={handleRightDoubleClick}\n        />\n        <div className=\"absolute inset-0 bottom-0 h-full\">\n          <div className=\"relative h-full\" style={{ width: `${width}px` }}>\n            {markers.map((marker) => {\n              const position = (marker * width) / 82;\n\n              return (\n                <div\n                  key={marker}\n                  className=\"absolute bottom-0\"\n                  style={{ left: `${position}px` }}\n                >\n                  {marker % 10 === 0 && (\n                    <>\n                      <div className=\"absolute bottom-0 w-[1px] h-2 bg-neutral-500\" />\n                      <span className=\"absolute bottom-2 text-[10px] text-neutral-500 transform -translate-x-1/2\">\n                        {marker / 10 + 1}\n                      </span>\n                    </>\n                  )}\n                  {marker % 5 === 0 && marker % 10 !== 0 && (\n                    <div className=\"absolute bottom-0 w-[1px] h-1.5 bg-neutral-500\" />\n                  )}\n                  {marker % 5 !== 0 && (\n                    <div className=\"absolute bottom-0 w-[1px] h-1 bg-neutral-500\" />\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\ninterface MarkerProps {\n  position: number;\n  isLeft: boolean;\n  isDragging: boolean;\n  onMouseDown: () => void;\n  onDoubleClick: () => void;\n}\n\nconst Marker = ({\n  position,\n  isLeft,\n  isDragging,\n  onMouseDown,\n  onDoubleClick,\n}: MarkerProps) => {\n  return (\n    <div\n      className=\"absolute top-0 w-4 h-full cursor-ew-resize z-[5] group -ml-2\"\n      style={{ [isLeft ? \"left\" : \"right\"]: `${position}px` }}\n      onMouseDown={onMouseDown}\n      onDoubleClick={onDoubleClick}\n    >\n      <FaCaretDown className=\"absolute left-1/2 top-0 h-full fill-blue-500 transform -translate-x-1/2\" />\n      <div\n        className=\"absolute left-1/2 top-4 transform -translate-x-1/2\"\n        style={{\n          height: \"100vh\",\n          width: \"1px\",\n          transform: \"scaleX(0.5)\",\n          backgroundColor: \"#3b72f6\",\n          display: isDragging ? \"block\" : \"none\",\n        }}\n      />\n    </div>\n  );\n};\n\n","import { useEffect, useState } from \"react\";\nimport { useEditor, EditorContent } from \"@tiptap/react\";\nimport StarterKit from \"@tiptap/starter-kit\";\nimport TaskItem from \"@tiptap/extension-task-item\";\nimport TaskList from \"@tiptap/extension-task-list\";\nimport Table from \"@tiptap/extension-table\";\nimport TableCell from \"@tiptap/extension-table-cell\";\nimport TableHeader from \"@tiptap/extension-table-header\";\nimport TableRow from \"@tiptap/extension-table-row\";\nimport Image from \"@tiptap/extension-image\";\nimport TextAlign from \"@tiptap/extension-text-align\";\nimport Link from \"@tiptap/extension-link\";\nimport { Color } from \"@tiptap/extension-color\";\nimport Highlight from \"@tiptap/extension-highlight\";\nimport FontFamily from \"@tiptap/extension-font-family\";\nimport TextStyle from \"@tiptap/extension-text-style\";\nimport Underline from \"@tiptap/extension-underline\";\nimport ImageResize from \"tiptap-extension-resize-image\";\n\nimport { useEditorStore } from \"./store/use-editor-store\";\nimport { FontSizeExtension } from \"./extensions/font-size\";\nimport { LineHeightExtension } from \"./extensions/line-height\";\nimport { TextDirectionExtension } from \"./extensions/text-direction\";\nimport { Toolbar } from \"./Toolbar\";\nimport { Ruler } from \"./Ruler\";\nimport { cn } from \"./lib/utils\";\nimport type { GoatEditorProps } from \"./types\";\n\n/**\n * GoatEditor - A rich-text editor built with TipTap\n *\n * @example\n * ```tsx\n * import GoatEditor from \"@goat/editor\";\n * import \"@goat/editor/styles.css\";\n *\n * function App() {\n *   return (\n *     <GoatEditor\n *       options={{\n *         initialContent: \"<p>Hello World</p>\",\n *         showToolbar: true,\n *         showRuler: true,\n *         onChange: (html, json) => console.log(html),\n *       }}\n *     />\n *   );\n * }\n * ```\n */\nexport const GoatEditor = ({ options = {} }: GoatEditorProps) => {\n  const {\n    initialContent = \"\",\n    showToolbar = true,\n    showRuler = true,\n    defaultDirection = \"ltr\",\n    className,\n    toolbarClassName,\n    onChange,\n    onReady,\n    onDestroy,\n    extensions: customExtensions = [],\n    editable = true,\n    autoFocus = false,\n    dimensions = { width: 816, height: 1054 },\n    toolbarDirection,\n  } = options;\n\n  const { setEditor } = useEditorStore();\n  const [content, setContent] = useState<string | null>(null);\n\n  // Load initial content\n  useEffect(() => {\n    if (initialContent) {\n      setContent(initialContent);\n    } else {\n      setContent(\"\");\n    }\n  }, [initialContent]);\n\n  // Configure text direction extension with the default direction\n  const textDirectionExtension = TextDirectionExtension.configure({\n    types: [\n      \"paragraph\",\n      \"heading\",\n      \"bulletList\",\n      \"orderedList\",\n      \"listItem\",\n      \"taskList\",\n      \"taskItem\",\n      \"codeBlock\",\n      \"blockquote\",\n    ],\n    defaultDirection,\n  });\n\n  const editor = useEditor({\n    immediatelyRender: false,\n    editable,\n    autofocus: autoFocus,\n    onCreate({ editor }) {\n      setEditor(editor);\n      onReady?.(editor);\n    },\n    onDestroy() {\n      setEditor(null);\n      onDestroy?.();\n    },\n    onUpdate({ editor }) {\n      setEditor(editor);\n      onChange?.(editor.getHTML(), editor.getJSON());\n    },\n    onSelectionUpdate({ editor }) {\n      setEditor(editor);\n    },\n    onTransaction({ editor }) {\n      setEditor(editor);\n    },\n    onFocus({ editor }) {\n      setEditor(editor);\n    },\n    onBlur({ editor }) {\n      setEditor(editor);\n    },\n    onContentError({ editor }) {\n      setEditor(editor);\n    },\n    editorProps: {\n      attributes: {\n        id: \"goat-editor-content\",\n        \"data-testid\": \"editor-content\",\n        style: `padding-left: 56px; padding-right: 56px; min-height: ${dimensions.height}px; width: ${dimensions.width}px;`,\n        class:\n          \"focus:outline-none print:border-0 bg-white border border-[#C7C7C7] flex flex-col pt-10 pr-10 cursor-text\",\n      },\n    },\n    extensions: [\n      StarterKit,\n      LineHeightExtension,\n      FontSizeExtension,\n      textDirectionExtension,\n      TextAlign.configure({\n        types: [\"heading\", \"paragraph\"],\n      }),\n      Link.configure({\n        openOnClick: false,\n        autolink: true,\n        defaultProtocol: \"https\",\n      }),\n      Color,\n      Highlight.configure({\n        multicolor: true,\n      }),\n      FontFamily,\n      TextStyle,\n      Underline,\n      Image,\n      ImageResize,\n      Table,\n      TableCell,\n      TableHeader,\n      TableRow,\n      TaskItem.configure({\n        nested: true,\n      }),\n      TaskList,\n      ...customExtensions,\n    ],\n  });\n\n  // Handle inserting the content into the editor once it's available\n  useEffect(() => {\n    if (editor && content) {\n      editor.commands.setContent(content);\n    } else if (editor && (!content || content === \"\")) {\n      // For empty content, set default direction and alignment\n      const isEmpty = editor.isEmpty;\n      if (isEmpty) {\n        editor.commands.setTextDirection(defaultDirection);\n        editor.commands.setTextAlign(\n          defaultDirection === \"rtl\" ? \"right\" : \"left\"\n        );\n      }\n    }\n  }, [editor, content, defaultDirection]);\n\n  return (\n    <div\n      className={cn(\"goat-editor min-h-screen bg-[#FAFBFD]\", className)}\n      data-testid=\"goat-editor\"\n    >\n      {showToolbar && (\n        <div className=\"goat-editor-toolbar-wrapper flex flex-col px-4 pt-2 gap-y-2 fixed top-0 left-0 right-0 z-10 bg-[#FAFBFD] print:hidden\">\n          <Toolbar\n            direction={toolbarDirection || defaultDirection}\n            className={toolbarClassName}\n          />\n        </div>\n      )}\n      <div\n        className={cn(\n          \"goat-editor-content-wrapper print:pt-0\",\n          showToolbar && \"pt-[60px]\"\n        )}\n      >\n        <div\n          id=\"goat-editor-container\"\n          data-testid=\"editor-container\"\n          className=\"size-full overflow-x-auto bg-[#F9FBFD] px-4 print:p-0 print:bg-white print:overflow-visible\"\n        >\n          {showRuler && <Ruler width={dimensions.width} />}\n          <div\n            className=\"min-w-max flex justify-center py-4 print:py-0 mx-auto print:w-full print:min-w-0\"\n            style={{ width: `${dimensions.width}px` }}\n          >\n            <EditorContent editor={editor} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GoatEditor;\n\n","import type { Mark, TextStyleOptions } from \"./types\";\n\n/**\n * Extract text style from TipTap marks\n */\nexport const extractTextStyle = (marks: Mark[] = []): TextStyleOptions => {\n  const style: TextStyleOptions = {};\n\n  for (const mark of marks) {\n    switch (mark.type) {\n      case \"bold\":\n        style.bold = true;\n        break;\n      case \"italic\":\n        style.italics = true;\n        break;\n      case \"underline\":\n        if (style.decoration) {\n          if (Array.isArray(style.decoration)) {\n            style.decoration.push(\"underline\");\n          } else {\n            style.decoration = [style.decoration, \"underline\"];\n          }\n        } else {\n          style.decoration = \"underline\";\n        }\n        break;\n      case \"strike\":\n        if (style.decoration) {\n          if (Array.isArray(style.decoration)) {\n            style.decoration.push(\"lineThrough\");\n          } else {\n            style.decoration = [style.decoration, \"lineThrough\"];\n          }\n        } else {\n          style.decoration = \"lineThrough\";\n        }\n        break;\n      case \"textStyle\":\n        if (mark.attrs?.color) {\n          style.color = normalizeColor(mark.attrs.color as string);\n        }\n        if (mark.attrs?.fontFamily) {\n          style.font = mark.attrs.fontFamily as string;\n        }\n        if (mark.attrs?.fontSize) {\n          style.fontSize = parseFontSize(mark.attrs.fontSize as string);\n        }\n        break;\n      case \"highlight\":\n        if (mark.attrs?.color) {\n          style.background = normalizeColor(mark.attrs.color as string);\n        }\n        break;\n      case \"link\":\n        if (mark.attrs?.href) {\n          style.link = mark.attrs.href as string;\n        }\n        break;\n    }\n  }\n\n  return style;\n};\n\n/**\n * Normalize color value to hex format\n */\nexport const normalizeColor = (color: string | undefined): string | undefined => {\n  if (!color) return undefined;\n\n  // If already hex, return as-is (without #)\n  if (color.startsWith(\"#\")) {\n    return color.substring(1);\n  }\n\n  // Handle rgb/rgba\n  const rgbMatch = color.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)/);\n  if (rgbMatch) {\n    const r = parseInt(rgbMatch[1]).toString(16).padStart(2, \"0\");\n    const g = parseInt(rgbMatch[2]).toString(16).padStart(2, \"0\");\n    const b = parseInt(rgbMatch[3]).toString(16).padStart(2, \"0\");\n    return `${r}${g}${b}`;\n  }\n\n  // Return common color names\n  const colorMap: Record<string, string> = {\n    red: \"ff0000\",\n    green: \"00ff00\",\n    blue: \"0000ff\",\n    yellow: \"ffff00\",\n    orange: \"ffa500\",\n    purple: \"800080\",\n    pink: \"ffc0cb\",\n    black: \"000000\",\n    white: \"ffffff\",\n    gray: \"808080\",\n    grey: \"808080\",\n  };\n\n  return colorMap[color.toLowerCase()] || color;\n};\n\n/**\n * Parse font size from string (e.g., \"12pt\", \"16px\")\n */\nexport const parseFontSize = (fontSize: string): number => {\n  const match = fontSize.match(/^(\\d+(?:\\.\\d+)?)(pt|px)?$/);\n  if (match) {\n    const value = parseFloat(match[1]);\n    const unit = match[2] || \"pt\";\n    // pdfmake uses pt, convert px to pt (1px  0.75pt)\n    return unit === \"px\" ? Math.round(value * 0.75) : value;\n  }\n  return 12; // default\n};\n\n/**\n * Get text alignment from node attributes\n */\nexport const getAlignment = (\n  attrs: Record<string, unknown> | undefined\n): \"left\" | \"center\" | \"right\" | \"justify\" | undefined => {\n  if (!attrs?.textAlign) return undefined;\n  const align = attrs.textAlign as string;\n  if ([\"left\", \"center\", \"right\", \"justify\"].includes(align)) {\n    return align as \"left\" | \"center\" | \"right\" | \"justify\";\n  }\n  return undefined;\n};\n\n/**\n * Get heading font size\n */\nexport const getHeadingFontSize = (level: number): number => {\n  const sizes: Record<number, number> = {\n    1: 32,\n    2: 24,\n    3: 18.72,\n    4: 16,\n    5: 13.28,\n    6: 10.72,\n  };\n  return sizes[level] || 12;\n};\n\n","/**\n * Convert image URL to base64 data URL\n */\nexport const fetchImageAsBase64 = async (src: string): Promise<string | null> => {\n  try {\n    // If already a data URL, return as-is\n    if (src.startsWith(\"data:\")) {\n      return src;\n    }\n\n    // Fetch the image\n    const response = await fetch(src);\n    if (!response.ok) {\n      console.warn(`Failed to fetch image: ${src}`);\n      return null;\n    }\n\n    const blob = await response.blob();\n    \n    // Convert to base64\n    return new Promise((resolve) => {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        resolve(reader.result as string);\n      };\n      reader.onerror = () => {\n        console.warn(`Failed to read image as base64: ${src}`);\n        resolve(null);\n      };\n      reader.readAsDataURL(blob);\n    });\n  } catch (error) {\n    console.warn(`Error fetching image: ${src}`, error);\n    return null;\n  }\n};\n\n/**\n * Parse dimension value from various formats\n */\nexport const parseDimension = (value: unknown): number | null => {\n  if (typeof value === \"number\") return value;\n  if (typeof value === \"string\") {\n    const parsed = parseFloat(value.replace(/[^0-9.-]/g, \"\"));\n    return isNaN(parsed) ? null : parsed;\n  }\n  return null;\n};\n\n/**\n * Get image dimensions from attributes\n */\nexport const getImageDimensions = (\n  attrs: Record<string, unknown>\n): { width?: number; height?: number } => {\n  const result: { width?: number; height?: number } = {};\n\n  // Try various attribute names\n  const widthAttr = attrs.width || attrs.dataWidth;\n  const heightAttr = attrs.height || attrs.dataHeight;\n\n  if (widthAttr) {\n    const w = parseDimension(widthAttr);\n    if (w) result.width = w;\n  }\n\n  if (heightAttr) {\n    const h = parseDimension(heightAttr);\n    if (h) result.height = h;\n  }\n\n  // Extract from style if not found\n  if (!result.width || !result.height) {\n    const style = attrs.style as string | undefined;\n    if (style) {\n      const widthMatch = style.match(/width:\\s*(\\d+(?:\\.\\d+)?)(px|%|em|rem)?/i);\n      const heightMatch = style.match(/height:\\s*(\\d+(?:\\.\\d+)?)(px|%|em|rem)?/i);\n      if (widthMatch && !result.width) result.width = parseFloat(widthMatch[1]);\n      if (heightMatch && !result.height) result.height = parseFloat(heightMatch[1]);\n    }\n  }\n\n  // Default max width for images\n  if (!result.width) {\n    result.width = 500;\n  }\n\n  return result;\n};\n\n/**\n * Get image alignment from attributes\n */\nexport const getImageAlignment = (\n  attrs: Record<string, unknown>\n): \"left\" | \"center\" | \"right\" | undefined => {\n  // Check align attribute\n  if (attrs.align) {\n    const align = (attrs.align as string).toLowerCase();\n    if ([\"left\", \"center\", \"right\"].includes(align)) {\n      return align as \"left\" | \"center\" | \"right\";\n    }\n  }\n\n  // Check containerStyle\n  if (attrs.containerStyle && typeof attrs.containerStyle === \"string\") {\n    const style = attrs.containerStyle;\n    if (style.includes(\"margin-left: auto\") && style.includes(\"margin-right: auto\")) {\n      return \"center\";\n    }\n    if (style.includes(\"margin-left: auto\") && !style.includes(\"margin-right: auto\")) {\n      return \"right\";\n    }\n    if (style.includes(\"margin-right: auto\") && !style.includes(\"margin-left: auto\")) {\n      return \"left\";\n    }\n  }\n\n  // Check style attribute\n  if (attrs.style && typeof attrs.style === \"string\") {\n    const style = attrs.style;\n    const floatMatch = style.match(/float:\\s*(left|right)/i);\n    if (floatMatch) {\n      return floatMatch[1].toLowerCase() as \"left\" | \"right\";\n    }\n    const textAlignMatch = style.match(/text-align:\\s*(left|center|right)/i);\n    if (textAlignMatch) {\n      return textAlignMatch[1].toLowerCase() as \"left\" | \"center\" | \"right\";\n    }\n  }\n\n  // Check textAlign\n  if (attrs.textAlign) {\n    const align = (attrs.textAlign as string).toLowerCase();\n    if ([\"left\", \"center\", \"right\"].includes(align)) {\n      return align as \"left\" | \"center\" | \"right\";\n    }\n  }\n\n  return undefined;\n};\n\n","import type { Content, ContentText } from \"pdfmake/interfaces\";\nimport type { DocNode } from \"./types\";\nimport { extractTextStyle } from \"./style-utils\";\n\n/**\n * Process text content from TipTap nodes into pdfmake content\n */\nexport const processTextContent = (\n  content: DocNode[],\n  _isRTL: boolean = false\n): Content[] => {\n  if (!content || content.length === 0) {\n    return [];\n  }\n\n  const result: Content[] = [];\n\n  for (const item of content) {\n    if (item.type === \"text\") {\n      const text = item.text || \"\";\n      const style = extractTextStyle(item.marks);\n\n      const textContent: ContentText = {\n        text,\n        ...style,\n      };\n\n      // Handle link\n      if (style.link) {\n        textContent.link = style.link;\n        textContent.color = textContent.color || \"0066cc\"; // Default link color\n        if (!textContent.decoration) {\n          textContent.decoration = \"underline\";\n        }\n      }\n\n      result.push(textContent);\n    } else if (item.type === \"hardBreak\") {\n      result.push({ text: \"\\n\" });\n    }\n  }\n\n  return result;\n};\n\n/**\n * Process inline content that may include text and other elements\n * Returns an array that can be used as 'text' property in pdfmake\n */\nexport const processInlineContent = (\n  content: DocNode[],\n  _isRTL: boolean = false\n): (string | ContentText)[] => {\n  if (!content || content.length === 0) {\n    return [];\n  }\n\n  const result: (string | ContentText)[] = [];\n\n  for (const item of content) {\n    if (item.type === \"text\") {\n      const text = item.text || \"\";\n      const style = extractTextStyle(item.marks);\n      const hasStyle = Object.keys(style).length > 0;\n\n      if (hasStyle) {\n        const textContent: ContentText = {\n          text,\n          ...style,\n        };\n\n        // Handle link styling\n        if (style.link) {\n          textContent.link = style.link;\n          textContent.color = textContent.color || \"0066cc\";\n          if (!textContent.decoration) {\n            textContent.decoration = \"underline\";\n          }\n        }\n\n        result.push(textContent);\n      } else {\n        result.push(text);\n      }\n    } else if (item.type === \"hardBreak\") {\n      result.push(\"\\n\");\n    }\n  }\n\n  return result;\n};\n\n","import type { Content, ContentText, TableCell } from \"pdfmake/interfaces\";\nimport type { DocNode, PdfProcessingContext } from \"./types\";\nimport { getAlignment, getHeadingFontSize } from \"./style-utils\";\nimport { fetchImageAsBase64, getImageDimensions, getImageAlignment } from \"./image-utils\";\nimport { processInlineContent } from \"./text-processor\";\n\n/**\n * Check if a node is an image node\n */\nexport const isImageNode = (node: DocNode): boolean => {\n  return (\n    node.type === \"image\" ||\n    node.type === \"resizableImage\" ||\n    node.type === \"imageResize\"\n  );\n};\n\n/**\n * Create initial processing context\n */\nexport const createProcessingContext = (): PdfProcessingContext => ({\n  documentChildren: [],\n  lastKnownDirection: null,\n  images: {},\n});\n\n/**\n * Process an image node\n */\nconst processImageNode = async (\n  node: DocNode,\n  context: PdfProcessingContext,\n  parentAlignment?: \"left\" | \"center\" | \"right\"\n): Promise<Content | null> => {\n  const src = node.attrs?.src as string;\n  if (!src) {\n    console.warn(\"Image node has no src:\", node);\n    return null;\n  }\n\n  const imageData = await fetchImageAsBase64(src);\n  if (!imageData) {\n    console.warn(\"Failed to fetch image data for:\", src.substring(0, 100));\n    return null;\n  }\n\n  const { width, height } = getImageDimensions(node.attrs || {});\n  const alignment = getImageAlignment(node.attrs || {}) || parentAlignment;\n\n  const imageContent: Content = {\n    image: imageData,\n    width: width ? Math.min(width, 500) : 400, // Max width 500\n    alignment: alignment || \"left\",\n    margin: [0, 5, 0, 5] as [number, number, number, number],\n  };\n\n  if (height) {\n    (imageContent as any).height = height;\n  }\n\n  return imageContent;\n};\n\n/**\n * Process a paragraph node\n */\nconst processParagraph = async (\n  node: DocNode,\n  context: PdfProcessingContext\n): Promise<void> => {\n  const isRTL = node.attrs?.dir === \"rtl\";\n  const alignment = getAlignment(node.attrs);\n\n  // Check if paragraph contains images\n  const hasImage = node.content?.some((item) => isImageNode(item));\n\n  if (hasImage) {\n    // Process images and text separately\n    for (const item of node.content || []) {\n      if (isImageNode(item)) {\n        const imageContent = await processImageNode(\n          item,\n          context,\n          alignment\n        );\n        if (imageContent) {\n          context.documentChildren.push(imageContent);\n        }\n      } else if (item.type === \"text\" || item.type === \"hardBreak\") {\n        const textContent = processInlineContent([item], isRTL);\n        if (textContent.length > 0) {\n          context.documentChildren.push({\n            text: textContent,\n            alignment: alignment || (isRTL ? \"right\" : \"left\"),\n            margin: [0, 2, 0, 2] as [number, number, number, number],\n          });\n        }\n      }\n    }\n  } else {\n    // Regular paragraph with only text\n    const textContent = processInlineContent(node.content || [], isRTL);\n    context.documentChildren.push({\n      text: textContent.length > 0 ? textContent : \" \", // pdfmake needs content\n      alignment: alignment || (isRTL ? \"right\" : \"left\"),\n      margin: [0, 2, 0, 2] as [number, number, number, number],\n    });\n  }\n};\n\n/**\n * Process a heading node\n */\nconst processHeading = async (\n  node: DocNode,\n  context: PdfProcessingContext\n): Promise<void> => {\n  const level = (node.attrs?.level as number) || 1;\n  const isRTL = node.attrs?.dir === \"rtl\";\n  const alignment = getAlignment(node.attrs);\n  const textContent = processInlineContent(node.content || [], isRTL);\n\n  context.documentChildren.push({\n    text: textContent.length > 0 ? textContent : \" \",\n    fontSize: getHeadingFontSize(level),\n    bold: true,\n    alignment: alignment || (isRTL ? \"right\" : \"left\"),\n    margin: [0, 10, 0, 5] as [number, number, number, number],\n  });\n};\n\n/**\n * Process a bullet list\n */\nconst processBulletList = async (\n  node: DocNode,\n  context: PdfProcessingContext\n): Promise<void> => {\n  const items: Content[] = [];\n  const nodeDir = node.attrs?.dir;\n\n  for (const listItem of node.content || []) {\n    const itemDir = (listItem.attrs?.dir as string | undefined) || nodeDir;\n    \n    for (const content of listItem.content || []) {\n      if (content.type === \"paragraph\") {\n        const paraDir = (content.attrs?.dir as string | undefined) || itemDir;\n        const isParaRTL = paraDir === \"rtl\";\n        const textContent = processInlineContent(content.content || [], isParaRTL);\n        \n        items.push({\n          text: textContent.length > 0 ? textContent : \" \",\n          alignment: isParaRTL ? \"right\" : undefined,\n        });\n      } else if (content.type === \"bulletList\") {\n        // Nested bullet list - add as sub-list\n        const nestedItems: Content[] = [];\n        await processNestedList(content, nestedItems, itemDir);\n        if (nestedItems.length > 0) {\n          items.push({ ul: nestedItems });\n        }\n      } else if (content.type === \"orderedList\") {\n        const nestedItems: Content[] = [];\n        await processNestedList(content, nestedItems, itemDir);\n        if (nestedItems.length > 0) {\n          items.push({ ol: nestedItems });\n        }\n      }\n    }\n  }\n\n  if (items.length > 0) {\n    context.documentChildren.push({\n      ul: items,\n      margin: [0, 5, 0, 5] as [number, number, number, number],\n    });\n  }\n};\n\n/**\n * Process a nested list\n */\nconst processNestedList = async (\n  node: DocNode,\n  items: Content[],\n  parentDir?: string\n): Promise<void> => {\n  for (const listItem of node.content || []) {\n    const itemDir = (listItem.attrs?.dir as string | undefined) || parentDir;\n    \n    for (const content of listItem.content || []) {\n      if (content.type === \"paragraph\") {\n        const paraDir = (content.attrs?.dir as string | undefined) || itemDir;\n        const isParaRTL = paraDir === \"rtl\";\n        const textContent = processInlineContent(content.content || [], isParaRTL);\n        \n        items.push({\n          text: textContent.length > 0 ? textContent : \" \",\n          alignment: isParaRTL ? \"right\" : undefined,\n        });\n      } else if (content.type === \"bulletList\" || content.type === \"orderedList\") {\n        const nestedItems: Content[] = [];\n        await processNestedList(content, nestedItems, itemDir);\n        if (nestedItems.length > 0) {\n          items.push(content.type === \"bulletList\" ? { ul: nestedItems } : { ol: nestedItems });\n        }\n      }\n    }\n  }\n};\n\n/**\n * Process an ordered list\n */\nconst processOrderedList = async (\n  node: DocNode,\n  context: PdfProcessingContext\n): Promise<void> => {\n  const items: Content[] = [];\n  const nodeDir = node.attrs?.dir;\n\n  for (const listItem of node.content || []) {\n    const itemDir = (listItem.attrs?.dir as string | undefined) || nodeDir;\n    \n    for (const content of listItem.content || []) {\n      if (content.type === \"paragraph\") {\n        const paraDir = (content.attrs?.dir as string | undefined) || itemDir;\n        const isParaRTL = paraDir === \"rtl\";\n        const textContent = processInlineContent(content.content || [], isParaRTL);\n        \n        items.push({\n          text: textContent.length > 0 ? textContent : \" \",\n          alignment: isParaRTL ? \"right\" : undefined,\n        });\n      } else if (content.type === \"bulletList\") {\n        const nestedItems: Content[] = [];\n        await processNestedList(content, nestedItems, itemDir);\n        if (nestedItems.length > 0) {\n          items.push({ ul: nestedItems });\n        }\n      } else if (content.type === \"orderedList\") {\n        const nestedItems: Content[] = [];\n        await processNestedList(content, nestedItems, itemDir);\n        if (nestedItems.length > 0) {\n          items.push({ ol: nestedItems });\n        }\n      }\n    }\n  }\n\n  if (items.length > 0) {\n    context.documentChildren.push({\n      ol: items,\n      margin: [0, 5, 0, 5] as [number, number, number, number],\n    });\n  }\n};\n\n/**\n * Process a task list\n */\nconst processTaskList = async (\n  node: DocNode,\n  context: PdfProcessingContext\n): Promise<void> => {\n  for (const taskItem of node.content || []) {\n    const isChecked = taskItem.attrs?.checked === true;\n    const itemDir = (taskItem.attrs?.dir as string | undefined) || node.attrs?.dir;\n    const checkbox = isChecked ? \" \" : \" \";\n\n    for (const para of taskItem.content || []) {\n      if (para.type === \"paragraph\") {\n        const paraDir = (para.attrs?.dir as string | undefined) || itemDir;\n        const isParaRTL = paraDir === \"rtl\";\n        const textContent = processInlineContent(para.content || [], isParaRTL);\n\n        context.documentChildren.push({\n          text: [checkbox, ...(Array.isArray(textContent) ? textContent : [textContent])],\n          alignment: isParaRTL ? \"right\" : \"left\",\n          margin: [0, 2, 0, 2] as [number, number, number, number],\n        });\n      }\n    }\n  }\n};\n\n/**\n * Process a table node\n */\nconst processTable = async (\n  node: DocNode,\n  context: PdfProcessingContext\n): Promise<void> => {\n  const tableBody: TableCell[][] = [];\n\n  for (const row of node.content || []) {\n    const rowCells: TableCell[] = [];\n\n    for (const cell of row.content || []) {\n      const cellContent: Content[] = [];\n\n      for (const para of cell.content || []) {\n        if (para.type === \"paragraph\") {\n          const paraDir =\n            (para.attrs?.dir as string | undefined) ||\n            (cell.attrs?.dir as string | undefined) ||\n            (row.attrs?.dir as string | undefined) ||\n            (node.attrs?.dir as string | undefined);\n          const isParaRTL = paraDir === \"rtl\";\n          const textContent = processInlineContent(para.content || [], isParaRTL);\n\n          cellContent.push({\n            text: textContent.length > 0 ? textContent : \" \",\n            alignment: isParaRTL ? \"right\" : undefined,\n          });\n        }\n      }\n\n      rowCells.push({\n        stack: cellContent.length > 0 ? cellContent : [{ text: \" \" }],\n        margin: [4, 4, 4, 4] as [number, number, number, number],\n      });\n    }\n\n    if (rowCells.length > 0) {\n      tableBody.push(rowCells);\n    }\n  }\n\n  if (tableBody.length > 0) {\n    const colCount = tableBody[0].length;\n    context.documentChildren.push({\n      table: {\n        headerRows: 0,\n        widths: Array(colCount).fill(\"*\"),\n        body: tableBody,\n      },\n      layout: \"lightHorizontalLines\",\n      margin: [0, 10, 0, 10] as [number, number, number, number],\n    });\n  }\n};\n\n/**\n * Process a blockquote node\n */\nconst processBlockquote = async (\n  node: DocNode,\n  context: PdfProcessingContext\n): Promise<void> => {\n  const nodeDir = node.attrs?.dir;\n\n  for (const para of node.content || []) {\n    if (para.type === \"paragraph\") {\n      const paraDir = (para.attrs?.dir as string | undefined) || nodeDir;\n      const isParaRTL = paraDir === \"rtl\";\n      const textContent = processInlineContent(para.content || [], isParaRTL);\n\n      context.documentChildren.push({\n        text: textContent.length > 0 ? textContent : \" \",\n        margin: [20, 5, 20, 5] as [number, number, number, number],\n        italics: true,\n        color: \"666666\",\n        alignment: isParaRTL ? \"right\" : \"left\",\n      });\n    } else {\n      // Nested content in blockquote\n      await processNode(para, context);\n    }\n  }\n};\n\n/**\n * Process a code block node\n */\nconst processCodeBlock = async (\n  node: DocNode,\n  context: PdfProcessingContext\n): Promise<void> => {\n  const codeLines = node.content?.map((c) => c.text || \"\").join(\"\\n\") || \"\";\n  const isRTL = node.attrs?.dir === \"rtl\";\n\n  context.documentChildren.push({\n    text: codeLines,\n    font: \"Courier\",\n    fontSize: 10,\n    background: \"f0f0f0\",\n    margin: [0, 5, 0, 5] as [number, number, number, number],\n    alignment: isRTL ? \"right\" : \"left\",\n    preserveLeadingSpaces: true,\n  });\n};\n\n/**\n * Process a horizontal rule\n */\nconst processHorizontalRule = (context: PdfProcessingContext): void => {\n  context.documentChildren.push({\n    canvas: [\n      {\n        type: \"line\",\n        x1: 0,\n        y1: 0,\n        x2: 515,\n        y2: 0,\n        lineWidth: 1,\n        lineColor: \"cccccc\",\n      },\n    ],\n    margin: [0, 10, 0, 10] as [number, number, number, number],\n  });\n};\n\n/**\n * Process a single TipTap node and add to document children\n */\nexport const processNode = async (\n  node: DocNode,\n  context: PdfProcessingContext\n): Promise<void> => {\n  const nodeDir = node.attrs?.dir as string | undefined;\n\n  // Update direction tracking when we see content with direction\n  if (nodeDir) {\n    context.lastKnownDirection = nodeDir as \"rtl\" | \"ltr\";\n  }\n\n  switch (node.type) {\n    case \"paragraph\":\n      await processParagraph(node, context);\n      break;\n\n    case \"image\":\n    case \"resizableImage\":\n    case \"imageResize\": {\n      const effectiveRTL = nodeDir === \"rtl\" || context.lastKnownDirection === \"rtl\";\n      const imageContent = await processImageNode(\n        node,\n        context,\n        effectiveRTL ? \"right\" : undefined\n      );\n      if (imageContent) {\n        context.documentChildren.push(imageContent);\n      }\n      break;\n    }\n\n    case \"heading\":\n      await processHeading(node, context);\n      break;\n\n    case \"bulletList\":\n      await processBulletList(node, context);\n      break;\n\n    case \"orderedList\":\n      await processOrderedList(node, context);\n      break;\n\n    case \"taskList\":\n      await processTaskList(node, context);\n      break;\n\n    case \"table\":\n      await processTable(node, context);\n      break;\n\n    case \"blockquote\":\n      await processBlockquote(node, context);\n      break;\n\n    case \"codeBlock\":\n      await processCodeBlock(node, context);\n      break;\n\n    case \"horizontalRule\":\n      processHorizontalRule(context);\n      break;\n\n    case \"hardBreak\":\n      context.documentChildren.push({ text: \"\\n\" });\n      break;\n\n    default:\n      // Process nested content for unknown node types\n      if (node.content) {\n        for (const child of node.content) {\n          await processNode(child, context);\n        }\n      }\n  }\n};\n\n","import { Editor } from \"@tiptap/react\";\nimport pdfMake from \"pdfmake/build/pdfmake\";\nimport pdfFonts from \"pdfmake/build/vfs_fonts\";\nimport type { TDocumentDefinitions } from \"pdfmake/interfaces\";\nimport type { DocNode } from \"./types\";\nimport { processNode, createProcessingContext } from \"./node-processor\";\n\n// Initialize pdfmake fonts\npdfMake.vfs = pdfFonts.vfs;\n\n/**\n * Export TipTap editor content to a PDF file\n */\nexport const exportToPdf = async (\n  editor: Editor | null,\n  filename: string = \"document.pdf\"\n): Promise<void> => {\n  if (!editor) return;\n\n  const json = editor.getJSON();\n\n  // Create processing context\n  const context = createProcessingContext();\n\n  // Process all nodes\n  for (const node of (json.content || []) as DocNode[]) {\n    await processNode(node, context);\n  }\n\n  // Create the document definition\n  const docDefinition: TDocumentDefinitions = {\n    info: {\n      title: filename.replace(/\\.pdf$/i, \"\"),\n      creator: \"GoatEditor\",\n      producer: \"pdfmake\",\n    },\n    pageSize: \"A4\",\n    pageMargins: [40, 60, 40, 60] as [number, number, number, number],\n    content: context.documentChildren.length > 0\n      ? context.documentChildren\n      : [{ text: \" \" }], // pdfmake requires at least some content\n    defaultStyle: {\n      font: \"Roboto\",\n      fontSize: 12,\n      lineHeight: 1.3,\n    },\n    styles: {\n      header: {\n        fontSize: 18,\n        bold: true,\n        margin: [0, 0, 0, 10] as [number, number, number, number],\n      },\n    },\n  };\n\n  // Generate and download the PDF\n  pdfMake.createPdf(docDefinition).download(filename);\n};\n\n// Re-export types for external use\nexport type { DocNode, Mark, PdfProcessingContext } from \"./types\";\nexport type { PdfContent } from \"./types\";\n\n"]}