{"version":3,"sources":["../src/store/use-editor-store.ts","../src/extensions/font-size.ts","../src/extensions/line-height.ts","../src/extensions/text-direction.ts","../src/components/icons.tsx","../src/lib/utils.ts","../src/components/ui/separator.tsx","../src/components/ui/dropdown-menu.tsx","../src/components/ui/dialog.tsx","../src/components/ui/input.tsx","../src/components/ui/button.tsx","../src/utils/docx/style-utils.ts","../src/utils/docx/image-utils.ts","../src/utils/docx/utils/table-utils.ts","../src/utils/docx/mappings/block-mapping.ts","../src/utils/docx/mappings/inline-mapping.ts","../src/utils/docx/color-utils.ts","../src/utils/docx/mappings/style-mapping.ts","../src/utils/docx/template/styles.xml","../src/utils/docx/exporter.ts","../src/utils/docx/index.ts","../src/Toolbar.tsx","../src/Ruler.tsx","../src/Editor.tsx","../src/utils/pdf/index.ts"],"names":["create","Extension","jsx","twMerge","clsx","React","SeparatorPrimitive","DropdownMenuPrimitive","React2","jsxs","ChevronRight","Check","Circle","DialogPrimitive","React3","X","React4","cva","React5","Slot","AlignmentType","TableRow","Table","TableLayoutType","WidthType","Paragraph","TableCell","ShadingType","HeadingLevel","CheckBox","TextRun","convertInchesToTwip","BorderStyle","PageBreak","HorizontalPositionAlign","ImageRun","HorizontalPositionRelativeFrom","VerticalPositionRelativeFrom","VerticalPositionAlign","TextWrappingType","ExternalHyperlink","UnderlineType","LevelFormat","Packer","Document","saveAs","useState","ListCollapseIcon","MinusIcon","PlusIcon","ListIcon","ListOrderedIcon","AlignLeftIcon","AlignCenterIcon","AlignRightIcon","AlignJustifyIcon","imageUrl","Fragment","ImageIcon","UploadIcon","SearchIcon","Link2Icon","HighlighterIcon","SketchPicker","ChevronDownIcon","BsFileWord","BsFilePdf","Undo2Icon","Redo2Icon","PrinterIcon","BoldIcon","ItalicIcon","UnderlineIcon","useRef","FaCaretDown","useEffect","useEditor","editor","StarterKit","TextAlign","Link","Color","Highlight","FontFamily","TextStyle","Underline","Image","ImageResize","TableHeader","TaskItem","TaskList","EditorContent"],"mappings":"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","file":"index.js","sourcesContent":["import { create } from \"zustand\";\nimport { type Editor } from \"@tiptap/react\";\n\ninterface EditorState {\n  editor: Editor | null;\n  setEditor: (editor: Editor | null) => void;\n}\n\nexport const useEditorStore = create<EditorState>((set) => ({\n  editor: null,\n  setEditor: (editor) => set({ editor }),\n}));\n\n","import { Extension } from \"@tiptap/react\";\nimport \"@tiptap/extension-text-style\";\n\ndeclare module \"@tiptap/core\" {\n  interface Commands<ReturnType> {\n    fontSize: {\n      setFontSize: (size: string) => ReturnType;\n      unsetFontSize: () => ReturnType;\n    };\n  }\n}\n\nexport const FontSizeExtension = Extension.create({\n  name: \"fontSize\",\n\n  addOptions() {\n    return {\n      types: [\"textStyle\"],\n    };\n  },\n\n  addGlobalAttributes() {\n    return [\n      {\n        types: this.options.types,\n        attributes: {\n          fontSize: {\n            default: null,\n            parseHTML: (element) => element.style.fontSize,\n            renderHTML: (attributes) => {\n              if (!attributes.fontSize) {\n                return {};\n              }\n\n              return {\n                style: `font-size: ${attributes.fontSize}`,\n              };\n            },\n          },\n        },\n      },\n    ];\n  },\n\n  addCommands() {\n    return {\n      setFontSize:\n        (fontSize: string) =>\n        ({ chain }) => {\n          return chain().setMark(\"textStyle\", { fontSize }).run();\n        },\n\n      unsetFontSize:\n        () =>\n        ({ chain }) => {\n          return chain()\n            .setMark(\"textStyle\", { fontSize: null })\n            .removeEmptyTextStyle()\n            .run();\n        },\n    };\n  },\n});\n\n","import { Extension } from \"@tiptap/react\";\n\ndeclare module \"@tiptap/core\" {\n  interface Commands<ReturnType> {\n    LineHeight: {\n      setLineHeight: (LineHeight: string) => ReturnType;\n      unsetLineHeight: () => ReturnType;\n    };\n  }\n}\n\nexport const LineHeightExtension = Extension.create({\n  name: \"lineHeight\",\n\n  addOptions() {\n    return {\n      types: [\"paragraph\", \"heading\"],\n      defaultLineHeight: \"normal\",\n    };\n  },\n\n  addGlobalAttributes() {\n    return [\n      {\n        types: this.options.types,\n        attributes: {\n          lineHeight: {\n            default: this.options.defaultLineHeight,\n            renderHTML: (attributes) => {\n              if (!attributes.lineHeight) return {};\n              return {\n                style: `line-height: ${attributes.lineHeight}`,\n              };\n            },\n            parseHTML: (element) => {\n              return element.style.lineHeight || this.options.defaultLineHeight;\n            },\n          },\n        },\n      },\n    ];\n  },\n\n  addCommands() {\n    return {\n      setLineHeight:\n        (lineHeight: string) =>\n        ({ tr, state, dispatch }) => {\n          const { selection } = state;\n          tr = tr.setSelection(selection);\n\n          const { from, to } = selection;\n          state.doc.nodesBetween(from, to, (node, pos) => {\n            if (this.options.types.includes(node.type.name)) {\n              tr = tr.setNodeMarkup(pos, undefined, {\n                ...node.attrs,\n                lineHeight,\n              });\n            }\n          });\n\n          if (dispatch) dispatch(tr);\n          return true;\n        },\n\n      unsetLineHeight:\n        () =>\n        ({ tr, state, dispatch }) => {\n          const { selection } = state;\n          tr = tr.setSelection(selection);\n\n          const { from, to } = selection;\n          state.doc.nodesBetween(from, to, (node, pos) => {\n            if (this.options.types.includes(node.type.name)) {\n              tr = tr.setNodeMarkup(pos, undefined, {\n                ...node.attrs,\n                lineHeight: this.options.defaultLineHeight,\n              });\n            }\n          });\n\n          if (dispatch) dispatch(tr);\n          return true;\n        },\n    };\n  },\n});\n\n","import { Extension } from \"@tiptap/react\";\n\ndeclare module \"@tiptap/core\" {\n  interface Commands<ReturnType> {\n    textDirection: {\n      setTextDirection: (direction: \"ltr\" | \"rtl\") => ReturnType;\n      unsetTextDirection: () => ReturnType;\n    };\n  }\n}\n\nexport const TextDirectionExtension = Extension.create({\n  name: \"textDirection\",\n\n  addOptions() {\n    return {\n      types: [\n        \"paragraph\",\n        \"heading\",\n        \"bulletList\",\n        \"orderedList\",\n        \"listItem\",\n        \"taskList\",\n        \"taskItem\",\n        \"codeBlock\",\n        \"blockquote\",\n      ],\n      defaultDirection: \"ltr\" as \"ltr\" | \"rtl\",\n    };\n  },\n\n  addGlobalAttributes() {\n    return [\n      {\n        types: this.options.types,\n        attributes: {\n          dir: {\n            default: this.options.defaultDirection,\n            renderHTML: (attributes) => {\n              if (!attributes.dir) return {};\n              return {\n                dir: attributes.dir,\n                style: `direction: ${attributes.dir}; text-align: ${attributes.dir === \"rtl\" ? \"right\" : \"left\"}`,\n              };\n            },\n            parseHTML: (element) => {\n              return (\n                element.getAttribute(\"dir\") || element.style.direction || null\n              );\n            },\n          },\n        },\n      },\n    ];\n  },\n\n  addCommands() {\n    return {\n      setTextDirection:\n        (direction: \"ltr\" | \"rtl\") =>\n        ({ tr, state, dispatch }) => {\n          const { selection } = state;\n          tr = tr.setSelection(selection);\n\n          const { from, to } = selection;\n          state.doc.nodesBetween(from, to, (node, pos) => {\n            if (this.options.types.includes(node.type.name)) {\n              tr = tr.setNodeMarkup(pos, undefined, {\n                ...node.attrs,\n                dir: direction,\n              });\n            }\n          });\n\n          if (dispatch) dispatch(tr);\n          return true;\n        },\n\n      unsetTextDirection:\n        () =>\n        ({ tr, state, dispatch }) => {\n          const { selection } = state;\n          tr = tr.setSelection(selection);\n\n          const { from, to } = selection;\n          state.doc.nodesBetween(from, to, (node, pos) => {\n            if (this.options.types.includes(node.type.name)) {\n              tr = tr.setNodeMarkup(pos, undefined, {\n                ...node.attrs,\n                dir: null,\n              });\n            }\n          });\n\n          if (dispatch) dispatch(tr);\n          return true;\n        },\n    };\n  },\n});\n\n","import { type LucideProps } from \"lucide-react\";\n\nexport const TextDirectionLtrIcon = ({ className, ...props }: LucideProps) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    fill=\"currentColor\"\n    className={className}\n    {...props}\n  >\n    <path d=\"M10 10v5h2V4h2v11h2V4h2V2h-8C7.79 2 6 3.79 6 6s1.79 4 4 4zM20 18l-4-4v3h-12v2h12v3z\" />\n  </svg>\n);\n\nexport const TextDirectionRtlIcon = ({ className, ...props }: LucideProps) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    fill=\"currentColor\"\n    className={className}\n    {...props}\n  >\n    <path d=\"M10 10v5h2V4h2v11h2V4h2V2h-8C7.79 2 6 3.79 6 6s1.79 4 4 4zM4 18l4-4v3h12v2h-12v3z\" />\n  </svg>\n);\n\n","import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\n","import * as React from \"react\";\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\";\n\nimport { cn } from \"../../lib/utils\";\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n);\nSeparator.displayName = SeparatorPrimitive.Root.displayName;\n\nexport { Separator };\n\n","import * as React from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { Check, ChevronRight, Circle } from \"lucide-react\";\n\nimport { cn } from \"../../lib/utils\";\n\nconst DropdownMenu = DropdownMenuPrimitive.Root;\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger;\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group;\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal;\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub;\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup;\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean;\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n));\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName;\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n));\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName;\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md\",\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n));\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName;\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean;\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n));\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName;\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n));\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName;\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n));\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName;\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean;\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n));\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName;\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n));\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName;\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  );\n};\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\";\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n};\n\n","import * as React from \"react\";\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\";\nimport { X } from \"lucide-react\";\n\nimport { cn } from \"../../lib/utils\";\n\nconst Dialog = DialogPrimitive.Root;\n\nconst DialogTrigger = DialogPrimitive.Trigger;\n\nconst DialogPortal = DialogPrimitive.Portal;\n\nconst DialogClose = DialogPrimitive.Close;\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n));\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n));\nDialogContent.displayName = DialogPrimitive.Content.displayName;\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n);\nDialogHeader.displayName = \"DialogHeader\";\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n);\nDialogFooter.displayName = \"DialogFooter\";\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n));\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nDialogDescription.displayName = DialogPrimitive.Description.displayName;\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n};\n\n","import * as React from \"react\";\n\nimport { cn } from \"../../lib/utils\";\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nInput.displayName = \"Input\";\n\nexport { Input };\n\n","import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"../../lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2\",\n        sm: \"h-8 rounded-md px-3 text-xs\",\n        lg: \"h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };\n\n","import { AlignmentType } from \"docx\";\n\n/**\n * Parse a dimension value from various formats (number, string with units)\n */\nexport const parseDimension = (value: unknown): number | null => {\n  if (typeof value === \"number\") return value;\n  if (typeof value === \"string\") {\n    const parsed = parseFloat(value.replace(/[^0-9.-]/g, \"\"));\n    return isNaN(parsed) ? null : parsed;\n  }\n  return null;\n};\n\n/**\n * Extract width and height from a CSS style string\n */\nexport const extractStyleDimensions = (\n  style: string\n): { width: number | null; height: number | null } => {\n  let width: number | null = null;\n  let height: number | null = null;\n\n  const widthMatch = style.match(/width:\\s*(\\d+(?:\\.\\d+)?)(px|%|em|rem)?/i);\n  if (widthMatch) width = parseFloat(widthMatch[1]);\n\n  const heightMatch = style.match(/height:\\s*(\\d+(?:\\.\\d+)?)(px|%|em|rem)?/i);\n  if (heightMatch) height = parseFloat(heightMatch[1]);\n\n  return { width, height };\n};\n\n/**\n * Extract alignment from a CSS style string\n * Handles float, margin-based centering, text-align, and flexbox\n */\nexport const extractStyleAlignment = (style: string): string | null => {\n  const floatMatch = style.match(/float:\\s*(left|right)/i);\n  if (floatMatch) return floatMatch[1].toLowerCase();\n\n  // Check for margin-based alignment (used by tiptap-extension-resize-image)\n  // Handles both \"margin: 0 0 0 auto\" and \"margin: 0px 0px 0px auto\" formats\n  // Right alignment: margin with only margin-left as auto\n  const rightMarginPattern =\n    /margin:\\s*0(?:px)?\\s+0(?:px)?\\s+0(?:px)?\\s+auto/i;\n  if (\n    rightMarginPattern.test(style) ||\n    (style.includes(\"margin-left: auto\") &&\n      !style.includes(\"margin-right: auto\"))\n  ) {\n    return \"right\";\n  }\n\n  // Left alignment: margin with only margin-right as auto\n  const leftMarginPattern =\n    /margin:\\s*0(?:px)?\\s+auto\\s+0(?:px)?\\s+0(?:px)?/i;\n  if (\n    leftMarginPattern.test(style) ||\n    (style.includes(\"margin-right: auto\") &&\n      !style.includes(\"margin-left: auto\"))\n  ) {\n    return \"left\";\n  }\n\n  // Center alignment: margin: 0 auto OR both margin-left and margin-right are auto\n  const centerMarginPattern = /margin:\\s*0(?:px)?\\s+auto(?:\\s*;|\\s*$)/i;\n  if (\n    centerMarginPattern.test(style) ||\n    (style.includes(\"margin-left: auto\") &&\n      style.includes(\"margin-right: auto\"))\n  ) {\n    return \"center\";\n  }\n\n  const textAlignMatch = style.match(/text-align:\\s*(left|center|right)/i);\n  if (textAlignMatch) return textAlignMatch[1].toLowerCase();\n\n  // Check for flexbox justify-content\n  const justifyMatch = style.match(\n    /justify-content:\\s*(flex-start|flex-end|center|start|end)/i\n  );\n  if (justifyMatch) {\n    const justify = justifyMatch[1].toLowerCase();\n    if (justify === \"flex-start\" || justify === \"start\") return \"left\";\n    if (justify === \"flex-end\" || justify === \"end\") return \"right\";\n    if (justify === \"center\") return \"center\";\n  }\n\n  return null;\n};\n\n/**\n * Get text alignment from node attributes\n */\nexport const getAlignment = (\n  attrs: Record<string, unknown>\n): (typeof AlignmentType)[keyof typeof AlignmentType] | undefined => {\n  if (!attrs?.textAlign) return undefined;\n  const alignMap: Record<\n    string,\n    (typeof AlignmentType)[keyof typeof AlignmentType]\n  > = {\n    left: AlignmentType.LEFT,\n    center: AlignmentType.CENTER,\n    right: AlignmentType.RIGHT,\n    justify: AlignmentType.JUSTIFIED,\n  };\n  return alignMap[attrs.textAlign as string];\n};\n\n/**\n * Get image alignment from various attribute sources\n */\nexport const getImageAlignment = (\n  attrs: Record<string, unknown>\n): (typeof AlignmentType)[keyof typeof AlignmentType] | undefined => {\n  if (attrs?.align) {\n    const align = (attrs.align as string).toLowerCase();\n    if (align === \"center\") return AlignmentType.CENTER;\n    if (align === \"right\") return AlignmentType.RIGHT;\n    if (align === \"left\") return AlignmentType.LEFT;\n  }\n\n  // Check containerStyle (used by tiptap-extension-resize-image for alignment)\n  if (attrs?.containerStyle && typeof attrs.containerStyle === \"string\") {\n    const containerAlign = extractStyleAlignment(attrs.containerStyle);\n    if (containerAlign === \"center\") return AlignmentType.CENTER;\n    if (containerAlign === \"right\") return AlignmentType.RIGHT;\n    if (containerAlign === \"left\") return AlignmentType.LEFT;\n  }\n\n  if (attrs?.style && typeof attrs.style === \"string\") {\n    const styleAlign = extractStyleAlignment(attrs.style);\n    if (styleAlign === \"center\") return AlignmentType.CENTER;\n    if (styleAlign === \"right\") return AlignmentType.RIGHT;\n    if (styleAlign === \"left\") return AlignmentType.LEFT;\n  }\n\n  if (attrs?.textAlign) {\n    const align = (attrs.textAlign as string).toLowerCase();\n    if (align === \"center\") return AlignmentType.CENTER;\n    if (align === \"right\") return AlignmentType.RIGHT;\n    if (align === \"left\") return AlignmentType.LEFT;\n  }\n\n  return undefined;\n};\n\n","import { parseDimension, extractStyleDimensions } from \"./style-utils\";\n\n/**\n * Determine image type from source URL or data URI\n */\nexport const getImageType = (src: string): \"png\" | \"jpg\" | \"gif\" | \"bmp\" => {\n  if (src.startsWith(\"data:\")) {\n    const mimeMatch = src.match(/data:image\\/(\\w+)/);\n    if (mimeMatch) {\n      const mime = mimeMatch[1].toLowerCase();\n      if (mime === \"jpeg\" || mime === \"jpg\") return \"jpg\";\n      if (mime === \"gif\") return \"gif\";\n      if (mime === \"bmp\") return \"bmp\";\n    }\n    return \"png\";\n  }\n  const ext = src.split(\".\").pop()?.toLowerCase().split(\"?\")[0];\n  if (ext === \"jpg\" || ext === \"jpeg\") return \"jpg\";\n  if (ext === \"gif\") return \"gif\";\n  if (ext === \"bmp\") return \"bmp\";\n  return \"png\";\n};\n\n/**\n * Load image via canvas as fallback for CORS-restricted images\n */\nexport const loadImageViaCanvas = (\n  src: string\n): Promise<ArrayBuffer | null> => {\n  return new Promise((resolve) => {\n    const img = document.createElement(\"img\");\n    img.crossOrigin = \"anonymous\";\n    img.onload = () => {\n      try {\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = img.naturalWidth;\n        canvas.height = img.naturalHeight;\n        const ctx = canvas.getContext(\"2d\");\n        if (!ctx) {\n          resolve(null);\n          return;\n        }\n        ctx.drawImage(img, 0, 0);\n        canvas.toBlob((blob) => {\n          if (blob) {\n            blob\n              .arrayBuffer()\n              .then(resolve)\n              .catch(() => resolve(null));\n          } else {\n            resolve(null);\n          }\n        }, \"image/png\");\n      } catch {\n        resolve(null);\n      }\n    };\n    img.onerror = () => resolve(null);\n    img.src = src;\n  });\n};\n\n/**\n * Fetch image data as ArrayBuffer from various sources\n * Handles data URIs, blob URLs, and regular URLs\n */\nexport const fetchImageAsArrayBuffer = async (\n  src: string\n): Promise<ArrayBuffer | null> => {\n  try {\n    if (src.startsWith(\"data:\")) {\n      const base64Data = src.split(\",\")[1];\n      const binaryString = atob(base64Data);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      return bytes.buffer;\n    }\n\n    if (src.startsWith(\"blob:\")) {\n      const response = await fetch(src);\n      if (!response.ok) throw new Error(\"Failed to fetch blob image\");\n      return await response.arrayBuffer();\n    }\n\n    try {\n      const response = await fetch(src);\n      if (!response.ok) throw new Error(\"Failed to fetch image\");\n      return await response.arrayBuffer();\n    } catch {\n      return await loadImageViaCanvas(src);\n    }\n  } catch (error) {\n    console.error(\"Error fetching image:\", error);\n    return null;\n  }\n};\n\n/**\n * Get image dimensions using createImageBitmap (more efficient)\n * Falls back to DOM Image element if not supported\n */\nexport const getImageDimensionsFromBlob = async (\n  blob: Blob\n): Promise<{ width: number; height: number }> => {\n  // Try createImageBitmap first (more efficient, no DOM rendering needed)\n  if (typeof createImageBitmap !== \"undefined\") {\n    try {\n      const bmp = await createImageBitmap(blob);\n      const { width, height } = bmp;\n      bmp.close(); // Free memory\n      return { width, height };\n    } catch {\n      // Fall through to DOM fallback\n    }\n  }\n\n  // Fallback to DOM Image element\n  return new Promise((resolve, reject) => {\n    const url = URL.createObjectURL(blob);\n    const img = document.createElement(\"img\");\n    img.onload = () => {\n      URL.revokeObjectURL(url);\n      resolve({ width: img.naturalWidth, height: img.naturalHeight });\n    };\n    img.onerror = () => {\n      URL.revokeObjectURL(url);\n      reject(new Error(\"Failed to load image\"));\n    };\n    img.src = url;\n  });\n};\n\n/**\n * Get actual image dimensions by loading the image\n */\nexport const getActualImageDimensions = (\n  src: string\n): Promise<{ naturalWidth: number; naturalHeight: number } | null> => {\n  return new Promise((resolve) => {\n    const img = document.createElement(\"img\");\n    img.crossOrigin = \"anonymous\";\n    img.onload = () => {\n      resolve({\n        naturalWidth: img.naturalWidth,\n        naturalHeight: img.naturalHeight,\n      });\n    };\n    img.onerror = () => resolve(null);\n    img.src = src;\n  });\n};\n\n/**\n * Calculate final image dimensions with aspect ratio preservation\n * and max width constraint\n */\nexport const calculateFinalImageDimensions = async (\n  attrs: Record<string, unknown>,\n  src: string,\n  knownDimensions?: { width: number; height: number }\n): Promise<{ width: number; height: number }> => {\n  const maxWidth = 600;\n\n  // First try to get dimensions from attrs - check multiple possible attribute names\n  let width: number | null = null;\n  let height: number | null = null;\n\n  // Check containerStyle attribute (used by tiptap-extension-resize-image)\n  if (attrs?.containerStyle && typeof attrs.containerStyle === \"string\") {\n    const containerStyleDims = extractStyleDimensions(attrs.containerStyle);\n    if (containerStyleDims.width) width = containerStyleDims.width;\n    if (containerStyleDims.height) height = containerStyleDims.height;\n  }\n\n  // Check style attribute\n  if (attrs?.style && typeof attrs.style === \"string\") {\n    const styleDims = extractStyleDimensions(attrs.style);\n    if (styleDims.width) width = styleDims.width;\n    if (styleDims.height) height = styleDims.height;\n  }\n\n  // Check direct width/height attributes\n  const attrWidth = parseDimension(attrs?.width);\n  const attrHeight = parseDimension(attrs?.height);\n  if (attrWidth) width = attrWidth;\n  if (attrHeight) height = attrHeight;\n\n  // Check data-* attributes (common for resizable images)\n  const dataWidth = parseDimension(attrs?.[\"data-width\"]);\n  const dataHeight = parseDimension(attrs?.[\"data-height\"]);\n  if (dataWidth) width = dataWidth;\n  if (dataHeight) height = dataHeight;\n\n  // Check resized* attributes\n  const resizedWidth = parseDimension(attrs?.resizedWidth);\n  const resizedHeight = parseDimension(attrs?.resizedHeight);\n  if (resizedWidth) width = resizedWidth;\n  if (resizedHeight) height = resizedHeight;\n\n  // Check previewWidth (BlockNote style)\n  const previewWidth = parseDimension(attrs?.previewWidth);\n  if (previewWidth) width = previewWidth;\n\n  // If we have both dimensions from attrs, use them\n  if (width && height) {\n    if (width > maxWidth) {\n      const ratio = maxWidth / width;\n      width = maxWidth;\n      height = Math.round(height * ratio);\n    }\n    return { width: Math.round(width), height: Math.round(height) };\n  }\n\n  // Use known dimensions if provided\n  let naturalWidth = knownDimensions?.width;\n  let naturalHeight = knownDimensions?.height;\n\n  // If we don't have natural dimensions, try to get them\n  if (!naturalWidth || !naturalHeight) {\n    const actualDims = await getActualImageDimensions(src);\n    if (actualDims) {\n      naturalWidth = actualDims.naturalWidth;\n      naturalHeight = actualDims.naturalHeight;\n    }\n  }\n\n  if (naturalWidth && naturalHeight) {\n    const aspectRatio = naturalHeight / naturalWidth;\n\n    if (width && !height) {\n      // We have width, calculate height preserving aspect ratio\n      height = Math.round(width * aspectRatio);\n    } else if (height && !width) {\n      // We have height, calculate width preserving aspect ratio\n      width = Math.round(height / aspectRatio);\n    } else {\n      // No dimensions provided - use natural dimensions but cap at maxWidth\n      width = naturalWidth;\n      height = naturalHeight;\n    }\n\n    // Apply max width constraint while preserving aspect ratio\n    if (width > maxWidth) {\n      const ratio = maxWidth / width;\n      width = maxWidth;\n      height = Math.round(height * ratio);\n    }\n\n    return { width: Math.round(width), height: Math.round(height) };\n  }\n\n  // Fallback if we can't load the image\n  if (!width) width = 300;\n  if (!height) height = 300;\n\n  if (width > maxWidth) {\n    const ratio = maxWidth / width;\n    width = maxWidth;\n    height = Math.round(height * ratio);\n  }\n\n  return { width: Math.round(width), height: Math.round(height) };\n};\n","import {\n  Table,\n  TableRow,\n  TableCell,\n  Paragraph,\n  ShadingType,\n  WidthType,\n  TableLayoutType,\n  AlignmentType,\n} from \"docx\";\nimport type { DocNode, DOCXExporterInterface, ParagraphChild } from \"../types\";\nimport { getAlignment } from \"../style-utils\";\n\nconst DEFAULT_COLUMN_WIDTH = 120;\nconst TWIPS_PER_POINT = 20;\nconst POINTS_PER_PIXEL = 0.75;\n\n/**\n * Create a DOCX table from TipTap table node\n * Supports colspan, rowspan, header rows/columns, and per-cell styling\n */\nexport function createTable(\n  node: DocNode,\n  exporter: DOCXExporterInterface\n): Table {\n  const rows = node.content || [];\n  const firstRow = rows[0];\n  const columnCount = firstRow?.content?.length || 1;\n\n  // Detect RTL from first cell content\n  const firstCell = firstRow?.content?.[0];\n  const firstPara = firstCell?.content?.[0];\n  const isTableRTL =\n    firstPara?.attrs?.dir === \"rtl\" ||\n    firstCell?.attrs?.dir === \"rtl\" ||\n    firstRow?.attrs?.dir === \"rtl\" ||\n    node.attrs?.dir === \"rtl\";\n\n  // Calculate column widths\n  const totalTableWidth = 9000; // in twips\n  const columnWidths = calculateColumnWidths(node, columnCount, totalTableWidth);\n\n  // Check for header configuration\n  const headerRows = (node.attrs?.headerRows as number) || 0;\n  const headerCols = (node.attrs?.headerCols as number) || 0;\n\n  const tableRows = rows.map((row, rowIndex) => {\n    const isHeaderRow = rowIndex < headerRows;\n    const cells = (row.content || []).map((cell, colIndex) => {\n      const isHeaderCol = colIndex < headerCols;\n      return createTableCell(\n        cell,\n        exporter,\n        columnWidths[colIndex] || columnWidths[0],\n        isHeaderRow || isHeaderCol,\n        isTableRTL\n      );\n    });\n\n    return new TableRow({\n      children: cells,\n      tableHeader: isHeaderRow,\n    });\n  });\n\n  return new Table({\n    rows: tableRows,\n    columnWidths,\n    layout: TableLayoutType.FIXED,\n    visuallyRightToLeft: isTableRTL,\n    width: { size: totalTableWidth, type: WidthType.DXA },\n  });\n}\n\n/**\n * Calculate column widths from table data or default to equal distribution\n */\nfunction calculateColumnWidths(\n  node: DocNode,\n  columnCount: number,\n  totalWidth: number\n): number[] {\n  // Check for explicit column widths in attrs\n  const explicitWidths = node.attrs?.columnWidths as number[] | undefined;\n\n  if (explicitWidths && explicitWidths.length === columnCount) {\n    // Convert pixel widths to twips\n    return explicitWidths.map(\n      (w) => (w ?? DEFAULT_COLUMN_WIDTH) * POINTS_PER_PIXEL * TWIPS_PER_POINT\n    );\n  }\n\n  // Default to equal distribution\n  const columnWidth = Math.floor(totalWidth / columnCount);\n  return Array(columnCount).fill(columnWidth);\n}\n\n/**\n * Create a single table cell with content and styling\n */\nfunction createTableCell(\n  cell: DocNode,\n  exporter: DOCXExporterInterface,\n  width: number,\n  isHeader: boolean,\n  isTableRTL: boolean\n): TableCell {\n  // Get cell attributes\n  const colspan = (cell.attrs?.colspan as number) || 1;\n  const rowspan = (cell.attrs?.rowspan as number) || 1;\n  const backgroundColor = cell.attrs?.backgroundColor as string | undefined;\n\n  // Process cell content into paragraphs\n  const cellParagraphs = (cell.content || []).map((para) => {\n    const paraDir =\n      (para.attrs?.dir as string | undefined) ||\n      (cell.attrs?.dir as string | undefined);\n    const isParaRTL = paraDir === \"rtl\" || isTableRTL;\n\n    const children = exporter.transformInlineContent(para.content || []);\n\n    return new Paragraph({\n      children: children as ParagraphChild[],\n      bidirectional: isParaRTL ? true : undefined,\n      alignment: isParaRTL ? AlignmentType.START : getAlignment(para.attrs || {}),\n      run: isHeader ? { bold: true } : undefined,\n    });\n  });\n\n  // If no content, add empty paragraph\n  if (cellParagraphs.length === 0) {\n    cellParagraphs.push(new Paragraph({ children: [] }));\n  }\n\n  return new TableCell({\n    children: cellParagraphs,\n    width: { size: width, type: WidthType.DXA },\n    columnSpan: colspan > 1 ? colspan : undefined,\n    rowSpan: rowspan > 1 ? rowspan : undefined,\n    shading: backgroundColor\n      ? {\n          type: ShadingType.SOLID,\n          color: backgroundColor.replace(\"#\", \"\"),\n          fill: backgroundColor.replace(\"#\", \"\"),\n        }\n      : undefined,\n  });\n}\n\n","import {\n  Paragraph,\n  TextRun,\n  ImageRun,\n  HeadingLevel,\n  AlignmentType,\n  CheckBox,\n  ShadingType,\n  PageBreak,\n  convertInchesToTwip,\n  HorizontalPositionAlign,\n  HorizontalPositionRelativeFrom,\n  VerticalPositionAlign,\n  VerticalPositionRelativeFrom,\n  TextWrappingType,\n  BorderStyle,\n} from \"docx\";\nimport type { DocNode, BlockMapping, DOCXExporterInterface, ParagraphChild } from \"../types\";\nimport { getAlignment, getImageAlignment } from \"../style-utils\";\nimport {\n  getImageType,\n  fetchImageAsArrayBuffer,\n  getImageDimensionsFromBlob,\n  calculateFinalImageDimensions,\n} from \"../image-utils\";\nimport { createTable } from \"../utils/table-utils\";\n\n/**\n * Default block mappings for TipTap nodes to docx elements\n */\nexport const defaultBlockMapping: BlockMapping = {\n  paragraph: (node, exporter, _nestingLevel) => {\n    const isRTL = node.attrs?.dir === \"rtl\";\n    const baseAlignment = getAlignment(node.attrs || {});\n\n    // Check for images in paragraph\n    const hasImage = node.content?.some((item) => isImageNode(item));\n\n    if (hasImage) {\n      return processImageParagraph(node, exporter, baseAlignment, isRTL);\n    }\n\n    const children = exporter.transformInlineContent(node.content || []);\n    return new Paragraph({\n      children: children as ParagraphChild[],\n      alignment: isRTL ? AlignmentType.START : baseAlignment,\n      bidirectional: isRTL ? true : undefined,\n      style: \"Normal\",\n      run: { font: \"Inter\" },\n    });\n  },\n\n  heading: (node, exporter, _nestingLevel) => {\n    const level = (node.attrs?.level as number) || 1;\n    const isRTL = node.attrs?.dir === \"rtl\";\n\n    const headingLevelMap: Record<number, (typeof HeadingLevel)[keyof typeof HeadingLevel]> = {\n      1: HeadingLevel.HEADING_1,\n      2: HeadingLevel.HEADING_2,\n      3: HeadingLevel.HEADING_3,\n      4: HeadingLevel.HEADING_4,\n      5: HeadingLevel.HEADING_5,\n      6: HeadingLevel.HEADING_6,\n    };\n\n    const children = exporter.transformInlineContent(node.content || []);\n    return new Paragraph({\n      children: children as ParagraphChild[],\n      heading: headingLevelMap[level] || HeadingLevel.HEADING_1,\n      bidirectional: isRTL ? true : undefined,\n      alignment: isRTL ? AlignmentType.START : getAlignment(node.attrs || {}),\n    });\n  },\n\n  bulletList: (node, exporter, nestingLevel) => {\n    return processList(node, exporter, nestingLevel, \"bullet\");\n  },\n\n  orderedList: (node, exporter, nestingLevel) => {\n    return processList(node, exporter, nestingLevel, \"ordered\");\n  },\n\n  taskList: (node, exporter, _nestingLevel) => {\n    const paragraphs: Paragraph[] = [];\n    const nodeDir = node.attrs?.dir as string | undefined;\n\n    for (const taskItem of node.content || []) {\n      const isChecked = taskItem.attrs?.checked === true;\n      const itemDir = (taskItem.attrs?.dir as string | undefined) || nodeDir;\n\n      for (const para of taskItem.content || []) {\n        if (para.type === \"paragraph\") {\n          const paraDir = (para.attrs?.dir as string | undefined) || itemDir;\n          const isParaRTL = paraDir === \"rtl\";\n\n          const children = exporter.transformInlineContent(para.content || []);\n          paragraphs.push(\n            new Paragraph({\n              children: [\n                new CheckBox({ checked: isChecked }),\n                new TextRun({ text: \" \", rightToLeft: isParaRTL }),\n                ...(children as ParagraphChild[]),\n              ],\n              bidirectional: isParaRTL ? true : undefined,\n              alignment: isParaRTL ? AlignmentType.START : getAlignment(para.attrs || {}),\n            })\n          );\n        }\n      }\n    }\n\n    return paragraphs;\n  },\n\n  blockquote: (node, exporter, _nestingLevel) => {\n    const paragraphs: Paragraph[] = [];\n    const nodeDir = node.attrs?.dir as string | undefined;\n\n    for (const para of node.content || []) {\n      const paraDir = (para.attrs?.dir as string | undefined) || nodeDir;\n      const isParaRTL = paraDir === \"rtl\";\n\n      if (para.type === \"paragraph\") {\n        const children = exporter.transformInlineContent(para.content || []);\n        paragraphs.push(\n          new Paragraph({\n            children: children as ParagraphChild[],\n            indent: { left: convertInchesToTwip(0.5) },\n            bidirectional: isParaRTL ? true : undefined,\n            alignment: isParaRTL ? AlignmentType.START : getAlignment(para.attrs || {}),\n            border: {\n              left: {\n                color: \"7D797A\",\n                space: 15,\n                style: BorderStyle.SINGLE,\n                size: 24,\n              },\n            },\n          })\n        );\n      }\n    }\n\n    return paragraphs;\n  },\n\n  codeBlock: (node, _exporter, _nestingLevel) => {\n    const isRTL = node.attrs?.dir === \"rtl\";\n    const codeLines = node.content?.map((c) => c.text || \"\").join(\"\\n\") || \"\";\n\n    // Split by newlines and create TextRuns with breaks\n    const textRuns = codeLines.split(\"\\n\").map((line, index) => {\n      return new TextRun({\n        text: line,\n        break: index > 0 ? 1 : 0,\n        font: { name: \"JetBrains Mono\" },\n        size: \"10pt\",\n        rightToLeft: isRTL,\n      });\n    });\n\n    return new Paragraph({\n      children: textRuns,\n      style: \"Codeblock\",\n      shading: {\n        type: ShadingType.SOLID,\n        color: \"161616\",\n        fill: \"161616\",\n      },\n      bidirectional: isRTL ? true : undefined,\n      alignment: isRTL ? AlignmentType.START : undefined,\n    });\n  },\n\n  image: async (node, exporter, _nestingLevel) => {\n    const result = await createImageParagraph(node, undefined, exporter.isRTL);\n    return result || new Paragraph({ children: [] });\n  },\n\n  resizableImage: async (node, exporter, _nestingLevel) => {\n    const result = await createImageParagraph(node, undefined, exporter.isRTL);\n    return result || new Paragraph({ children: [] });\n  },\n\n  imageResize: async (node, exporter, _nestingLevel) => {\n    const result = await createImageParagraph(node, undefined, exporter.isRTL);\n    return result || new Paragraph({ children: [] });\n  },\n\n  table: (node, exporter, _nestingLevel) => {\n    return createTable(node, exporter);\n  },\n\n  horizontalRule: () => {\n    return new Paragraph({ thematicBreak: true });\n  },\n\n  hardBreak: () => {\n    return new Paragraph({ children: [] });\n  },\n\n  pageBreak: () => {\n    return new Paragraph({\n      children: [new PageBreak()],\n    });\n  },\n};\n\n// Helper functions\n\nfunction isImageNode(node: DocNode): boolean {\n  return (\n    node.type === \"image\" ||\n    node.type === \"resizableImage\" ||\n    node.type === \"imageResize\"\n  );\n}\n\nasync function processImageParagraph(\n  node: DocNode,\n  exporter: DOCXExporterInterface,\n  baseAlignment: (typeof AlignmentType)[keyof typeof AlignmentType] | undefined,\n  isRTL: boolean\n): Promise<Paragraph[]> {\n  const paragraphs: Paragraph[] = [];\n\n  for (const item of node.content || []) {\n    if (isImageNode(item)) {\n      const imgParagraph = await createImageParagraph(item, baseAlignment, isRTL);\n      if (imgParagraph) paragraphs.push(imgParagraph);\n    } else if (item.type === \"text\") {\n      const children = exporter.transformInlineContent([item]);\n      paragraphs.push(\n        new Paragraph({\n          children: children as ParagraphChild[],\n          alignment: isRTL ? AlignmentType.START : baseAlignment,\n          bidirectional: isRTL ? true : undefined,\n        })\n      );\n    }\n  }\n\n  return paragraphs;\n}\n\nasync function createImageParagraph(\n  item: DocNode,\n  parentAlignment?: (typeof AlignmentType)[keyof typeof AlignmentType],\n  isRTL: boolean = false\n): Promise<Paragraph | null> {\n  const src = item.attrs?.src as string;\n  if (!src) {\n    console.warn(\"Image node has no src:\", item);\n    return null;\n  }\n\n  const imageData = await fetchImageAsArrayBuffer(src);\n  if (!imageData) {\n    console.warn(\"Failed to fetch image data for:\", src.substring(0, 100));\n    return null;\n  }\n\n  // Use createImageBitmap for dimension calculation when possible\n  let dimensions: { width: number; height: number };\n  try {\n    const blob = new Blob([imageData]);\n    dimensions = await getImageDimensionsFromBlob(blob);\n    // Apply constraints\n    const maxWidth = 600;\n    if (dimensions.width > maxWidth) {\n      const ratio = maxWidth / dimensions.width;\n      dimensions.width = maxWidth;\n      dimensions.height = Math.round(dimensions.height * ratio);\n    }\n    // Apply any explicit dimensions from attrs\n    dimensions = await calculateFinalImageDimensions(item.attrs || {}, src, dimensions);\n  } catch {\n    dimensions = await calculateFinalImageDimensions(item.attrs || {}, src);\n  }\n\n  const imageType = getImageType(src);\n  const imageAlignment = getImageAlignment(item.attrs || {});\n\n  // For RTL content: if no explicit alignment, default to RIGHT\n  let finalAlignment = imageAlignment || parentAlignment;\n  if (isRTL && !finalAlignment) {\n    finalAlignment = AlignmentType.RIGHT;\n  }\n\n  // Map alignment to horizontal position for floating images\n  let horizontalAlign: (typeof HorizontalPositionAlign)[keyof typeof HorizontalPositionAlign] | undefined;\n  const alignStr = String(finalAlignment);\n  if (alignStr === \"right\") {\n    horizontalAlign = HorizontalPositionAlign.RIGHT;\n  } else if (alignStr === \"center\") {\n    horizontalAlign = HorizontalPositionAlign.CENTER;\n  } else if (alignStr === \"left\") {\n    horizontalAlign = HorizontalPositionAlign.LEFT;\n  }\n\n  // Create caption if present\n  const caption = item.attrs?.caption as string | undefined;\n\n  // If we have explicit alignment, use floating image for reliable positioning\n  if (horizontalAlign) {\n    return new Paragraph({\n      children: [\n        new ImageRun({\n          data: imageData,\n          transformation: { width: dimensions.width, height: dimensions.height },\n          type: imageType,\n          altText: caption\n            ? { description: caption, name: caption, title: caption }\n            : undefined,\n          floating: {\n            horizontalPosition: {\n              relative: HorizontalPositionRelativeFrom.MARGIN,\n              align: horizontalAlign,\n            },\n            verticalPosition: {\n              relative: VerticalPositionRelativeFrom.PARAGRAPH,\n              align: VerticalPositionAlign.TOP,\n            },\n            wrap: { type: TextWrappingType.TOP_AND_BOTTOM },\n          },\n        }),\n      ],\n      bidirectional: isRTL ? true : undefined,\n    });\n  }\n\n  // Fallback to inline image with paragraph alignment\n  return new Paragraph({\n    children: [\n      new ImageRun({\n        data: imageData,\n        transformation: { width: dimensions.width, height: dimensions.height },\n        type: imageType,\n        altText: caption\n          ? { description: caption, name: caption, title: caption }\n          : undefined,\n      }),\n    ],\n    alignment: finalAlignment,\n    bidirectional: isRTL ? true : undefined,\n  });\n}\n\nfunction processList(\n  node: DocNode,\n  exporter: DOCXExporterInterface,\n  nestingLevel: number,\n  listType: \"bullet\" | \"ordered\"\n): Paragraph[] {\n  const paragraphs: Paragraph[] = [];\n  const nodeDir = node.attrs?.dir as string | undefined;\n\n  const processListItems = (items: DocNode[], level: number, parentDir?: string) => {\n    for (const listItem of items) {\n      const itemDir = (listItem.attrs?.dir as string | undefined) || parentDir || nodeDir;\n\n      for (const content of listItem.content || []) {\n        if (content.type === \"bulletList\" || content.type === \"orderedList\") {\n          // Nested list\n          processListItems(content.content || [], level + 1, itemDir);\n        } else if (content.type === \"paragraph\") {\n          const paraDir = (content.attrs?.dir as string | undefined) || itemDir;\n          const isParaRTL = paraDir === \"rtl\";\n\n          const children = exporter.transformInlineContent(content.content || []);\n          paragraphs.push(\n            new Paragraph({\n              children: children as ParagraphChild[],\n              numbering:\n                listType === \"ordered\"\n                  ? { reference: \"goateditor-numbered-list\", level }\n                  : undefined,\n              bullet: listType === \"bullet\" ? { level } : undefined,\n              bidirectional: isParaRTL ? true : undefined,\n              alignment: isParaRTL ? AlignmentType.START : getAlignment(content.attrs || {}),\n            })\n          );\n        }\n      }\n    }\n  };\n\n  processListItems(node.content || [], nestingLevel, nodeDir);\n  return paragraphs;\n}\n\n","import { TextRun, ExternalHyperlink } from \"docx\";\nimport type { DocNode, InlineContentMapping, DOCXExporterInterface, ParagraphChild } from \"../types\";\n\n/**\n * Inline content mappings for TipTap nodes to docx paragraph children\n */\nexport const defaultInlineContentMapping: InlineContentMapping = {\n  text: (node, exporter) => {\n    return exporter.transformStyledText(node);\n  },\n\n  hardBreak: () => {\n    return new TextRun({ break: 1 });\n  },\n};\n\n/**\n * Process inline content from TipTap nodes into docx paragraph children\n */\nexport function processInlineContent(\n  content: DocNode[],\n  exporter: DOCXExporterInterface\n): ParagraphChild[] {\n  if (!content || content.length === 0) {\n    return [new TextRun({ text: \"\", rightToLeft: exporter.isRTL })];\n  }\n\n  const result: ParagraphChild[] = [];\n\n  for (const item of content) {\n    // Check for link mark\n    const linkMark = item.marks?.find((m) => m.type === \"link\");\n\n    if (linkMark && linkMark.attrs?.href) {\n      // Create hyperlink with styled text\n      const styledText = exporter.transformStyledText(item, true);\n      result.push(\n        new ExternalHyperlink({\n          children: [styledText],\n          link: linkMark.attrs.href as string,\n        })\n      );\n    } else {\n      // Use mapping or default to text\n      const mapping = defaultInlineContentMapping[item.type];\n      if (mapping) {\n        result.push(mapping(item, exporter));\n      } else if (item.type === \"text\") {\n        result.push(exporter.transformStyledText(item));\n      }\n    }\n  }\n\n  return result.length > 0\n    ? result\n    : [new TextRun({ text: \"\", rightToLeft: exporter.isRTL })];\n}\n\n","/**\n * Normalize color to uppercase hex format (without # prefix)\n * Handles hex colors and rgb() format\n */\nexport const normalizeColor = (color: string | undefined): string | undefined => {\n  if (!color) return undefined;\n  // Remove # prefix if present\n  let normalized = color.replace(/^#/, \"\");\n  // Handle rgb() format\n  const rgbMatch = color.match(/rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/);\n  if (rgbMatch) {\n    const r = parseInt(rgbMatch[1]).toString(16).padStart(2, \"0\");\n    const g = parseInt(rgbMatch[2]).toString(16).padStart(2, \"0\");\n    const b = parseInt(rgbMatch[3]).toString(16).padStart(2, \"0\");\n    normalized = `${r}${g}${b}`;\n  }\n  return normalized.toUpperCase();\n};\n\n/**\n * Map TipTap highlight colors to docx HighlightColor names\n */\nexport const mapHighlightColor = (color: string): string | undefined => {\n  const colorMap: Record<string, string> = {\n    yellow: \"yellow\",\n    green: \"green\",\n    cyan: \"cyan\",\n    magenta: \"magenta\",\n    blue: \"blue\",\n    red: \"red\",\n    darkBlue: \"darkBlue\",\n    darkCyan: \"darkCyan\",\n    darkGreen: \"darkGreen\",\n    darkMagenta: \"darkMagenta\",\n    darkRed: \"darkRed\",\n    darkYellow: \"darkYellow\",\n    darkGray: \"darkGray\",\n    lightGray: \"lightGray\",\n    black: \"black\",\n    white: \"white\",\n  };\n  return colorMap[color.toLowerCase()] || undefined;\n};\n\n/** Valid highlight color type for docx */\nexport type HighlightColor =\n  | \"yellow\"\n  | \"green\"\n  | \"cyan\"\n  | \"magenta\"\n  | \"blue\"\n  | \"red\"\n  | \"darkBlue\"\n  | \"darkCyan\"\n  | \"darkGreen\"\n  | \"darkMagenta\"\n  | \"darkRed\"\n  | \"darkYellow\"\n  | \"darkGray\"\n  | \"lightGray\"\n  | \"black\"\n  | \"white\"\n  | undefined;\n\n","import { IRunPropertiesOptions, ShadingType, UnderlineType } from \"docx\";\nimport type { Mark, StyleMapping, DOCXExporterInterface } from \"../types\";\nimport { normalizeColor, mapHighlightColor } from \"../color-utils\";\n\n/**\n * Style mappings for TipTap marks to docx run properties\n */\nexport const defaultStyleMapping: StyleMapping = {\n  bold: (value) => {\n    if (!value) return {};\n    return { bold: true };\n  },\n\n  italic: (value) => {\n    if (!value) return {};\n    return { italics: true };\n  },\n\n  underline: (value) => {\n    if (!value) return {};\n    return { underline: { type: UnderlineType.SINGLE } };\n  },\n\n  strike: (value) => {\n    if (!value) return {};\n    return { strike: true };\n  },\n\n  subscript: (value) => {\n    if (!value) return {};\n    return { subScript: true };\n  },\n\n  superscript: (value) => {\n    if (!value) return {};\n    return { superScript: true };\n  },\n\n  code: (value) => {\n    if (!value) return {};\n    return { font: { name: \"JetBrains Mono\" } };\n  },\n\n  textColor: (value) => {\n    if (!value || typeof value !== \"string\") return {};\n    const color = normalizeColor(value);\n    return color ? { color } : {};\n  },\n\n  backgroundColor: (value) => {\n    if (!value || typeof value !== \"string\") return {};\n    // First try standard highlight colors\n    const highlight = mapHighlightColor(value);\n    if (highlight) {\n      return { highlight: highlight as IRunPropertiesOptions[\"highlight\"] };\n    }\n    // Fall back to shading for custom colors\n    const color = normalizeColor(value);\n    if (color) {\n      return {\n        shading: {\n          type: ShadingType.SOLID,\n          color,\n          fill: color,\n        },\n      };\n    }\n    return {};\n  },\n};\n\n/**\n * Map TipTap marks to docx run properties\n */\nexport function mapMarksToStyles(\n  marks: Mark[],\n  _exporter: DOCXExporterInterface\n): IRunPropertiesOptions {\n  const result: IRunPropertiesOptions = {};\n\n  for (const mark of marks) {\n    const mapping = defaultStyleMapping[mark.type];\n    if (mapping) {\n      // For textStyle marks, extract individual style properties\n      if (mark.type === \"textStyle\" && mark.attrs) {\n        if (mark.attrs.color) {\n          Object.assign(result, defaultStyleMapping.textColor(mark.attrs.color, _exporter));\n        }\n        if (mark.attrs.backgroundColor) {\n          Object.assign(\n            result,\n            defaultStyleMapping.backgroundColor(mark.attrs.backgroundColor, _exporter)\n          );\n        }\n        if (mark.attrs.fontFamily) {\n          Object.assign(result, { font: { name: mark.attrs.fontFamily as string } });\n        }\n        if (mark.attrs.fontSize) {\n          const fontSizeAttr = mark.attrs.fontSize as string;\n          const sizeMatch = fontSizeAttr.match(/^(\\d+(?:\\.\\d+)?)(pt|px)?$/);\n          if (sizeMatch) {\n            const value = parseFloat(sizeMatch[1]);\n            const unit = sizeMatch[2] || \"pt\";\n            const fontSize =\n              unit === \"px\"\n                ? (`${Math.round(value * 0.75)}pt` as `${number}pt`)\n                : (`${value}pt` as `${number}pt`);\n            Object.assign(result, { size: fontSize });\n          }\n        }\n      } else if (mark.type === \"highlight\" && mark.attrs?.color) {\n        Object.assign(result, defaultStyleMapping.backgroundColor(mark.attrs.color, _exporter));\n      } else {\n        Object.assign(result, mapping(true, _exporter));\n      }\n    }\n  }\n\n  return result;\n}\n\n","<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<w:styles xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\"\n    xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\"\n    xmlns:w=\"http://schemas.openxmlformats.org/wordprocessingml/2006/main\"\n    xmlns:w14=\"http://schemas.microsoft.com/office/word/2010/wordml\"\n    xmlns:w15=\"http://schemas.microsoft.com/office/word/2012/wordml\"\n    xmlns:w16cex=\"http://schemas.microsoft.com/office/word/2018/wordml/cex\"\n    xmlns:w16cid=\"http://schemas.microsoft.com/office/word/2016/wordml/cid\"\n    xmlns:w16=\"http://schemas.microsoft.com/office/word/2018/wordml\"\n    xmlns:w16du=\"http://schemas.microsoft.com/office/word/2023/wordml/word16du\"\n    xmlns:w16sdtdh=\"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash\"\n    xmlns:w16se=\"http://schemas.microsoft.com/office/word/2015/wordml/symex\"\n    mc:Ignorable=\"w14 w15 w16se w16cid w16 w16cex w16sdtdh w16du\">\n    <w:docDefaults>\n        <w:rPrDefault>\n            <w:rPr>\n                <w:rFonts w:asciiTheme=\"minorHAnsi\" w:eastAsiaTheme=\"minorHAnsi\"\n                    w:hAnsiTheme=\"minorHAnsi\" w:cstheme=\"minorBidi\" />\n                <w:kern w:val=\"2\" />\n                <w:sz w:val=\"24\" />\n                <w:szCs w:val=\"24\" />\n                <w:lang w:val=\"en-US\" w:eastAsia=\"en-US\" w:bidi=\"ar-SA\" />\n                <w14:ligatures w14:val=\"standardContextual\" />\n            </w:rPr>\n        </w:rPrDefault>\n        <w:pPrDefault>\n            <w:pPr>\n                <w:spacing w:after=\"160\" w:line=\"278\" w:lineRule=\"auto\" />\n            </w:pPr>\n        </w:pPrDefault>\n    </w:docDefaults>\n    <w:latentStyles w:defLockedState=\"0\" w:defUIPriority=\"99\" w:defSemiHidden=\"0\"\n        w:defUnhideWhenUsed=\"0\" w:defQFormat=\"0\" w:count=\"376\">\n        <w:lsdException w:name=\"Normal\" w:uiPriority=\"0\" w:qFormat=\"1\" />\n        <w:lsdException w:name=\"heading 1\" w:uiPriority=\"9\" />\n        <w:lsdException w:name=\"heading 2\" w:semiHidden=\"1\" w:uiPriority=\"9\" w:unhideWhenUsed=\"1\" />\n        <w:lsdException w:name=\"heading 3\" w:semiHidden=\"1\" w:uiPriority=\"9\" w:unhideWhenUsed=\"1\" w:qFormat=\"1\" />\n        <w:lsdException w:name=\"heading 4\" w:semiHidden=\"1\" w:uiPriority=\"9\" w:unhideWhenUsed=\"1\" w:qFormat=\"1\" />\n        <w:lsdException w:name=\"heading 5\" w:semiHidden=\"1\" w:uiPriority=\"9\" w:unhideWhenUsed=\"1\" w:qFormat=\"1\" />\n        <w:lsdException w:name=\"heading 6\" w:semiHidden=\"1\" w:uiPriority=\"9\" w:unhideWhenUsed=\"1\" w:qFormat=\"1\" />\n        <w:lsdException w:name=\"Title\" w:uiPriority=\"10\" />\n        <w:lsdException w:name=\"Subtitle\" w:uiPriority=\"11\" w:qFormat=\"1\" />\n        <w:lsdException w:name=\"Hyperlink\" w:semiHidden=\"1\" w:unhideWhenUsed=\"1\" />\n        <w:lsdException w:name=\"Strong\" w:uiPriority=\"22\" w:qFormat=\"1\" />\n        <w:lsdException w:name=\"Emphasis\" w:uiPriority=\"20\" w:qFormat=\"1\" />\n        <w:lsdException w:name=\"Table Grid\" w:uiPriority=\"39\" />\n        <w:lsdException w:name=\"No Spacing\" w:uiPriority=\"1\" w:qFormat=\"1\" />\n        <w:lsdException w:name=\"List Paragraph\" w:uiPriority=\"34\" w:qFormat=\"1\" />\n        <w:lsdException w:name=\"Quote\" w:uiPriority=\"29\" w:qFormat=\"1\" />\n        <w:lsdException w:name=\"caption\" w:semiHidden=\"1\" w:uiPriority=\"35\" w:unhideWhenUsed=\"1\" w:qFormat=\"1\" />\n    </w:latentStyles>\n    <w:style w:type=\"paragraph\" w:default=\"1\" w:styleId=\"Normal\">\n        <w:name w:val=\"Normal\" />\n        <w:qFormat />\n        <w:rsid w:val=\"005B06B8\" />\n        <w:pPr>\n            <w:adjustRightInd w:val=\"0\" />\n            <w:spacing w:before=\"45\" w:after=\"45\" w:line=\"360\" w:lineRule=\"auto\" />\n        </w:pPr>\n        <w:rPr>\n            <w:rFonts w:ascii=\"Inter\" w:hAnsi=\"Inter\" w:cs=\"Times New Roman (Body CS)\" />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"paragraph\" w:styleId=\"Heading1\">\n        <w:name w:val=\"heading 1\" />\n        <w:basedOn w:val=\"Normal\" />\n        <w:next w:val=\"Normal\" />\n        <w:link w:val=\"Heading1Char\" />\n        <w:uiPriority w:val=\"9\" />\n        <w:rsid w:val=\"00D078F7\" />\n        <w:pPr>\n            <w:outlineLvl w:val=\"0\" />\n        </w:pPr>\n        <w:rPr>\n            <w:b />\n            <w:sz w:val=\"48\" />\n            <w:szCs w:val=\"48\" />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"paragraph\" w:styleId=\"Heading2\">\n        <w:name w:val=\"heading 2\" />\n        <w:basedOn w:val=\"Normal\" />\n        <w:next w:val=\"Normal\" />\n        <w:link w:val=\"Heading2Char\" />\n        <w:uiPriority w:val=\"9\" />\n        <w:semiHidden />\n        <w:unhideWhenUsed />\n        <w:rsid w:val=\"005B06B8\" />\n        <w:pPr>\n            <w:outlineLvl w:val=\"1\" />\n        </w:pPr>\n        <w:rPr>\n            <w:b />\n            <w:sz w:val=\"36\" />\n            <w:szCs w:val=\"36\" />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"paragraph\" w:styleId=\"Heading3\">\n        <w:name w:val=\"heading 3\" />\n        <w:basedOn w:val=\"Normal\" />\n        <w:next w:val=\"Normal\" />\n        <w:link w:val=\"Heading3Char\" />\n        <w:uiPriority w:val=\"9\" />\n        <w:semiHidden />\n        <w:unhideWhenUsed />\n        <w:qFormat />\n        <w:rsid w:val=\"005B06B8\" />\n        <w:pPr>\n            <w:outlineLvl w:val=\"2\" />\n        </w:pPr>\n        <w:rPr>\n            <w:b />\n            <w:sz w:val=\"28\" />\n            <w:szCs w:val=\"28\" />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"paragraph\" w:styleId=\"Heading4\">\n        <w:name w:val=\"heading 4\" />\n        <w:basedOn w:val=\"Normal\" />\n        <w:next w:val=\"Normal\" />\n        <w:link w:val=\"Heading4Char\" />\n        <w:uiPriority w:val=\"9\" />\n        <w:semiHidden />\n        <w:unhideWhenUsed />\n        <w:qFormat />\n        <w:rsid w:val=\"005B06B8\" />\n        <w:pPr>\n            <w:keepNext />\n            <w:keepLines />\n            <w:spacing w:before=\"80\" w:after=\"40\" />\n            <w:outlineLvl w:val=\"3\" />\n        </w:pPr>\n        <w:rPr>\n            <w:rFonts w:eastAsiaTheme=\"majorEastAsia\" w:cstheme=\"majorBidi\" />\n            <w:b />\n            <w:sz w:val=\"24\" />\n            <w:szCs w:val=\"24\" />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"paragraph\" w:styleId=\"Heading5\">\n        <w:name w:val=\"heading 5\" />\n        <w:basedOn w:val=\"Normal\" />\n        <w:next w:val=\"Normal\" />\n        <w:link w:val=\"Heading5Char\" />\n        <w:uiPriority w:val=\"9\" />\n        <w:semiHidden />\n        <w:unhideWhenUsed />\n        <w:qFormat />\n        <w:rsid w:val=\"005B06B8\" />\n        <w:pPr>\n            <w:keepNext />\n            <w:keepLines />\n            <w:spacing w:before=\"80\" w:after=\"40\" />\n            <w:outlineLvl w:val=\"4\" />\n        </w:pPr>\n        <w:rPr>\n            <w:rFonts w:eastAsiaTheme=\"majorEastAsia\" w:cstheme=\"majorBidi\" />\n            <w:b />\n            <w:sz w:val=\"22\" />\n            <w:szCs w:val=\"22\" />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"paragraph\" w:styleId=\"Heading6\">\n        <w:name w:val=\"heading 6\" />\n        <w:basedOn w:val=\"Normal\" />\n        <w:next w:val=\"Normal\" />\n        <w:link w:val=\"Heading6Char\" />\n        <w:uiPriority w:val=\"9\" />\n        <w:semiHidden />\n        <w:unhideWhenUsed />\n        <w:qFormat />\n        <w:rsid w:val=\"005B06B8\" />\n        <w:pPr>\n            <w:keepNext />\n            <w:keepLines />\n            <w:spacing w:before=\"40\" w:after=\"0\" />\n            <w:outlineLvl w:val=\"5\" />\n        </w:pPr>\n        <w:rPr>\n            <w:rFonts w:eastAsiaTheme=\"majorEastAsia\" w:cstheme=\"majorBidi\" />\n            <w:b />\n            <w:sz w:val=\"20\" />\n            <w:szCs w:val=\"20\" />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"character\" w:default=\"1\" w:styleId=\"DefaultParagraphFont\">\n        <w:name w:val=\"Default Paragraph Font\" />\n        <w:uiPriority w:val=\"1\" />\n        <w:unhideWhenUsed />\n    </w:style>\n    <w:style w:type=\"table\" w:default=\"1\" w:styleId=\"TableNormal\">\n        <w:name w:val=\"Normal Table\" />\n        <w:uiPriority w:val=\"99\" />\n        <w:semiHidden />\n        <w:unhideWhenUsed />\n        <w:tblPr>\n            <w:tblInd w:w=\"0\" w:type=\"dxa\" />\n            <w:tblCellMar>\n                <w:top w:w=\"0\" w:type=\"dxa\" />\n                <w:left w:w=\"108\" w:type=\"dxa\" />\n                <w:bottom w:w=\"0\" w:type=\"dxa\" />\n                <w:right w:w=\"108\" w:type=\"dxa\" />\n            </w:tblCellMar>\n        </w:tblPr>\n    </w:style>\n    <w:style w:type=\"numbering\" w:default=\"1\" w:styleId=\"NoList\">\n        <w:name w:val=\"No List\" />\n        <w:uiPriority w:val=\"99\" />\n        <w:semiHidden />\n        <w:unhideWhenUsed />\n    </w:style>\n    <w:style w:type=\"character\" w:customStyle=\"1\" w:styleId=\"Heading1Char\">\n        <w:name w:val=\"Heading 1 Char\" />\n        <w:basedOn w:val=\"DefaultParagraphFont\" />\n        <w:link w:val=\"Heading1\" />\n        <w:uiPriority w:val=\"9\" />\n        <w:rsid w:val=\"00D078F7\" />\n        <w:rPr>\n            <w:rFonts w:ascii=\"Inter\" w:hAnsi=\"Inter\" />\n            <w:b />\n            <w:sz w:val=\"48\" />\n            <w:szCs w:val=\"48\" />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"character\" w:customStyle=\"1\" w:styleId=\"Heading2Char\">\n        <w:name w:val=\"Heading 2 Char\" />\n        <w:basedOn w:val=\"DefaultParagraphFont\" />\n        <w:link w:val=\"Heading2\" />\n        <w:uiPriority w:val=\"9\" />\n        <w:semiHidden />\n        <w:rsid w:val=\"005B06B8\" />\n        <w:rPr>\n            <w:rFonts w:ascii=\"Inter\" w:hAnsi=\"Inter\" />\n            <w:b />\n            <w:sz w:val=\"36\" />\n            <w:szCs w:val=\"36\" />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"character\" w:customStyle=\"1\" w:styleId=\"Heading3Char\">\n        <w:name w:val=\"Heading 3 Char\" />\n        <w:basedOn w:val=\"DefaultParagraphFont\" />\n        <w:link w:val=\"Heading3\" />\n        <w:uiPriority w:val=\"9\" />\n        <w:semiHidden />\n        <w:rsid w:val=\"005B06B8\" />\n        <w:rPr>\n            <w:rFonts w:ascii=\"Inter\" w:hAnsi=\"Inter\" />\n            <w:b />\n            <w:sz w:val=\"28\" />\n            <w:szCs w:val=\"28\" />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"character\" w:customStyle=\"1\" w:styleId=\"Heading4Char\">\n        <w:name w:val=\"Heading 4 Char\" />\n        <w:basedOn w:val=\"DefaultParagraphFont\" />\n        <w:link w:val=\"Heading4\" />\n        <w:uiPriority w:val=\"9\" />\n        <w:semiHidden />\n        <w:rsid w:val=\"005B06B8\" />\n        <w:rPr>\n            <w:rFonts w:eastAsiaTheme=\"majorEastAsia\" w:cstheme=\"majorBidi\" />\n            <w:b />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"character\" w:customStyle=\"1\" w:styleId=\"Heading5Char\">\n        <w:name w:val=\"Heading 5 Char\" />\n        <w:basedOn w:val=\"DefaultParagraphFont\" />\n        <w:link w:val=\"Heading5\" />\n        <w:uiPriority w:val=\"9\" />\n        <w:semiHidden />\n        <w:rsid w:val=\"005B06B8\" />\n        <w:rPr>\n            <w:rFonts w:eastAsiaTheme=\"majorEastAsia\" w:cstheme=\"majorBidi\" />\n            <w:b />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"character\" w:customStyle=\"1\" w:styleId=\"Heading6Char\">\n        <w:name w:val=\"Heading 6 Char\" />\n        <w:basedOn w:val=\"DefaultParagraphFont\" />\n        <w:link w:val=\"Heading6\" />\n        <w:uiPriority w:val=\"9\" />\n        <w:semiHidden />\n        <w:rsid w:val=\"005B06B8\" />\n        <w:rPr>\n            <w:rFonts w:eastAsiaTheme=\"majorEastAsia\" w:cstheme=\"majorBidi\" />\n            <w:b />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"paragraph\" w:styleId=\"Title\">\n        <w:name w:val=\"Title\" />\n        <w:basedOn w:val=\"Normal\" />\n        <w:next w:val=\"Normal\" />\n        <w:link w:val=\"TitleChar\" />\n        <w:uiPriority w:val=\"10\" />\n        <w:rsid w:val=\"005B06B8\" />\n        <w:pPr>\n            <w:spacing w:after=\"80\" w:line=\"240\" w:lineRule=\"auto\" />\n            <w:contextualSpacing />\n        </w:pPr>\n        <w:rPr>\n            <w:rFonts w:ascii=\"Inter\" w:hAnsi=\"Inter\" />\n            <w:spacing w:val=\"-10\" />\n            <w:kern w:val=\"28\" />\n            <w:sz w:val=\"56\" />\n            <w:szCs w:val=\"56\" />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"character\" w:customStyle=\"1\" w:styleId=\"TitleChar\">\n        <w:name w:val=\"Title Char\" />\n        <w:basedOn w:val=\"DefaultParagraphFont\" />\n        <w:link w:val=\"Title\" />\n        <w:uiPriority w:val=\"10\" />\n        <w:rsid w:val=\"005B06B8\" />\n        <w:rPr>\n            <w:rFonts w:ascii=\"Inter\" w:hAnsi=\"Inter\" />\n            <w:spacing w:val=\"-10\" />\n            <w:kern w:val=\"28\" />\n            <w:sz w:val=\"56\" />\n            <w:szCs w:val=\"56\" />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"paragraph\" w:styleId=\"Quote\">\n        <w:name w:val=\"Quote\" />\n        <w:basedOn w:val=\"Normal\" />\n        <w:next w:val=\"Normal\" />\n        <w:link w:val=\"QuoteChar\" />\n        <w:uiPriority w:val=\"29\" />\n        <w:qFormat />\n        <w:rsid w:val=\"005B06B8\" />\n        <w:pPr>\n            <w:spacing w:before=\"160\" />\n            <w:ind w:left=\"720\" />\n        </w:pPr>\n        <w:rPr>\n            <w:i />\n            <w:iCs />\n            <w:color w:val=\"404040\" w:themeColor=\"text1\" w:themeTint=\"BF\" />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"character\" w:customStyle=\"1\" w:styleId=\"QuoteChar\">\n        <w:name w:val=\"Quote Char\" />\n        <w:basedOn w:val=\"DefaultParagraphFont\" />\n        <w:link w:val=\"Quote\" />\n        <w:uiPriority w:val=\"29\" />\n        <w:rsid w:val=\"005B06B8\" />\n        <w:rPr>\n            <w:i />\n            <w:iCs />\n            <w:color w:val=\"404040\" w:themeColor=\"text1\" w:themeTint=\"BF\" />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"paragraph\" w:styleId=\"ListParagraph\">\n        <w:name w:val=\"List Paragraph\" />\n        <w:basedOn w:val=\"Normal\" />\n        <w:uiPriority w:val=\"34\" />\n        <w:qFormat />\n        <w:rsid w:val=\"005B06B8\" />\n        <w:pPr>\n            <w:ind w:left=\"720\" />\n            <w:contextualSpacing />\n        </w:pPr>\n    </w:style>\n    <w:style w:type=\"character\" w:styleId=\"Hyperlink\">\n        <w:name w:val=\"Hyperlink\" />\n        <w:basedOn w:val=\"DefaultParagraphFont\" />\n        <w:uiPriority w:val=\"99\" />\n        <w:unhideWhenUsed />\n        <w:rsid w:val=\"00F64863\" />\n        <w:rPr>\n            <w:color w:val=\"0563C1\" />\n            <w:u w:val=\"single\" />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"paragraph\" w:styleId=\"Caption\">\n        <w:name w:val=\"caption\" />\n        <w:basedOn w:val=\"Normal\" />\n        <w:next w:val=\"Normal\" />\n        <w:uiPriority w:val=\"35\" />\n        <w:unhideWhenUsed />\n        <w:qFormat />\n        <w:rsid w:val=\"00F64863\" />\n        <w:pPr>\n            <w:spacing w:before=\"0\" w:after=\"200\" w:line=\"240\" w:lineRule=\"auto\" />\n        </w:pPr>\n        <w:rPr>\n            <w:i />\n            <w:iCs />\n            <w:color w:val=\"595959\" w:themeColor=\"text1\" w:themeTint=\"A6\" />\n            <w:sz w:val=\"18\" />\n            <w:szCs w:val=\"18\" />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"paragraph\" w:styleId=\"Codeblock\">\n        <w:name w:val=\"Codeblock\" />\n        <w:basedOn w:val=\"Normal\" />\n        <w:rPr>\n            <w:noProof />\n            <w:color w:val=\"ffffff\"/>\n            <w:rFonts w:ascii=\"JetBrains Mono\" w:cs=\"JetBrains Mono\" w:eastAsia=\"JetBrains Mono\" w:hAnsi=\"JetBrains Mono\"/>\n            <w:sz w:val=\"20\" />\n            <w:szCs w:val=\"20\" />\n        </w:rPr>\n    </w:style>\n    <w:style w:type=\"table\" w:styleId=\"TableGrid\">\n        <w:name w:val=\"Table Grid\" />\n        <w:basedOn w:val=\"TableNormal\" />\n        <w:uiPriority w:val=\"39\" />\n        <w:rsid w:val=\"005B06B8\" />\n        <w:pPr>\n            <w:spacing w:after=\"0\" w:line=\"240\" w:lineRule=\"auto\" />\n        </w:pPr>\n        <w:tblPr>\n            <w:tblBorders>\n                <w:top w:val=\"single\" w:sz=\"4\" w:space=\"0\" w:color=\"auto\" />\n                <w:left w:val=\"single\" w:sz=\"4\" w:space=\"0\" w:color=\"auto\" />\n                <w:bottom w:val=\"single\" w:sz=\"4\" w:space=\"0\" w:color=\"auto\" />\n                <w:right w:val=\"single\" w:sz=\"4\" w:space=\"0\" w:color=\"auto\" />\n                <w:insideH w:val=\"single\" w:sz=\"4\" w:space=\"0\" w:color=\"auto\" />\n                <w:insideV w:val=\"single\" w:sz=\"4\" w:space=\"0\" w:color=\"auto\" />\n            </w:tblBorders>\n        </w:tblPr>\n    </w:style>\n</w:styles>\n\n","import {\n  Document,\n  Packer,\n  Paragraph,\n  Table,\n  TextRun,\n  IRunPropertiesOptions,\n  AlignmentType,\n  LevelFormat,\n} from \"docx\";\nimport type {\n  DocNode,\n  Mark,\n  DOCXExporterInterface,\n  DOCXExporterOptions,\n  BlockMapping,\n  ParagraphChild,\n} from \"./types\";\nimport { defaultBlockMapping } from \"./mappings/block-mapping\";\nimport { processInlineContent } from \"./mappings/inline-mapping\";\nimport { mapMarksToStyles } from \"./mappings/style-mapping\";\n\n// Import styles template as raw string (esbuild loader: text)\n// @ts-ignore - esbuild text loader\nimport stylesXml from \"./template/styles.xml\";\n\n// Import fonts as data URLs (esbuild loader: dataurl)\n// @ts-ignore - esbuild dataurl loader\nimport interFontDataUrl from \"./fonts/Inter-Regular.ttf\";\n// @ts-ignore - esbuild dataurl loader\nimport monoFontDataUrl from \"./fonts/JetBrainsMono-Regular.ttf\";\n\nconst DEFAULT_TAB_STOP =\n  /* default font size */ 16 *\n  /* 1 pixel is 0.75 points */ 0.75 *\n  /* 1.5em */ 1.5 *\n  /* 1 point is 20 twips */ 20;\n\n/**\n * DOCX Exporter class with mapping-based architecture\n */\nexport class DOCXExporter implements DOCXExporterInterface {\n  private blockMapping: BlockMapping;\n  private _isRTL: boolean = false;\n  private options: DOCXExporterOptions;\n\n  constructor(options: DOCXExporterOptions = {}) {\n    this.blockMapping = { ...defaultBlockMapping };\n    this.options = {\n      embedFonts: true,\n      defaultFont: \"Inter\",\n      monospaceFont: \"JetBrains Mono\",\n      ...options,\n    };\n  }\n\n  get isRTL(): boolean {\n    return this._isRTL;\n  }\n\n  /**\n   * Transform styled text node into a TextRun\n   */\n  transformStyledText(node: DocNode, hyperlink: boolean = false): TextRun {\n    const styles = this.mapStyles(node.marks || []);\n\n    return new TextRun({\n      ...styles,\n      text: node.text || \"\",\n      style: hyperlink ? \"Hyperlink\" : undefined,\n      rightToLeft: this._isRTL,\n    });\n  }\n\n  /**\n   * Transform inline content array into paragraph children\n   */\n  transformInlineContent(content: DocNode[]): ParagraphChild[] {\n    return processInlineContent(content, this);\n  }\n\n  /**\n   * Map marks to docx run properties\n   */\n  mapStyles(marks: Mark[]): IRunPropertiesOptions {\n    return mapMarksToStyles(marks, this);\n  }\n\n  /**\n   * Transform a single block node\n   */\n  async transformBlock(\n    node: DocNode,\n    nestingLevel: number = 0\n  ): Promise<Paragraph | Table | (Paragraph | Table)[]> {\n    // Update RTL tracking\n    if (node.attrs?.dir) {\n      this._isRTL = node.attrs.dir === \"rtl\";\n    }\n\n    const mapping = this.blockMapping[node.type];\n    if (mapping) {\n      const result = mapping(node, this, nestingLevel);\n      if (result instanceof Promise) {\n        return await result;\n      }\n      return result;\n    }\n\n    // Default: process children if present\n    if (node.content) {\n      const children: (Paragraph | Table)[] = [];\n      for (const child of node.content) {\n        const result = await this.transformBlock(child, nestingLevel);\n        if (Array.isArray(result)) {\n          children.push(...result);\n        } else {\n          children.push(result);\n        }\n      }\n      return children.length > 0 ? children : [new Paragraph({ children: [] })];\n    }\n\n    return new Paragraph({ children: [] });\n  }\n\n  /**\n   * Transform all blocks in the document\n   */\n  async transformBlocks(nodes: DocNode[]): Promise<(Paragraph | Table)[]> {\n    const result: (Paragraph | Table)[] = [];\n\n    for (const node of nodes) {\n      const transformed = await this.transformBlock(node);\n      if (Array.isArray(transformed)) {\n        result.push(...transformed);\n      } else {\n        result.push(transformed);\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Get fonts for embedding\n   */\n  private async getFonts(): Promise<{ name: string; data: Buffer }[] | undefined> {\n    if (!this.options.embedFonts) {\n      return undefined;\n    }\n\n    try {\n      const fonts: { name: string; data: Buffer }[] = [];\n\n      // Load Inter font from data URL\n      if (interFontDataUrl) {\n        const interBuffer = await dataUrlToBuffer(interFontDataUrl);\n        if (interBuffer) {\n          fonts.push({ name: \"Inter\", data: interBuffer });\n        }\n      }\n\n      // Load monospace font from data URL\n      if (monoFontDataUrl) {\n        const monoBuffer = await dataUrlToBuffer(monoFontDataUrl);\n        if (monoBuffer) {\n          fonts.push({ name: \"JetBrains Mono\", data: monoBuffer });\n        }\n      }\n\n      return fonts.length > 0 ? fonts : undefined;\n    } catch (error) {\n      console.warn(\"Failed to load embedded fonts:\", error);\n      return undefined;\n    }\n  }\n\n  /**\n   * Create default document options with numbering and styles\n   */\n  private async createDocumentOptions() {\n    const bullets = [\"\"];\n\n    return {\n      numbering: {\n        config: [\n          {\n            reference: \"goateditor-numbered-list\",\n            levels: Array.from({ length: 9 }, (_, i) => ({\n              start: 1,\n              level: i,\n              format: LevelFormat.DECIMAL,\n              text: `%${i + 1}.`,\n              alignment: AlignmentType.LEFT,\n              style: {\n                paragraph: {\n                  indent: {\n                    left: DEFAULT_TAB_STOP * (i + 1),\n                    hanging: DEFAULT_TAB_STOP,\n                  },\n                },\n              },\n            })),\n          },\n          {\n            reference: \"goateditor-bullet-list\",\n            levels: Array.from({ length: 9 }, (_, i) => ({\n              start: 1,\n              level: i,\n              format: LevelFormat.BULLET,\n              text: bullets[i % bullets.length],\n              alignment: AlignmentType.LEFT,\n              style: {\n                paragraph: {\n                  indent: {\n                    left: DEFAULT_TAB_STOP * (i + 1),\n                    hanging: DEFAULT_TAB_STOP,\n                  },\n                },\n              },\n            })),\n          },\n        ],\n      },\n      fonts: await this.getFonts(),\n      defaultTabStop: 200,\n      externalStyles: stylesXml,\n    };\n  }\n\n  /**\n   * Convert document to a Blob\n   */\n  async toBlob(nodes: DocNode[]): Promise<Blob> {\n    const doc = await this.toDocument(nodes);\n\n    // Handle Buffer polyfill for browser environments\n    type GlobalThis = typeof globalThis & { Buffer?: unknown };\n    const prevBuffer = (globalThis as GlobalThis).Buffer;\n\n    try {\n      if (!(globalThis as GlobalThis).Buffer) {\n        const bufferModule = await import(\"buffer\");\n        (globalThis as GlobalThis).Buffer = bufferModule.Buffer;\n      }\n      return await Packer.toBlob(doc);\n    } finally {\n      (globalThis as GlobalThis).Buffer = prevBuffer;\n    }\n  }\n\n  /**\n   * Convert document to a docx Document object\n   */\n  async toDocument(nodes: DocNode[]): Promise<Document> {\n    const documentOptions = await this.createDocumentOptions();\n    const children = await this.transformBlocks(nodes);\n\n    const doc = new Document({\n      ...documentOptions,\n      creator: \"GoatEditor\",\n      title: \"Document\",\n      sections: [\n        {\n          children: children.length > 0 ? children : [new Paragraph({ children: [new TextRun(\"\")] })],\n        },\n      ],\n    });\n\n    // Fix fontTable relationship (docx library bug)\n    doc.Document.Relationships.createRelationship(\n      doc.Document.Relationships.RelationshipCount + 1,\n      \"http://schemas.openxmlformats.org/officeDocument/2006/relationships/fontTable\",\n      \"fontTable.xml\"\n    );\n\n    return doc;\n  }\n\n  /**\n   * Register a custom block mapping\n   */\n  registerBlockMapping(type: string, mapping: BlockMapping[string]): void {\n    this.blockMapping[type] = mapping;\n  }\n}\n\n/**\n * Convert data URL to Buffer\n */\nasync function dataUrlToBuffer(dataUrl: string): Promise<Buffer | null> {\n  try {\n    // Extract base64 data from data URL\n    const matches = dataUrl.match(/^data:[^;]+;base64,(.+)$/);\n    if (!matches) {\n      return null;\n    }\n\n    const base64Data = matches[1];\n\n    // In browser environments, use atob\n    if (typeof atob !== \"undefined\") {\n      const binaryString = atob(base64Data);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n\n      // Check if Buffer is available (polyfilled)\n      if (typeof Buffer !== \"undefined\") {\n        return Buffer.from(bytes.buffer);\n      }\n\n      return bytes.buffer as unknown as Buffer;\n    }\n\n    // In Node.js environments\n    if (typeof Buffer !== \"undefined\") {\n      return Buffer.from(base64Data, \"base64\");\n    }\n\n    return null;\n  } catch {\n    return null;\n  }\n}\n\n","import { Editor } from \"@tiptap/react\";\nimport { saveAs } from \"file-saver\";\nimport type { DocNode } from \"./types\";\nimport { DOCXExporter } from \"./exporter\";\n\n// Re-export exporter and types for external use\nexport { DOCXExporter } from \"./exporter\";\nexport type {\n  DocNode,\n  Mark,\n  ParagraphChild,\n  BlockMapping,\n  InlineContentMapping,\n  StyleMapping,\n  DOCXExporterInterface,\n  DOCXExporterOptions,\n  ProcessingContext,\n} from \"./types\";\n\n// Re-export mappings for extensibility\nexport {\n  defaultBlockMapping,\n  defaultInlineContentMapping,\n  defaultStyleMapping,\n} from \"./mappings\";\n\n/**\n * Generate a DOCX blob from TipTap editor content\n * This is the core function that creates the DOCX without downloading\n */\nexport const generateDocxBlob = async (\n  editor: Editor | null\n): Promise<Blob | null> => {\n  if (!editor) return null;\n\n  const json = editor.getJSON();\n  const exporter = new DOCXExporter();\n\n  // Process all nodes using the new exporter\n  const blob = await exporter.toBlob((json.content || []) as DocNode[]);\n  return blob;\n};\n\n/**\n * Export TipTap editor content to a DOCX file (downloads the file)\n */\nexport const exportToDocx = async (\n  editor: Editor | null,\n  filename: string = \"document.docx\"\n) => {\n  const blob = await generateDocxBlob(editor);\n  if (blob) {\n    saveAs(blob, filename);\n  }\n};\n","import { useState } from \"react\";\nimport { ColorResult, SketchPicker } from \"react-color\";\nimport { Level } from \"@tiptap/extension-heading\";\nimport {\n  AlignCenterIcon,\n  AlignJustifyIcon,\n  AlignLeftIcon,\n  AlignRightIcon,\n  BoldIcon,\n  ChevronDownIcon,\n  HighlighterIcon,\n  ImageIcon,\n  ItalicIcon,\n  Link2Icon,\n  ListCollapseIcon,\n  ListIcon,\n  ListOrderedIcon,\n  LucideIcon,\n  MinusIcon,\n  PlusIcon,\n  PrinterIcon,\n  Redo2Icon,\n  SearchIcon,\n  UnderlineIcon,\n  Undo2Icon,\n  UploadIcon,\n} from \"lucide-react\";\nimport { BsFileWord, BsFilePdf } from \"react-icons/bs\";\nimport { TextDirectionLtrIcon, TextDirectionRtlIcon } from \"./components/icons\";\nimport { cn } from \"./lib/utils\";\nimport { Separator } from \"./components/ui/separator\";\nimport { useEditorStore } from \"./store/use-editor-store\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"./components/ui/dropdown-menu\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"./components/ui/dialog\";\nimport { Input } from \"./components/ui/input\";\nimport { Button } from \"./components/ui/button\";\nimport { exportToDocx } from \"./utils/export-docx\";\n\nconst LineHeightButton = () => {\n  const { editor } = useEditorStore();\n  const [isOpen, setIsOpen] = useState(false);\n\n  const lineHeights = [\n    { label: \"Default\", value: \"normal\" },\n    { label: \"Single\", value: \"1\" },\n    { label: \"1.15\", value: \"1.15\" },\n    { label: \"1.5\", value: \"1.5\" },\n    { label: \"Double\", value: \"2\" },\n  ];\n\n  return (\n    <DropdownMenu open={isOpen} onOpenChange={setIsOpen}>\n      <DropdownMenuTrigger asChild>\n        <button\n          data-testid=\"toolbar-line-height\"\n          className=\"h-7 min-w-7 shrink-0 flex flex-col items-center justify-center rounded-sm hover:bg-neutral-200/80 px-1.5 overflow-hidden text-sm\"\n        >\n          <ListCollapseIcon className=\"size-4\" />\n        </button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent className=\"p-1 flex flex-col gap-y-1\">\n        {lineHeights.map(({ label, value }) => (\n          <button\n            key={value}\n            onClick={() => {\n              editor?.chain().focus().setLineHeight(value).run();\n              setIsOpen(false);\n            }}\n            className={cn(\n              \"flex items-center gap-x-2 px-2 py-1 rounded-sm hover:bg-neutral-200/80\",\n              editor?.getAttributes(\"paragraph\").lineHeight === value &&\n                \"bg-neutral-200/80\"\n            )}\n          >\n            <span className=\"text-sm\">{label}</span>\n          </button>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n\nconst FontSizeButton = () => {\n  const { editor } = useEditorStore();\n\n  const currentFontSize = editor?.getAttributes(\"textStyle\").fontSize\n    ? editor?.getAttributes(\"textStyle\").fontSize.replace(\"px\", \"\")\n    : \"16\";\n\n  const [fontSize, setFontSize] = useState(currentFontSize);\n  const [inputValue, setInputvalue] = useState(fontSize);\n  const [isEditing, setIsEditing] = useState(false);\n\n  const updateFontSize = (newSize: string) => {\n    const size = parseInt(newSize);\n    if (!isNaN(size) && size > 0) {\n      editor?.chain().focus().setFontSize(`${size}px`).run();\n      setFontSize(newSize);\n      setInputvalue(newSize);\n      setIsEditing(false);\n    }\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setInputvalue(e.target.value);\n  };\n\n  const handleInputBlur = () => {\n    updateFontSize(inputValue);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      updateFontSize(inputValue);\n      editor?.commands.focus();\n    }\n  };\n\n  const increment = () => {\n    const newSize = parseInt(fontSize) + 1;\n    updateFontSize(newSize.toString());\n  };\n\n  const decrement = () => {\n    const newSize = parseInt(fontSize) - 1;\n    if (newSize > 0) {\n      updateFontSize(newSize.toString());\n    }\n  };\n\n  return (\n    <div\n      data-testid=\"toolbar-font-size\"\n      className=\"flex items-center gap-x-0.5\"\n    >\n      <button\n        data-testid=\"toolbar-font-size-decrease\"\n        onClick={decrement}\n        className=\"h-7 w-7 shrink-0 flex items-center justify-center rounded-sm hover:bg-neutral-200/80\"\n      >\n        <MinusIcon className=\"size-4\" />\n      </button>\n      {isEditing ? (\n        <Input\n          data-testid=\"toolbar-font-size-input\"\n          type=\"text\"\n          value={inputValue}\n          onChange={handleInputChange}\n          onBlur={handleInputBlur}\n          onKeyDown={handleKeyDown}\n          className=\"h-7 w-10 text-sm text-center border border-neutral-400 rounded-sm bg-transparent focus:outline-none focus:ring-0\"\n        />\n      ) : (\n        <button\n          data-testid=\"toolbar-font-size-value\"\n          onClick={() => {\n            setIsEditing(true);\n            setFontSize(currentFontSize);\n          }}\n          className=\"h-7 w-10 text-sm text-center border border-neutral-400 rounded-sm hover:bg-neutral-200/80\"\n        >\n          {currentFontSize}\n        </button>\n      )}\n      <button\n        data-testid=\"toolbar-font-size-increase\"\n        onClick={increment}\n        className=\"h-7 w-7 shrink-0 flex items-center justify-center rounded-sm hover:bg-neutral-200/80\"\n      >\n        <PlusIcon className=\"size-4\" />\n      </button>\n    </div>\n  );\n};\n\nconst ListButton = () => {\n  const { editor } = useEditorStore();\n\n  const lists = [\n    {\n      label: \"Bullet List\",\n      icon: ListIcon,\n      isActive: editor?.isActive(\"bulletList\"),\n      onClick: () => editor?.chain().focus().toggleBulletList().run(),\n      testId: \"toolbar-list-bullet\",\n    },\n    {\n      label: \"Ordered List\",\n      icon: ListOrderedIcon,\n      isActive: editor?.isActive(\"orderedList\"),\n      onClick: () => editor?.chain().focus().toggleOrderedList().run(),\n      testId: \"toolbar-list-ordered\",\n    },\n  ];\n\n  return (\n    <div className=\"flex items-center gap-x-0.5\">\n      {lists.map(({ label, icon, onClick, isActive, testId }) => (\n        <ToolbarButton\n          key={label}\n          icon={icon}\n          onClick={onClick}\n          isActive={isActive}\n          testId={testId}\n        />\n      ))}\n    </div>\n  );\n};\n\nconst AlignButton = () => {\n  const { editor } = useEditorStore();\n  const [isOpen, setIsOpen] = useState(false);\n\n  const alignments = [\n    {\n      label: \"Align left\",\n      value: \"left\",\n      icon: AlignLeftIcon,\n      testId: \"toolbar-align-left\",\n    },\n    {\n      label: \"Align Center\",\n      value: \"center\",\n      icon: AlignCenterIcon,\n      testId: \"toolbar-align-center\",\n    },\n    {\n      label: \"Align Right\",\n      value: \"right\",\n      icon: AlignRightIcon,\n      testId: \"toolbar-align-right\",\n    },\n    {\n      label: \"Align Justified\",\n      value: \"justify\",\n      icon: AlignJustifyIcon,\n      testId: \"toolbar-align-justify\",\n    },\n  ];\n\n  const getCurrentAlignment = () => {\n    if (!editor) return null;\n    const paraAttrs = editor.getAttributes(\"paragraph\");\n    if (paraAttrs.textAlign) return paraAttrs.textAlign;\n    const headingAttrs = editor.getAttributes(\"heading\");\n    if (headingAttrs.textAlign) return headingAttrs.textAlign;\n    return null;\n  };\n\n  const currentAlignment = getCurrentAlignment();\n  const CurrentAlignIcon =\n    alignments.find((a) => a.value === currentAlignment)?.icon || AlignLeftIcon;\n\n  return (\n    <DropdownMenu open={isOpen} onOpenChange={setIsOpen}>\n      <DropdownMenuTrigger asChild>\n        <button\n          data-testid=\"toolbar-align\"\n          className=\"h-7 min-w-7 shrink-0 flex items-center justify-center rounded-sm hover:bg-neutral-200/80 px-1.5 overflow-hidden text-sm\"\n        >\n          <CurrentAlignIcon className=\"size-4\" />\n        </button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent className=\"p-1 flex flex-row gap-x-1\">\n        {alignments.map(({ label, value, icon: Icon, testId }) => (\n          <button\n            key={value}\n            data-testid={testId}\n            onClick={() => {\n              editor?.chain().focus().setTextAlign(value).run();\n              setIsOpen(false);\n            }}\n            className={cn(\n              \"flex items-center justify-center p-2 rounded-sm hover:bg-neutral-200/80\",\n              currentAlignment === value && \"bg-blue-100 text-blue-700\"\n            )}\n            title={label}\n          >\n            <Icon className=\"size-4\" />\n          </button>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n\nconst TextDirectionButton = () => {\n  const { editor } = useEditorStore();\n\n  const getCurrentDirection = () => {\n    if (!editor) return null;\n    const attrs = editor.getAttributes(\"paragraph\");\n    return attrs.dir || null;\n  };\n\n  return (\n    <div className=\"flex items-center gap-x-0.5\">\n      <button\n        data-testid=\"toolbar-ltr\"\n        onClick={() => editor?.chain().focus().setTextDirection(\"ltr\").run()}\n        className={cn(\n          \"h-7 min-w-7 shrink-0 flex items-center justify-center rounded-sm hover:bg-neutral-200/80 px-1.5\",\n          getCurrentDirection() === \"ltr\" && \"bg-neutral-200/80\"\n        )}\n        title=\"Left to Right\"\n      >\n        <TextDirectionLtrIcon className=\"size-4\" />\n      </button>\n      <button\n        data-testid=\"toolbar-rtl\"\n        onClick={() => editor?.chain().focus().setTextDirection(\"rtl\").run()}\n        className={cn(\n          \"h-7 min-w-7 shrink-0 flex items-center justify-center rounded-sm hover:bg-neutral-200/80 px-1.5\",\n          getCurrentDirection() === \"rtl\" && \"bg-neutral-200/80\"\n        )}\n        title=\"Right to Left\"\n      >\n        <TextDirectionRtlIcon className=\"size-4\" />\n      </button>\n    </div>\n  );\n};\n\nconst ImageButton = () => {\n  const { editor } = useEditorStore();\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [imageUrl, setImageUrl] = useState(\"\");\n\n  const onChange = (src: string) => {\n    editor?.chain().focus().setImage({ src }).run();\n  };\n\n  const onUpload = () => {\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = \"image/*\";\n\n    input.onchange = (e) => {\n      const file = (e.target as HTMLInputElement).files?.[0];\n      if (file) {\n        const imageUrl = URL.createObjectURL(file);\n        onChange(imageUrl);\n      }\n    };\n\n    input.click();\n  };\n\n  const handleImageUrlSubmit = () => {\n    if (imageUrl) {\n      onChange(imageUrl);\n      setImageUrl(\"\");\n      setIsDialogOpen(false);\n    }\n  };\n\n  return (\n    <>\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <button\n            data-testid=\"toolbar-image-button\"\n            className=\"h-7 min-w-7 shrink-0 flex flex-col items-center justify-center rounded-sm hover:bg-neutral-200/80 px-1.5 overflow-hidden text-sm\"\n          >\n            <ImageIcon className=\"size-4\" />\n          </button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent>\n          <DropdownMenuItem data-testid=\"toolbar-image-upload\" onClick={onUpload}>\n            <UploadIcon className=\"size-2 mr-2\" />\n            Upload\n          </DropdownMenuItem>\n          <DropdownMenuItem\n            data-testid=\"toolbar-image-url\"\n            onClick={() => setIsDialogOpen(true)}\n          >\n            <SearchIcon className=\"size-2 mr-2\" />\n            Paste image URL\n          </DropdownMenuItem>\n        </DropdownMenuContent>\n      </DropdownMenu>\n\n      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n        <DialogContent data-testid=\"image-url-dialog\">\n          <DialogHeader>\n            <DialogTitle>Insert image URL</DialogTitle>\n          </DialogHeader>\n          <input\n            data-testid=\"image-url-input\"\n            placeholder=\"Insert image URL\"\n            value={imageUrl}\n            onChange={(e) => setImageUrl(e.target.value)}\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\") {\n                handleImageUrlSubmit();\n              }\n            }}\n            className=\"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm\"\n          />\n          <DialogFooter>\n            <Button data-testid=\"image-url-submit\" onClick={handleImageUrlSubmit}>\n              Submit\n            </Button>\n            <Button\n              data-testid=\"image-url-cancel\"\n              onClick={() => setIsDialogOpen(false)}\n            >\n              Cancel\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n};\n\nconst LinkButton = () => {\n  const { editor } = useEditorStore();\n  const [value, setValue] = useState(\"\");\n\n  const onChange = (href: string) => {\n    editor?.chain().focus().extendMarkRange(\"link\").setLink({ href }).run();\n    setValue(\"\");\n  };\n\n  return (\n    <DropdownMenu\n      onOpenChange={(open) => {\n        if (open) {\n          setValue(editor?.getAttributes(\"link\").href || \"\");\n        }\n      }}\n    >\n      <DropdownMenuTrigger asChild>\n        <button\n          data-testid=\"toolbar-link\"\n          className=\"h-7 min-w-7 shrink-0 flex flex-col items-center justify-center rounded-sm hover:bg-neutral-200/80 px-1.5 overflow-hidden text-sm\"\n        >\n          <Link2Icon className=\"size-4\" />\n        </button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent className=\"p-2.5 flex items-center gap-x-2\">\n        <Input\n          data-testid=\"toolbar-link-input\"\n          placeholder=\"https://example.com\"\n          value={value}\n          onChange={(e) => setValue(e.target.value)}\n        />\n        <Button data-testid=\"toolbar-link-apply\" onClick={() => onChange(value)}>\n          Apply\n        </Button>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n\nconst HighlightColorButton = () => {\n  const { editor } = useEditorStore();\n\n  const value = editor?.getAttributes(\"highlight\").color || \"#ffffff\";\n\n  const onChange = (color: ColorResult) => {\n    editor?.chain().focus().setHighlight({ color: color.hex }).run();\n  };\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <button\n          data-testid=\"toolbar-highlight-color\"\n          className=\"h-7 min-w-7 shrink-0 flex flex-col items-center justify-center rounded-sm hover:bg-neutral-200/80 px-1.5 overflow-hidden text-sm\"\n        >\n          <HighlighterIcon className=\"size-4\" />\n        </button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent\n        data-testid=\"toolbar-highlight-color-picker\"\n        className=\"p-0\"\n      >\n        <SketchPicker color={value} onChange={onChange} />\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n\nconst TextColorButton = () => {\n  const { editor } = useEditorStore();\n\n  const value = editor?.getAttributes(\"textStyle\").color || \"#000000\";\n\n  const onChange = (color: ColorResult) => {\n    editor?.chain().focus().setColor(color.hex).run();\n  };\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <button\n          data-testid=\"toolbar-text-color\"\n          className=\"h-7 min-w-7 shrink-0 flex flex-col items-center justify-center rounded-sm hover:bg-neutral-200/80 px-1.5 overflow-hidden text-sm\"\n        >\n          <span className=\"text-xs\">A</span>\n          <div className=\"h-0.5 w-full\" style={{ backgroundColor: value }} />\n        </button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent\n        data-testid=\"toolbar-text-color-picker\"\n        className=\"p-0\"\n      >\n        <SketchPicker color={value} onChange={onChange} />\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n\nconst HeadingLevelButton = () => {\n  const { editor } = useEditorStore();\n  const [isOpen, setIsOpen] = useState(false);\n\n  const headings = [\n    { label: \"Normal text\", value: 0, fontSize: \"16px\" },\n    { label: \"Heading 1\", value: 1, fontSize: \"32px\" },\n    { label: \"Heading 2\", value: 2, fontSize: \"28px\" },\n    { label: \"Heading 3\", value: 3, fontSize: \"24px\" },\n    { label: \"Heading 4\", value: 4, fontSize: \"20px\" },\n    { label: \"Heading 5\", value: 5, fontSize: \"18px\" },\n    { label: \"Heading 6\", value: 6, fontSize: \"16px\" },\n  ];\n\n  const getCurrentHeading = () => {\n    for (let level = 1; level <= 5; level++) {\n      if (editor?.isActive(\"heading\", { level })) {\n        return `heading ${level}`;\n      }\n    }\n    return \"Normal text\";\n  };\n\n  return (\n    <DropdownMenu open={isOpen} onOpenChange={setIsOpen}>\n      <DropdownMenuTrigger asChild>\n        <button\n          data-testid=\"toolbar-heading\"\n          className=\"h-7 min-w-7 shrink-0 flex items-center justify-center rounded-sm hover:bg-neutral-200/80 px-1.5 overflow-hidden text-sm\"\n        >\n          <span className=\"truncate\">{getCurrentHeading()}</span>\n          <ChevronDownIcon className=\"ml-2 size-4 shrink-0\" />\n        </button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent className=\"p-1 flex flex-col gap-y-1\">\n        {headings.map(({ label, value, fontSize }) => (\n          <button\n            key={value}\n            data-testid={`toolbar-heading-${value}`}\n            style={{ fontSize }}\n            onClick={() => {\n              if (value === 0) {\n                editor?.chain().focus().setParagraph().run();\n              } else {\n                editor\n                  ?.chain()\n                  .focus()\n                  .toggleHeading({ level: value as Level })\n                  .run();\n              }\n              setIsOpen(false);\n            }}\n            className={cn(\n              \"flex items-center gap-x-2 px-2 py-1 rounded-sm hover:bg-neutral-200/80\",\n              (value === 0 && !editor?.isActive(\"heading\")) ||\n                (editor?.isActive(\"heading\", { level: value }) &&\n                  \"bg-neutral-200/80\")\n            )}\n          >\n            {label}\n          </button>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n\nconst FontFamilyButton = () => {\n  const { editor } = useEditorStore();\n  const [isOpen, setIsOpen] = useState(false);\n\n  const fonts = [\n    { label: \"Arial\", value: \"Arial\" },\n    { label: \"Times New Roman\", value: \"Times New Roman\" },\n    { label: \"Courier New\", value: \"Courier New\" },\n    { label: \"Georgia\", value: \"Georgia\" },\n    { label: \"Verdana\", value: \"Verdana\" },\n    { label: \"Tahoma\", value: \"Tahoma\" },\n    { label: \"Trebuchet MS\", value: \"Trebuchet MS\" },\n    { label: \"Impact\", value: \"Impact\" },\n    { label: \"Comic Sans MS\", value: \"Comic Sans MS\" },\n    { label: \"Lucida Console\", value: \"Lucida Console\" },\n    { label: \"Lucida Sans Unicode\", value: \"Lucida Sans Unicode\" },\n    { label: \"Arial Black\", value: \"Arial Black\" },\n    { label: \"Helvetica\", value: \"Helvetica\" },\n    { label: \"Palatino Linotype\", value: \"Palatino Linotype\" },\n    { label: \"Book Antiqua\", value: \"Book Antiqua\" },\n    { label: \"Courier\", value: \"Courier\" },\n    { label: \"MS Sans Serif\", value: \"MS Sans Serif\" },\n    { label: \"MS Serif\", value: \"MS Serif\" },\n  ];\n\n  return (\n    <DropdownMenu open={isOpen} onOpenChange={setIsOpen}>\n      <DropdownMenuTrigger asChild>\n        <button\n          data-testid=\"toolbar-font-family\"\n          className=\"h-7 w-[120px] shrink-0 flex items-center justify-between rounded-sm hover:bg-neutral-200/80 px-1.5 overflow-hidden text-sm\"\n        >\n          <span className=\"truncate\">\n            {editor?.getAttributes(\"textStyle\").fontFamily || \"Arial\"}\n          </span>\n          <ChevronDownIcon className=\"ml-2 size-4 shrink-0\" />\n        </button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent\n        data-testid=\"toolbar-font-family-dropdown\"\n        className=\"p-1 flex flex-col gap-y-1\"\n      >\n        {fonts.map(({ label, value }) => (\n          <button\n            onClick={() => {\n              editor?.chain().focus().setFontFamily(value).run();\n              setIsOpen(false);\n            }}\n            key={value}\n            data-testid={`toolbar-font-${value.toLowerCase().replace(/\\s+/g, \"-\")}`}\n            className={cn(\n              \"flex items-center gap-x-2 px-2 py-1 rounded-sm hover:bg-neutral-200/80\",\n              editor?.getAttributes(\"textStyle\").fontfamily === value &&\n                \"bg-neutral-200/80\"\n            )}\n            style={{ fontFamily: value }}\n          >\n            <span className=\"text-sm\">{label}</span>\n          </button>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n\ninterface ToolbarButtonProps {\n  onClick?: () => void;\n  isActive?: boolean;\n  icon: LucideIcon;\n  testId?: string;\n}\n\nconst ToolbarButton = ({\n  onClick,\n  isActive,\n  icon: Icon,\n  testId,\n}: ToolbarButtonProps) => {\n  return (\n    <button\n      onClick={onClick}\n      data-testid={testId}\n      className={cn(\n        \"text-sm h-7 min-w-7 flex items-center justify-center rounded-sm hover:bg-neutral-200/80\",\n        isActive && \"bg-neutral-200/80\"\n      )}\n    >\n      <Icon className=\"size-4\" />\n    </button>\n  );\n};\n\nconst ExportDocxButton = () => {\n  const { editor } = useEditorStore();\n\n  const onSaveDocx = () => {\n    exportToDocx(editor);\n  };\n\n  return (\n    <button\n      data-testid=\"shortcut-export-docx\"\n      onClick={onSaveDocx}\n      className=\"text-sm h-7 min-w-7 flex items-center justify-center rounded-sm hover:bg-neutral-200/80\"\n      title=\"Export to Word (.docx)\"\n    >\n      <BsFileWord className=\"size-4\" />\n    </button>\n  );\n};\n\nconst ExportPdfButton = () => {\n  return (\n    <button\n      data-testid=\"shortcut-export-pdf\"\n      onClick={() => window.print()}\n      className=\"text-sm h-7 min-w-7 flex items-center justify-center rounded-sm hover:bg-neutral-200/80\"\n      title=\"Export to PDF\"\n    >\n      <BsFilePdf className=\"size-4\" />\n    </button>\n  );\n};\n\nexport interface ToolbarProps {\n  /** Text direction for the toolbar layout */\n  direction?: \"ltr\" | \"rtl\";\n  /** Custom class name */\n  className?: string;\n}\n\nexport const Toolbar = ({ direction = \"ltr\", className }: ToolbarProps) => {\n  const { editor } = useEditorStore();\n\n  const sections: {\n    label: string;\n    icon: LucideIcon;\n    onClick: () => void;\n    isActive?: boolean;\n    testId?: string;\n  }[][] = [\n    [\n      {\n        label: \"Undo\",\n        icon: Undo2Icon,\n        onClick: () => editor?.chain().focus().undo().run(),\n        testId: \"toolbar-undo\",\n      },\n      {\n        label: \"Redo\",\n        icon: Redo2Icon,\n        onClick: () => editor?.chain().focus().redo().run(),\n        testId: \"toolbar-redo\",\n      },\n      {\n        label: \"Print\",\n        icon: PrinterIcon,\n        onClick: () => window.print(),\n        testId: \"toolbar-print\",\n      },\n    ],\n    [\n      {\n        label: \"Bold\",\n        icon: BoldIcon,\n        isActive: editor?.isActive(\"bold\"),\n        onClick: () => editor?.chain().focus().toggleBold().run(),\n        testId: \"toolbar-bold\",\n      },\n      {\n        label: \"Italic\",\n        icon: ItalicIcon,\n        isActive: editor?.isActive(\"italic\"),\n        onClick: () => editor?.chain().focus().toggleItalic().run(),\n        testId: \"toolbar-italic\",\n      },\n      {\n        label: \"Underline\",\n        icon: UnderlineIcon,\n        isActive: editor?.isActive(\"underline\"),\n        onClick: () => editor?.chain().focus().toggleUnderline().run(),\n        testId: \"toolbar-underline\",\n      },\n    ],\n  ];\n\n  return (\n    <div\n      data-testid=\"toolbar\"\n      dir={direction}\n      className={cn(\n        \"goat-editor-toolbar bg-[#F1F4F9] px-2.5 py-0.5 rounded-[24px] min-h-[40px] flex items-center gap-x-0.5 overflow-x-auto\",\n        className\n      )}\n    >\n      {sections[0].map((item) => (\n        <ToolbarButton key={item.label} {...item} />\n      ))}\n      <Separator orientation=\"vertical\" className=\"h-6 bg-neutral-300\" />\n      <FontFamilyButton />\n      <Separator orientation=\"vertical\" className=\"h-6 bg-neutral-300\" />\n      <HeadingLevelButton />\n      <Separator orientation=\"vertical\" className=\"h-6 bg-neutral-300\" />\n      <FontSizeButton />\n      <Separator orientation=\"vertical\" className=\"h-6 bg-neutral-300\" />\n      {sections[1].map((item) => (\n        <ToolbarButton key={item.label} {...item} />\n      ))}\n      <TextColorButton />\n      <HighlightColorButton />\n      <Separator orientation=\"vertical\" className=\"h-6 bg-neutral-300\" />\n      <LinkButton />\n      <ImageButton />\n      <AlignButton />\n      <TextDirectionButton />\n      <LineHeightButton />\n      <ListButton />\n      <Separator orientation=\"vertical\" className=\"h-6 bg-neutral-300\" />\n      <ExportDocxButton />\n      <ExportPdfButton />\n    </div>\n  );\n};\n\n","import { useRef, useState } from \"react\";\nimport { FaCaretDown } from \"react-icons/fa\";\n\nconst markers = Array.from({ length: 83 }, (_, i) => i);\n\ninterface RulerProps {\n  /** Width of the document in pixels */\n  width?: number;\n}\n\nexport const Ruler = ({ width = 816 }: RulerProps) => {\n  const [leftMargin, setLeftMargin] = useState(56);\n  const [rightMargin, setRightMargin] = useState(56);\n\n  const [isDraggingLeft, setIsDraggingLeft] = useState(false);\n  const [isDraggingRight, setIsDraggingRight] = useState(false);\n  const rulerRef = useRef<HTMLDivElement>(null);\n\n  const handleLeftMouseDown = () => {\n    setIsDraggingLeft(true);\n  };\n\n  const handleRightMouseDown = () => {\n    setIsDraggingRight(true);\n  };\n\n  const handleMouseMove = (e: React.MouseEvent) => {\n    const PAGE_WIDTH = width;\n    const MININUM_SPACE = 100;\n\n    if ((isDraggingLeft || isDraggingRight) && rulerRef.current) {\n      const container = rulerRef.current.querySelector(\"#ruler-container\");\n      if (container) {\n        const containerRect = container.getBoundingClientRect();\n        const relativeX = e.clientX - containerRect.left;\n        const rawPosition = Math.max(0, Math.min(PAGE_WIDTH, relativeX));\n\n        if (isDraggingLeft) {\n          const maxLeftPosition = PAGE_WIDTH - rightMargin - MININUM_SPACE;\n          const newLeftPosition = Math.min(rawPosition, maxLeftPosition);\n          setLeftMargin(newLeftPosition);\n        } else if (isDraggingRight) {\n          const maxRightPosition = PAGE_WIDTH - (leftMargin + MININUM_SPACE);\n          const newRightPosition = Math.max(PAGE_WIDTH - rawPosition, 0);\n          const constrainedRightPosition = Math.min(\n            newRightPosition,\n            maxRightPosition\n          );\n          setRightMargin(constrainedRightPosition);\n        }\n      }\n    }\n  };\n\n  const handleMouseUp = () => {\n    setIsDraggingLeft(false);\n    setIsDraggingRight(false);\n  };\n\n  const handleLeftDoubleClick = () => {\n    setLeftMargin(56);\n  };\n\n  const handleRightDoubleClick = () => {\n    setRightMargin(56);\n  };\n\n  return (\n    <div\n      ref={rulerRef}\n      onMouseMove={handleMouseMove}\n      onMouseUp={handleMouseUp}\n      onMouseLeave={handleMouseUp}\n      className=\"goat-editor-ruler mx-auto h-6 border-b border-gray-300 flex items-end relative select-none print:hidden\"\n      style={{ width: `${width}px` }}\n    >\n      <div id=\"ruler-container\" className=\"w-full h-full relative\">\n        <Marker\n          position={leftMargin}\n          isLeft={true}\n          isDragging={isDraggingLeft}\n          onMouseDown={handleLeftMouseDown}\n          onDoubleClick={handleLeftDoubleClick}\n        />\n        <Marker\n          position={rightMargin}\n          isLeft={false}\n          isDragging={isDraggingRight}\n          onMouseDown={handleRightMouseDown}\n          onDoubleClick={handleRightDoubleClick}\n        />\n        <div className=\"absolute inset-0 bottom-0 h-full\">\n          <div className=\"relative h-full\" style={{ width: `${width}px` }}>\n            {markers.map((marker) => {\n              const position = (marker * width) / 82;\n\n              return (\n                <div\n                  key={marker}\n                  className=\"absolute bottom-0\"\n                  style={{ left: `${position}px` }}\n                >\n                  {marker % 10 === 0 && (\n                    <>\n                      <div className=\"absolute bottom-0 w-[1px] h-2 bg-neutral-500\" />\n                      <span className=\"absolute bottom-2 text-[10px] text-neutral-500 transform -translate-x-1/2\">\n                        {marker / 10 + 1}\n                      </span>\n                    </>\n                  )}\n                  {marker % 5 === 0 && marker % 10 !== 0 && (\n                    <div className=\"absolute bottom-0 w-[1px] h-1.5 bg-neutral-500\" />\n                  )}\n                  {marker % 5 !== 0 && (\n                    <div className=\"absolute bottom-0 w-[1px] h-1 bg-neutral-500\" />\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\ninterface MarkerProps {\n  position: number;\n  isLeft: boolean;\n  isDragging: boolean;\n  onMouseDown: () => void;\n  onDoubleClick: () => void;\n}\n\nconst Marker = ({\n  position,\n  isLeft,\n  isDragging,\n  onMouseDown,\n  onDoubleClick,\n}: MarkerProps) => {\n  return (\n    <div\n      className=\"absolute top-0 w-4 h-full cursor-ew-resize z-[5] group -ml-2\"\n      style={{ [isLeft ? \"left\" : \"right\"]: `${position}px` }}\n      onMouseDown={onMouseDown}\n      onDoubleClick={onDoubleClick}\n    >\n      <FaCaretDown className=\"absolute left-1/2 top-0 h-full fill-blue-500 transform -translate-x-1/2\" />\n      <div\n        className=\"absolute left-1/2 top-4 transform -translate-x-1/2\"\n        style={{\n          height: \"100vh\",\n          width: \"1px\",\n          transform: \"scaleX(0.5)\",\n          backgroundColor: \"#3b72f6\",\n          display: isDragging ? \"block\" : \"none\",\n        }}\n      />\n    </div>\n  );\n};\n\n","import { useEffect, useState } from \"react\";\nimport { useEditor, EditorContent } from \"@tiptap/react\";\nimport StarterKit from \"@tiptap/starter-kit\";\nimport TaskItem from \"@tiptap/extension-task-item\";\nimport TaskList from \"@tiptap/extension-task-list\";\nimport Table from \"@tiptap/extension-table\";\nimport TableCell from \"@tiptap/extension-table-cell\";\nimport TableHeader from \"@tiptap/extension-table-header\";\nimport TableRow from \"@tiptap/extension-table-row\";\nimport Image from \"@tiptap/extension-image\";\nimport TextAlign from \"@tiptap/extension-text-align\";\nimport Link from \"@tiptap/extension-link\";\nimport { Color } from \"@tiptap/extension-color\";\nimport Highlight from \"@tiptap/extension-highlight\";\nimport FontFamily from \"@tiptap/extension-font-family\";\nimport TextStyle from \"@tiptap/extension-text-style\";\nimport Underline from \"@tiptap/extension-underline\";\nimport ImageResize from \"tiptap-extension-resize-image\";\n\nimport { useEditorStore } from \"./store/use-editor-store\";\nimport { FontSizeExtension } from \"./extensions/font-size\";\nimport { LineHeightExtension } from \"./extensions/line-height\";\nimport { TextDirectionExtension } from \"./extensions/text-direction\";\nimport { Toolbar } from \"./Toolbar\";\nimport { Ruler } from \"./Ruler\";\nimport { cn } from \"./lib/utils\";\nimport type { GoatEditorProps } from \"./types\";\n\n/**\n * GoatEditor - A rich-text editor built with TipTap\n *\n * @example\n * ```tsx\n * import GoatEditor from \"@goat/editor\";\n * import \"@goat/editor/styles.css\";\n *\n * function App() {\n *   return (\n *     <GoatEditor\n *       options={{\n *         initialContent: \"<p>Hello World</p>\",\n *         showToolbar: true,\n *         showRuler: true,\n *         onChange: (html, json) => console.log(html),\n *       }}\n *     />\n *   );\n * }\n * ```\n */\nexport const GoatEditor = ({ options = {} }: GoatEditorProps) => {\n  const {\n    initialContent = \"\",\n    showToolbar = true,\n    showRuler = true,\n    defaultDirection = \"ltr\",\n    className,\n    toolbarClassName,\n    onChange,\n    onReady,\n    onDestroy,\n    extensions: customExtensions = [],\n    editable = true,\n    autoFocus = false,\n    dimensions = { width: 816, height: 1054 },\n    toolbarDirection,\n  } = options;\n\n  const { setEditor } = useEditorStore();\n  const [content, setContent] = useState<string | null>(null);\n\n  // Load initial content\n  useEffect(() => {\n    if (initialContent) {\n      setContent(initialContent);\n    } else {\n      setContent(\"\");\n    }\n  }, [initialContent]);\n\n  // Configure text direction extension with the default direction\n  const textDirectionExtension = TextDirectionExtension.configure({\n    types: [\n      \"paragraph\",\n      \"heading\",\n      \"bulletList\",\n      \"orderedList\",\n      \"listItem\",\n      \"taskList\",\n      \"taskItem\",\n      \"codeBlock\",\n      \"blockquote\",\n    ],\n    defaultDirection,\n  });\n\n  const editor = useEditor({\n    immediatelyRender: false,\n    editable,\n    autofocus: autoFocus,\n    onCreate({ editor }) {\n      setEditor(editor);\n      onReady?.(editor);\n    },\n    onDestroy() {\n      setEditor(null);\n      onDestroy?.();\n    },\n    onUpdate({ editor }) {\n      setEditor(editor);\n      onChange?.(editor.getHTML(), editor.getJSON());\n    },\n    onSelectionUpdate({ editor }) {\n      setEditor(editor);\n    },\n    onTransaction({ editor }) {\n      setEditor(editor);\n    },\n    onFocus({ editor }) {\n      setEditor(editor);\n    },\n    onBlur({ editor }) {\n      setEditor(editor);\n    },\n    onContentError({ editor }) {\n      setEditor(editor);\n    },\n    editorProps: {\n      attributes: {\n        id: \"goat-editor-content\",\n        \"data-testid\": \"editor-content\",\n        style: `padding-left: 56px; padding-right: 56px; min-height: ${dimensions.height}px; width: ${dimensions.width}px;`,\n        class:\n          \"focus:outline-none print:border-0 bg-white border border-[#C7C7C7] flex flex-col pt-10 pr-10 cursor-text\",\n      },\n    },\n    extensions: [\n      StarterKit,\n      LineHeightExtension,\n      FontSizeExtension,\n      textDirectionExtension,\n      TextAlign.configure({\n        types: [\"heading\", \"paragraph\"],\n      }),\n      Link.configure({\n        openOnClick: false,\n        autolink: true,\n        defaultProtocol: \"https\",\n      }),\n      Color,\n      Highlight.configure({\n        multicolor: true,\n      }),\n      FontFamily,\n      TextStyle,\n      Underline,\n      Image,\n      ImageResize,\n      Table,\n      TableCell,\n      TableHeader,\n      TableRow,\n      TaskItem.configure({\n        nested: true,\n      }),\n      TaskList,\n      ...customExtensions,\n    ],\n  });\n\n  // Handle inserting the content into the editor once it's available\n  useEffect(() => {\n    if (editor && content) {\n      editor.commands.setContent(content);\n    } else if (editor && (!content || content === \"\")) {\n      // For empty content, set default direction and alignment\n      const isEmpty = editor.isEmpty;\n      if (isEmpty) {\n        editor.commands.setTextDirection(defaultDirection);\n        editor.commands.setTextAlign(\n          defaultDirection === \"rtl\" ? \"right\" : \"left\"\n        );\n      }\n    }\n  }, [editor, content, defaultDirection]);\n\n  return (\n    <div\n      className={cn(\"goat-editor min-h-screen bg-[#FAFBFD]\", className)}\n      data-testid=\"goat-editor\"\n    >\n      {showToolbar && (\n        <div className=\"goat-editor-toolbar-wrapper flex flex-col px-4 pt-2 gap-y-2 fixed top-0 left-0 right-0 z-10 bg-[#FAFBFD] print:hidden\">\n          <Toolbar\n            direction={toolbarDirection || defaultDirection}\n            className={toolbarClassName}\n          />\n        </div>\n      )}\n      <div\n        className={cn(\n          \"goat-editor-content-wrapper print:pt-0\",\n          showToolbar && \"pt-[60px]\"\n        )}\n      >\n        <div\n          id=\"goat-editor-container\"\n          data-testid=\"editor-container\"\n          className=\"size-full overflow-x-auto bg-[#F9FBFD] px-4 print:p-0 print:bg-white print:overflow-visible\"\n        >\n          {showRuler && <Ruler width={dimensions.width} />}\n          <div\n            className=\"min-w-max flex justify-center py-4 print:py-0 mx-auto print:w-full print:min-w-0\"\n            style={{ width: `${dimensions.width}px` }}\n          >\n            <EditorContent editor={editor} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GoatEditor;\n\n","/**\n * PDF Export Module\n * \n * Exports TipTap editor content to PDF by:\n * 1. First generating a DOCX using the docx library\n * 2. Converting the DOCX to PDF using LibreOffice WASM (zetajs)\n * \n * All dependencies are lazy-loaded for optimal bundle size.\n * \n * Requirements for consumers:\n * - Server must send headers for SharedArrayBuffer support:\n *   - Cross-Origin-Opener-Policy: same-origin\n *   - Cross-Origin-Embedder-Policy: require-corp\n */\n\nimport { Editor } from \"@tiptap/react\";\nimport { saveAs } from \"file-saver\";\nimport { generateDocxBlob } from \"../docx\";\n\nexport type ExportPdfStatus = \n  | \"idle\"\n  | \"initializing\"\n  | \"generating-docx\"\n  | \"converting-to-pdf\"\n  | \"complete\"\n  | \"error\";\n\nexport interface ExportPdfProgress {\n  status: ExportPdfStatus;\n  message: string;\n  error?: string;\n}\n\n/**\n * Lazy load the converter module\n * This ensures the ~56KB of helper code is only loaded when needed\n */\nasync function getConverterModule() {\n  const { getConverter, convertDocxToPdf, preInitialize } = await import(\"./zetajs-converter\");\n  return { getConverter, convertDocxToPdf, preInitialize };\n}\n\n/**\n * Export TipTap editor content to PDF\n * \n * @param editor - The TipTap editor instance\n * @param filename - Output filename (default: \"document.pdf\")\n * @param onProgress - Optional callback for progress updates\n * @returns Promise that resolves when export is complete\n */\nexport async function exportToPdf(\n  editor: Editor | null,\n  filename: string = \"document.pdf\",\n  onProgress?: (progress: ExportPdfProgress) => void\n): Promise<void> {\n  if (!editor) {\n    onProgress?.({ status: \"error\", message: \"Export failed\", error: \"No editor provided\" });\n    throw new Error(\"No editor provided\");\n  }\n\n  try {\n    // Step 1: Initialize LibreOffice WASM if not already done\n    onProgress?.({ status: \"initializing\", message: \"Initializing PDF converter...\" });\n    \n    const { getConverter } = await getConverterModule();\n    const converter = getConverter();\n    await converter.initialize();\n    \n    // Step 2: Generate DOCX blob from editor content\n    onProgress?.({ status: \"generating-docx\", message: \"Generating document...\" });\n    \n    const docxBlob = await generateDocxBlob(editor);\n    if (!docxBlob) {\n      throw new Error(\"Failed to generate DOCX\");\n    }\n    \n    // Step 3: Convert DOCX to PDF\n    onProgress?.({ status: \"converting-to-pdf\", message: \"Converting to PDF...\" });\n    \n    const baseName = filename.replace(/\\.pdf$/i, \"\");\n    const pdfBlob = await converter.convertDocxToPdf(docxBlob, baseName);\n    \n    // Step 4: Download the PDF\n    onProgress?.({ status: \"complete\", message: \"Download starting...\" });\n    \n    const outputFilename = filename.endsWith(\".pdf\") ? filename : `${filename}.pdf`;\n    saveAs(pdfBlob, outputFilename);\n    \n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : \"Unknown error\";\n    onProgress?.({ status: \"error\", message: \"Export failed\", error: errorMessage });\n    throw error;\n  }\n}\n\n/**\n * Generate a PDF blob from editor content without downloading\n * \n * @param editor - The TipTap editor instance\n * @param onProgress - Optional callback for progress updates\n * @returns Promise that resolves with the PDF blob\n */\nexport async function generatePdfBlob(\n  editor: Editor | null,\n  onProgress?: (progress: ExportPdfProgress) => void\n): Promise<Blob | null> {\n  if (!editor) {\n    onProgress?.({ status: \"error\", message: \"Generation failed\", error: \"No editor provided\" });\n    return null;\n  }\n\n  try {\n    // Step 1: Initialize LibreOffice WASM if not already done\n    onProgress?.({ status: \"initializing\", message: \"Initializing PDF converter...\" });\n    \n    const { getConverter } = await getConverterModule();\n    const converter = getConverter();\n    await converter.initialize();\n    \n    // Step 2: Generate DOCX blob from editor content\n    onProgress?.({ status: \"generating-docx\", message: \"Generating document...\" });\n    \n    const docxBlob = await generateDocxBlob(editor);\n    if (!docxBlob) {\n      throw new Error(\"Failed to generate DOCX\");\n    }\n    \n    // Step 3: Convert DOCX to PDF\n    onProgress?.({ status: \"converting-to-pdf\", message: \"Converting to PDF...\" });\n    \n    const pdfBlob = await converter.convertDocxToPdf(docxBlob, \"document\");\n    \n    onProgress?.({ status: \"complete\", message: \"PDF generated\" });\n    return pdfBlob;\n    \n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : \"Unknown error\";\n    onProgress?.({ status: \"error\", message: \"Generation failed\", error: errorMessage });\n    throw error;\n  }\n}\n\n/**\n * Pre-initialize the PDF converter\n * Call this early to reduce wait time when user exports\n * Note: This will lazy-load the converter module\n */\nexport async function preInitializePdfConverter(): Promise<void> {\n  const { preInitialize } = await getConverterModule();\n  return preInitialize();\n}\n\n/**\n * Check if the PDF converter is ready\n * Note: Will return false if the converter module hasn't been loaded yet\n */\nexport async function isPdfConverterReady(): Promise<boolean> {\n  try {\n    const { getConverter } = await getConverterModule();\n    return getConverter().isReady();\n  } catch {\n    return false;\n  }\n}\n\n"]}